<!DOCTYPE html>
<html lang="en">
<!--
╔══════════════════════════════════════════════════════════════════════════════╗
║                         CO³ ONE - CODE INDEX                                  ║
║                    Last Updated: Session cleanup & bug fixes                  ║
╠══════════════════════════════════════════════════════════════════════════════╣
║                                                                               ║
║  RECENT CHANGES                                                               ║
║  ─────────────────────────────────────────────────────────────────────────────║
║    • Terms of access: shows once per session (sessionStorage)                ║
║    • Demo sim: auto-stops on page exit, white exit markers on sparkline      ║
║    • Nav toggle: teal color via JS (setTheme function)                       ║
║    • Nav hidden on lab demo page                                             ║
║    • Particle hover OFF on doors/hardware/software/lab pages                 ║
║    • Logos in nav container, bottom-left, show only when nav expanded        ║
║    • Centered: discover/contact links, hw/sw page content, landing question  ║
║    • Landing question uses mono font like section titles                     ║
║    • Smoke animation 1.67x speed (3/5 original duration)                     ║
║    • Transitions 1.2-1.5s (3/5 original duration)                            ║
║    • Null checks added for nav functions                                     ║
║                                                                               ║
╠══════════════════════════════════════════════════════════════════════════════╣
║                                                                               ║
║  CSS STYLES (~150-3850)                                                       ║
║  ─────────────────────────────────────────────────────────────────────────────║
║    :root Variables ................. ~151                                     ║
║    Canvas Container ................ ~290                                     ║
║    Logo SVG container .............. ~296                                     ║
║    Logo rings (static + animated) .. ~324-430                                 ║
║      staticRingPulse keyframes ..... ~340                                     ║
║    Logo below (subtitle) ........... ~448                                     ║
║                                                                               ║
║    NAVIGATION (bottom-right, expands up)                                      ║
║      #nav Container ................ ~470                                     ║
║      .nav-toggle (hamburger) ....... ~490                                     ║
║      .nav-vertices (menu items) .... ~540                                     ║
║                                                                               ║
║    ABOUT PAGE                                                                 ║
║      Container ..................... ~670                                     ║
║      .about-section ................ ~700                                     ║
║      .about-footer ................. ~830                                     ║
║      .patent-inline ................ ~800                                     ║
║                                                                               ║
║    SITE BANNER (bottom) ............ ~940                                     ║
║                                                                               ║
║    APPLICATIONS & DOORS                                                       ║
║      #applications-splash .......... ~3535                                    ║
║      .app-splash-logo (SVG) ........ ~3557                                    ║
║      .app-splash-ring-static ....... ~3581                                    ║
║        staticRingPulseTeal ......... ~3597                                    ║
║      #doors ........................ ~3700                                    ║
║                                                                               ║
║    ALIGNMENT DEMO (inline style) ... ~4290                                    ║
║      .alignment-container .......... ~4296                                    ║
║      .alignment-top-row ............ ~4336                                    ║
║      .alignment-sparkline .......... ~4424                                    ║
║      .alignment-diagrams ........... ~4351                                    ║
║                                                                               ║
╠══════════════════════════════════════════════════════════════════════════════╣
║                                                                               ║
║  HTML STRUCTURE (~4110+)                                                      ║
║  ─────────────────────────────────────────────────────────────────────────────║
║    Canvas Container ................ ~4112                                    ║
║    Logo Rings ...................... ~4115-4118                               ║
║    Logo SVG Text ................... ~4119                                    ║
║    Logo Below (subtitle) ........... ~4140                                    ║
║                                                                               ║
║    Applications Splash ............. ~4144                                    ║
║      SVG logo ...................... ~4151                                    ║
║      Static ring ................... ~4167                                    ║
║    Doors Overlay ................... ~4170                                    ║
║                                                                               ║
║    LAB PAGE ........................ ~4190                                    ║
║      Alignment demo ................ ~4288                                    ║
║        Top row (metrics+controls) .. ~4685                                    ║
║        Sparkline ................... ~4752                                    ║
║        Diagrams (state+phase) ...... ~4757                                    ║
║                                                                               ║
║    NAV ............................. ~4785                                    ║
║    ABOUT PAGE ...................... ~4805                                    ║
║    THEORY PAGE ..................... ~4845                                    ║
║    PATENT PAGE ..................... ~5015                                    ║
║      Original claims (collapsible) . ~5095                                    ║
║      Amended claims (collapsible) .. ~5165                                    ║
║    HARDWARE PAGE ................... ~5415                                    ║
║    SOFTWARE PAGE ................... ~5615                                    ║
║    CONTACT PAGE .................... ~5895                                    ║
║                                                                               ║
║    SITE BANNER ..................... ~7830                                    ║
║                                                                               ║
╠══════════════════════════════════════════════════════════════════════════════╣
║                                                                               ║
║  JAVASCRIPT (~6215+)                                                          ║
║  ─────────────────────────────────────────────────────────────────────────────║
║    THREE.JS WIREFRAME .............. ~6215                                    ║
║                                                                               ║
║    NAVIGATION STATE                                                           ║
║      currentPage ................... ~6285                                    ║
║      navigateTo() .................. ~6300                                    ║
║      updateBannerVisibility() ...... ~6436 (lab added to hidden)              ║
║                                                                               ║
║    ALIGNMENT DEMO                                                             ║
║      alignmentState ................ ~6674                                    ║
║        - manualSteps[] (step btn)                                             ║
║        - pauseMarkers[] (slider)                                              ║
║      renderSparkline() ............. ~6870                                    ║
║        - zone labels (SAFE/WARN/FAIL)                                         ║
║        - START marker                                                         ║
║        - dashed lines (pauses)                                                ║
║        - solid lines (manual steps)                                           ║
║      pauseSimulation() ............. ~6964 (records pause markers)            ║
║                                                                               ║
║    APPLICATIONS/DOORS FUNCTIONS                                               ║
║      showApplicationsSplash() ...... ~7505                                    ║
║      showDoors() ................... ~7540                                    ║
║      app-splash-logo click ......... ~7600                                    ║
║      app-splash hover glow ......... ~7605                                    ║
║                                                                               ║
║    CLAIMS TOGGLE (patent page) ..... ~7635                                    ║
║                                                                               ║
╚══════════════════════════════════════════════════════════════════════════════╝
-->
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=5">
  <meta name="theme-color" content="#000000">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>co³.one</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><circle cx='16' cy='16' r='14.5' fill='none' stroke='%23ff6700' stroke-width='0.5' opacity='0.5'/><g transform='translate(16,16) scale(1,1.3) translate(-16,-16)'><text x='16' y='19' text-anchor='middle' font-family='Georgia,serif' font-size='12' font-style='italic' font-weight='300' fill='%23ff6700'>Co</text><text x='23' y='14' font-family='Georgia,serif' font-size='5' font-style='italic' font-weight='300' fill='%23ff6700'>3</text></g></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400;1,500;1,600&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --orange: #ff6700;
      --orange-dim: rgba(255, 103, 0, 0.7);
      --orange-glow: rgba(255, 103, 0, 0.15);
      --orange-subtle: rgba(255, 103, 0, 0.08);
      --teal: #00d4aa;
      --teal-dim: rgba(0, 212, 170, 0.7);
      --teal-glow: rgba(0, 212, 170, 0.15);
      --teal-subtle: rgba(0, 212, 170, 0.08);
      --accent: var(--orange);
      --accent-dim: var(--orange-dim);
      --accent-glow: var(--orange-glow);
      --accent-subtle: var(--orange-subtle);
      --black: #000;
      --near-black: #0a0a0a;
      --dark: #111;
      --dark-mid: #161616;
      --gray-dark: #1a1a1a;
      --gray-mid: #2a2a2a;
      --gray: #444;
      --gray-light: #666;
      --gray-lighter: #888;
      --gray-text: #999;
      --gray-pale: #aaa;
      --gray-bright: #ccc;
      --white: #fff;
      --font-display: 'Cormorant Garamond', Georgia, serif;
      --font-mono: 'JetBrains Mono', 'Courier New', monospace;
      --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
      --ease-out-quart: cubic-bezier(0.25, 1, 0.5, 1);
    }
    
    /* Teal theme for hardware/software pages */
    body.theme-teal {
      --accent: var(--teal);
      --accent-dim: var(--teal-dim);
      --accent-glow: var(--teal-glow);
      --accent-subtle: var(--teal-subtle);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    ::selection {
      background: var(--orange);
      color: var(--black);
    }
    
    html {
      font-size: 16px;
    }
    
    body {
      background: var(--black);
      overflow-x: hidden;
      font-family: var(--font-display);
      font-weight: 400;
      color: var(--gray-bright);
      line-height: 1.85;
      letter-spacing: 0.01em;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }
    
    /* Transition overlay */
    #transition-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: transparent;
      z-index: 50;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 1.2s ease-in-out;
    }
    
    #transition-overlay.active {
      opacity: 1;
      pointer-events: auto;
    }
    
    #transition-logo {
      font-family: var(--font-display);
      font-style: italic;
      font-weight: 300;
      font-size: clamp(80px, 20vmin, 200px);
      color: var(--orange);
      text-shadow: 
        0 0 80px rgba(255, 103, 0, 0.4),
        0 0 120px rgba(255, 103, 0, 0.2);
      transform: scaleY(1.3);
      letter-spacing: -0.03em;
      opacity: 0;
      transition: opacity 1.5s ease-in-out;
    }
    
    #transition-overlay.active #transition-logo {
      opacity: 1;
    }
    
    #transition-logo sup {
      font-size: 0.35em;
      vertical-align: super;
      margin-left: 0.1em;
      position: relative;
      top: -0.4em;
    }
    
    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
    }
    
    ::-webkit-scrollbar-track {
      background: var(--near-black);
    }
    
    ::-webkit-scrollbar-thumb {
      background: var(--gray-mid);
      border-radius: 3px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: var(--gray);
    }
    
    /* Three.js container */
    #canvas-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 1;
      pointer-events: none;
      background: #000;
    }
    
    #canvas-container canvas {
      pointer-events: none;
    }
    
    /* Logo - splash screen */
    #logo-text {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: clamp(70px, 18vmin, 180px);
      height: auto;
      user-select: none;
      z-index: 200;
      cursor: pointer;
      transition: opacity 1.2s ease-in-out;
    }
    
    #logo-text svg {
      width: 100%;
      height: auto;
      transform: scaleY(1.3);
      filter: drop-shadow(0 0 40px rgba(255, 103, 0, 0.4)) drop-shadow(0 0 80px rgba(255, 103, 0, 0.2));
      transition: filter 0.4s ease;
    }
    
    #logo-text:hover:not(.dimmed) svg {
      filter: drop-shadow(0 0 30px rgba(255, 103, 0, 0.7)) drop-shadow(0 0 60px rgba(255, 103, 0, 0.5)) drop-shadow(0 0 100px rgba(255, 103, 0, 0.3));
    }
    
    #logo-ring,
    #logo-ring-mid,
    #logo-ring-outer {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      border-radius: 50%;
      pointer-events: none;
      box-sizing: border-box;
      opacity: 0;
    }
    
    #logo-ring-static {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: clamp(85px, 22vmin, 220px);
      height: clamp(85px, 22vmin, 220px);
      border: none; /* No visible ring */
      border-radius: 50%;
      pointer-events: none;
      box-sizing: border-box;
      z-index: 199;
      animation: staticRingPulse 8s ease-in-out infinite;
    }
    
    /* Pulse glow only - no visible ring */
    @keyframes staticRingPulse {
      0% {
        box-shadow: none;
      }
      12% {
        box-shadow: 0 0 20px rgba(255, 103, 0, 0.3), inset 0 0 15px rgba(255, 103, 0, 0.15);
      }
      25% {
        box-shadow: none;
      }
      50% {
        box-shadow: none;
      }
      62% {
        box-shadow: 0 0 20px rgba(255, 103, 0, 0.3), inset 0 0 15px rgba(255, 103, 0, 0.15);
      }
      75% {
        box-shadow: none;
      }
      100% {
        box-shadow: none;
      }
    }
    
    #logo-ring-static.hidden {
      box-shadow: none !important;
      animation: none;
    }
    
    #logo-ring-static.dimmed {
      animation: staticRingPulseDimmed 8s ease-in-out infinite !important;
    }
    
    @keyframes staticRingPulseDimmed {
      0% {
        box-shadow: none;
      }
      12% {
        box-shadow: 0 0 12px rgba(68, 68, 68, 0.15), inset 0 0 8px rgba(68, 68, 68, 0.08);
      }
      25% {
        box-shadow: none;
      }
      50% {
        box-shadow: none;
      }
      62% {
        box-shadow: 0 0 12px rgba(68, 68, 68, 0.15), inset 0 0 8px rgba(68, 68, 68, 0.08);
      }
      75% {
        box-shadow: none;
      }
      100% {
        box-shadow: none;
      }
    }
    
    #logo-ring-static::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      transform: translate(-50%, -50%) scale(0);
      background: radial-gradient(circle at 40% 35%, rgba(255, 103, 0, 0.13) 0%, transparent 50%),
                  radial-gradient(circle at 65% 60%, rgba(255, 103, 0, 0.10) 0%, transparent 45%),
                  radial-gradient(circle at 35% 70%, rgba(255, 103, 0, 0.09) 0%, transparent 40%),
                  radial-gradient(circle at 60% 30%, rgba(255, 103, 0, 0.07) 0%, transparent 35%),
                  radial-gradient(circle at 50% 50%, rgba(255, 103, 0, 0.05) 0%, transparent 70%);
      opacity: 0;
      pointer-events: none;
    }
    
    @keyframes staticRingFillThenUnfill {
      0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
      }
      25% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
      26% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
        filter: grayscale(0%);
      }
      30% {
        filter: grayscale(100%);
      }
      100% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
        filter: grayscale(100%);
      }
    }
    
    @keyframes staticRingGlowFillThenUnfill {
      0% {
        box-shadow: 0 0 5px rgba(255, 103, 0, 0.04), inset 0 0 5px rgba(255, 103, 0, 0.02);
      }
      25% {
        box-shadow: 0 0 25px rgba(255, 103, 0, 0.13), inset 0 0 20px rgba(255, 103, 0, 0.09);
      }
      30% {
        box-shadow: 0 0 25px rgba(100, 100, 100, 0.13), inset 0 0 20px rgba(100, 100, 100, 0.09);
      }
      100% {
        box-shadow: none;
        opacity: 0;
      }
    }
    
    #logo-ring-static.transitioning {
      animation: staticRingGlowFillThenUnfill 8s ease-in-out forwards !important;
    }
    
    #logo-ring-static.transitioning::before {
      animation: staticRingFillThenUnfill 8s ease-in-out forwards;
    }
    
    #logo-ring {
      width: clamp(180px, 45vmin, 450px);
      height: clamp(180px, 45vmin, 450px);
      border: 1.5px solid rgba(255, 103, 0, 0.5);
      z-index: 199;
      animation: ringCascade 12s ease-in-out infinite;
    }
    
    #logo-ring-mid {
      width: clamp(180px, 45vmin, 450px);
      height: clamp(180px, 45vmin, 450px);
      border: 1.25px solid rgba(255, 103, 0, 0.35);
      z-index: 198;
      animation: ringCascade 12s ease-in-out infinite 4s;
    }
    
    #logo-ring-outer {
      width: clamp(180px, 45vmin, 450px);
      height: clamp(180px, 45vmin, 450px);
      border: 1px solid rgba(255, 103, 0, 0.2);
      z-index: 197;
      animation: ringCascade 12s ease-in-out infinite 8s;
    }
    
    #logo-ring.hidden,
    #logo-ring-mid.hidden,
    #logo-ring-outer.hidden {
      opacity: 0 !important;
      animation: none;
      transition: opacity 1s ease-in-out;
    }
    
    #logo-ring.dimmed,
    #logo-ring-mid.dimmed,
    #logo-ring-outer.dimmed {
      border-color: rgba(68, 68, 68, 0.3) !important;
      opacity: 0.15;
      transition: border-color 1.5s ease-in-out, opacity 1.5s ease-in-out;
    }
    
    #logo-ring.dimmed,
    #logo-ring-mid.dimmed,
    #logo-ring-outer.dimmed {
      animation: ringCascadeDimmed 12s ease-in-out infinite;
    }
    
    #logo-ring-mid.dimmed {
      animation-delay: 4s;
    }
    
    #logo-ring-outer.dimmed {
      animation-delay: 8s;
    }
    
    @keyframes ringCascadeDimmed {
      0% {
        transform: translate(-50%, -50%) scale(0.47);
        opacity: 0;
      }
      5% {
        opacity: 0.12;
      }
      50% {
        opacity: 0.08;
      }
      85% {
        opacity: 0.04;
      }
      100% {
        transform: translate(-50%, -50%) scale(1.5);
        opacity: 0;
      }
    }
    
    @keyframes ringCascade {
      0% {
        transform: translate(-50%, -50%) scale(0.47);
        opacity: 0;
        box-shadow: 0 0 20px rgba(255, 103, 0, 0.3), inset 0 0 15px rgba(255, 103, 0, 0.15);
      }
      5% {
        opacity: 0.5;
        box-shadow: 0 0 20px rgba(255, 103, 0, 0.3), inset 0 0 15px rgba(255, 103, 0, 0.15);
      }
      50% {
        opacity: 0.4;
        box-shadow: 0 0 15px rgba(255, 103, 0, 0.25), inset 0 0 12px rgba(255, 103, 0, 0.12);
      }
      85% {
        opacity: 0.2;
        box-shadow: 0 0 10px rgba(255, 103, 0, 0.15), inset 0 0 8px rgba(255, 103, 0, 0.08);
      }
      100% {
        transform: translate(-50%, -50%) scale(1.5);
        opacity: 0;
        box-shadow: none;
      }
    }
    
    #logo-text.hidden {
      opacity: 0;
      pointer-events: none;
    }
    
    #logo-text.dimmed {
      opacity: 0.12;
      pointer-events: none;
      transition: opacity 1.5s ease-in-out;
    }
    
    #logo-text.dimmed svg {
      filter: none;
      transition: filter 1.5s ease-in-out;
    }
    
    #logo-text.dimmed svg text {
      fill: #444;
      transition: fill 1.5s ease-in-out;
    }
    
    #logo-below {
      position: fixed;
      top: calc(50% + clamp(60px, 14vmin, 130px));
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      z-index: 10;
      opacity: 1;
      transition: opacity 1.5s ease-in-out;
    }
    
    #logo-below.hidden {
      opacity: 0;
      pointer-events: none;
    }
    
    #logo-subtitle {
      font-family: var(--font-mono);
      font-size: 0.7rem;
      color: rgba(255, 103, 0, 0.25);
      text-transform: uppercase;
      letter-spacing: 0.3em;
    }
    
    /* Navigation - Bottom Right */
    #nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 110;
      pointer-events: none;
      opacity: 0;
      transition: opacity 1.2s ease-in-out;
    }
    
    #nav.visible {
      opacity: 1;
    }
    
    #nav:hover {
      opacity: 1;
    }
    
    /* Corner logos - fade with nav expand/collapse */
    .corner-logo,
    .corner-logo-teal {
      position: fixed;
      bottom: 1.5rem;
      left: 1.5rem;
      width: 4.5rem;
      height: 3rem;
      text-decoration: none;
      cursor: pointer;
      opacity: 0;
      transition: opacity 0.4s ease-in-out;
      pointer-events: none;
    }
    
    /* Show logo when nav is expanded */
    #nav.expanded .corner-logo.visible {
      opacity: 0.6;
      pointer-events: auto;
    }
    
    #nav.expanded .corner-logo-teal.visible {
      opacity: 0.6;
      pointer-events: auto;
    }
    
    #nav.expanded .corner-logo.visible:hover,
    #nav.expanded .corner-logo-teal.visible:hover {
      opacity: 1;
    }
    
    .corner-logo svg {
      width: 100%;
      height: auto;
      transform: scaleY(1.3);
      filter: drop-shadow(0 0 20px rgba(255, 103, 0, 0.4)) drop-shadow(0 0 40px rgba(255, 103, 0, 0.2));
      transition: filter 0.4s ease;
    }
    
    .corner-logo:hover svg {
      filter: drop-shadow(0 0 15px rgba(255, 103, 0, 0.7)) drop-shadow(0 0 30px rgba(255, 103, 0, 0.5)) drop-shadow(0 0 50px rgba(255, 103, 0, 0.3));
    }
    
    .corner-logo-teal svg {
      width: 100%;
      height: auto;
      transform: scaleY(1.3);
      filter: drop-shadow(0 0 20px rgba(0, 212, 170, 0.4)) drop-shadow(0 0 40px rgba(0, 212, 170, 0.2));
      transition: filter 0.4s ease;
    }
    
    .corner-logo-teal:hover svg {
      filter: drop-shadow(0 0 15px rgba(0, 212, 170, 0.7)) drop-shadow(0 0 30px rgba(0, 212, 170, 0.5)) drop-shadow(0 0 50px rgba(0, 212, 170, 0.3));
    }
    
    /* Teal theme - same layout */
    .theme-teal #nav {
      /* Same as default */
    }
    
    .theme-teal #nav .nav-vertices {
      align-items: flex-end;
    }
    
    .theme-teal #nav .nav-vertex {
      flex-direction: row-reverse;
    }
    
    /* Nav toggle button - fixed bottom-right */
    .nav-toggle {
      position: fixed;
      right: 1.5rem;
      bottom: 1.5rem;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: 1px solid rgba(255, 103, 0, 0.4);
      background: rgba(0, 0, 0, 0.7);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease, opacity 1.2s ease-in-out;
      pointer-events: auto;
      opacity: 0.6;
    }
    
    #nav.visible .nav-toggle {
      opacity: 0.6;
    }
    
    .nav-toggle:hover {
      opacity: 1;
      border-color: var(--orange);
      box-shadow: 0 0 12px rgba(255, 103, 0, 0.3);
    }
    
    /* Teal theme nav toggle */
    body.theme-teal #nav-toggle {
      border-color: rgba(0, 212, 170, 0.4) !important;
    }
    
    body.theme-teal #nav-toggle:hover {
      border-color: var(--teal) !important;
      box-shadow: 0 0 12px rgba(0, 212, 170, 0.3) !important;
    }
    
    .nav-toggle-icon {
      width: 12px;
      height: 12px;
      position: relative;
    }
    
    .nav-toggle-icon span {
      position: absolute;
      left: 0;
      width: 100%;
      height: 1px;
      background: var(--orange);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .nav-toggle-icon span:nth-child(1) { top: 2px; }
    .nav-toggle-icon span:nth-child(2) { top: 5.5px; }
    .nav-toggle-icon span:nth-child(3) { top: 9px; }
    
    /* Toggle icon transforms to X when expanded */
    #nav.expanded .nav-toggle-icon span:nth-child(1) {
      top: 5.5px;
      transform: rotate(45deg);
    }
    #nav.expanded .nav-toggle-icon span:nth-child(2) {
      opacity: 0;
    }
    #nav.expanded .nav-toggle-icon span:nth-child(3) {
      top: 5.5px;
      transform: rotate(-45deg);
    }
    
    /* Nav menu - expands upward from bottom-right */
    .nav-vertices {
      position: fixed;
      right: 1.5rem;
      bottom: 4.5rem;
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
      align-items: flex-end;
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      padding: 0 1.2rem;
      background: rgba(20, 20, 20, 0);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0);
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0);
      transition: max-height 0.6s cubic-bezier(0.4, 0, 0.2, 1), 
                  opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1), 
                  padding 0.6s cubic-bezier(0.4, 0, 0.2, 1),
                  background 0.5s cubic-bezier(0.4, 0, 0.2, 1),
                  border-color 0.5s cubic-bezier(0.4, 0, 0.2, 1),
                  box-shadow 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      pointer-events: none;
    }
    
    #nav.expanded .nav-vertices {
      max-height: 400px;
      opacity: 1;
      background: rgba(20, 20, 20, 0.85);
      padding: 1rem 1.2rem;
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.4);
      pointer-events: auto;
    }
    
    .nav-vertex {
      display: flex;
      align-items: center;
      flex-direction: row-reverse;
      gap: 0.8rem;
      cursor: pointer;
      text-decoration: none;
      position: relative;
      opacity: 0;
      transform: translateY(8px);
      transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1), 
                  transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    #nav.expanded .nav-vertex.revealed {
      opacity: 1;
      transform: translateY(0);
    }
    
    .vertex-node {
      width: 5px;
      height: 5px;
      border-radius: 50%;
      background: rgba(255, 103, 0, 0.3);
      border: 1px solid rgba(255, 103, 0, 0.5);
      transition: all 0.5s ease;
      flex-shrink: 0;
    }
    
    .nav-vertex:hover .vertex-node {
      background: var(--orange);
      box-shadow: 0 0 10px var(--orange);
    }
    
    .nav-vertex.active .vertex-node {
      background: var(--orange);
      box-shadow: 0 0 12px var(--orange), 0 0 24px rgba(255, 103, 0, 0.4);
    }
    
    /* Teal theme vertex nodes */
    .theme-teal .vertex-node {
      background: rgba(0, 212, 170, 0.3);
      border-color: rgba(0, 212, 170, 0.5);
    }
    
    .theme-teal .nav-vertex:hover .vertex-node {
      background: var(--teal);
      box-shadow: 0 0 10px var(--teal);
    }
    
    .theme-teal .nav-vertex.active .vertex-node {
      background: var(--teal);
      box-shadow: 0 0 12px var(--teal), 0 0 24px rgba(0, 212, 170, 0.4);
    }
    
    .vertex-label {
      font-family: var(--font-display);
      font-size: 0.85rem;
      color: rgba(255, 255, 255, 0.5);
      transition: all 0.5s ease;
      white-space: nowrap;
    }
    
    .nav-vertex:hover .vertex-label {
      color: var(--white);
    }
    
    .nav-vertex.active .vertex-label {
      color: var(--orange);
    }
    
    /* Teal theme vertex labels */
    .theme-teal .nav-vertex.active .vertex-label {
      color: var(--teal);
    }
    
    .nav-vertex.nav-logo .vertex-node {
      display: none;
    }
    
    .nav-vertex.nav-logo .vertex-label {
      font-style: italic;
      font-weight: 300;
      font-size: 1.1rem;
      color: var(--orange);
      letter-spacing: -0.03em;
      border: 1px solid var(--orange);
      border-radius: 50%;
      width: 2.4rem;
      height: 2.4rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.5s ease;
      line-height: 1;
    }
    
    .nav-vertex.nav-logo:hover .vertex-label {
      box-shadow: 0 0 15px rgba(255, 103, 0, 0.4);
      background: rgba(255, 103, 0, 0.1);
    }
    
    .nav-vertex.nav-logo .vertex-label sup {
      font-size: 0.45em;
      position: relative;
      top: -0.5em;
      margin-left: -0.1em;
    }
    
    /* Page container */
    .page {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow-y: auto;
      z-index: 10;
      opacity: 0;
      pointer-events: none;
      transition: opacity 1.2s ease-in-out;
      padding-top: 80px;
    }
    
    .page.active {
      opacity: 1;
      pointer-events: auto;
    }
    
    .page-content {
      max-width: 800px;
      margin: 0 auto;
      padding: 1.5rem 5vw 3rem;
    }
    
    /* About page - elegant compact layout */
    #about-page .page-content {
      padding: 1.5rem 1.5rem;
      max-width: 680px;
      margin: 0 auto;
    }
    
    .about-splash {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 3rem 0 2.5rem;
      margin-bottom: 1rem;
    }
    
    .about-splash-logo-container {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    
    .about-splash-ring {
      position: absolute;
      width: clamp(140px, 32vmin, 260px);
      height: clamp(110px, 26vmin, 200px);
      border: 2px solid rgba(255, 103, 0, 0.6);
      border-radius: 50%;
      animation: ring-breathe 3s ease-in-out infinite;
      box-shadow: 0 0 20px rgba(255, 103, 0, 0.2);
    }
    
    @keyframes ring-breathe {
      0%, 100% {
        opacity: 0.5;
        transform: scale(1);
      }
      50% {
        opacity: 0.9;
        transform: scale(1.05);
      }
    }
    
    .about-splash-logo-container:hover .about-splash-ring {
      opacity: 1;
      border-color: rgba(255, 103, 0, 0.9);
      box-shadow: 0 0 30px rgba(255, 103, 0, 0.4);
      animation: none;
    }
    
    .about-splash-logo {
      font-family: var(--font-display);
      font-style: italic;
      font-weight: 300;
      font-size: clamp(50px, 12vmin, 100px);
      color: var(--orange);
      text-shadow: 
        0 0 80px rgba(255, 103, 0, 0.4),
        0 0 120px rgba(255, 103, 0, 0.2);
      letter-spacing: -0.03em;
      line-height: 1;
      transform: scaleY(1.3);
      user-select: none;
      position: relative;
      z-index: 1;
    }
    
    .about-splash-logo sup {
      font-size: 0.35em;
      vertical-align: super;
      margin-left: 0.1em;
      position: relative;
      top: -0.4em;
    }
    
    .about-splash-subtitle {
      font-family: var(--font-mono);
      font-size: 0.9rem;
      color: rgba(255, 103, 0, 0.7);
      text-transform: uppercase;
      letter-spacing: 0.25em;
      margin-top: 1.5rem;
    }
    
    #about-page .landing-question {
      font-family: var(--font-mono);
      font-size: clamp(0.7rem, 1.8vw, 0.85rem);
      color: var(--orange);
      font-weight: 400;
      margin-bottom: 0.8rem;
      letter-spacing: 0.1em;
      line-height: 1.35;
      text-transform: uppercase;
      text-align: center;
    }
    
    #about-page .landing-intro {
      font-size: 0.88rem;
      color: var(--gray-pale);
      line-height: 1.55;
      margin-bottom: 1.2rem;
    }
    
    #about-page .about-section {
      margin-bottom: 0.9rem;
    }
    
    #about-page .about-section-title {
      font-family: var(--font-mono);
      font-size: 0.6rem;
      color: rgba(255, 103, 0, 0.7);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      margin-bottom: 0.3rem;
    }
    
    #about-page .about-section p {
      font-size: 0.85rem;
      color: var(--gray-light);
      line-height: 1.5;
      margin: 0;
    }
    
    #about-page .patent-inline {
      font-family: var(--font-mono);
      font-size: 0.7rem;
      color: var(--orange);
      opacity: 0.7;
      margin-top: 1.5rem;
      letter-spacing: 0.02em;
      text-align: center;
    }
    
    #about-page .patent-inline a {
      color: var(--orange);
      text-decoration: none;
      opacity: 1;
      transition: opacity 0.3s ease;
    }
    
    #about-page .patent-inline a:hover {
      opacity: 0.7;
    }
    
    #about-page a {
      color: var(--orange);
      text-decoration: none;
      border-bottom: none;
      transition: opacity 0.3s ease-in-out;
    }
    
    #about-page a:hover {
      opacity: 0.7;
    }
    
    #about-page .about-footer {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1.2rem;
      margin-top: 1.2rem;
      padding-top: 0.8rem;
      border-top: 1px solid rgba(255, 255, 255, 0.05);
      flex-wrap: wrap;
    }
    
    #about-page .about-footer-divider {
      width: 1px;
      height: 12px;
      background: var(--orange);
      opacity: 0.4;
    }
    
    #about-page .about-footer-item {
      font-family: var(--font-mono);
      font-size: 0.65rem;
      color: var(--gray);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }
    
    #about-page .about-footer-cta .discover-link {
      color: var(--orange);
      display: inline-flex;
    }
    
    #about-page .pulse-letter {
      display: inline-block;
      animation: letterPulse 3s ease-in-out infinite;
      animation-delay: calc(var(--i) * 0.12s);
    }
    
    @keyframes letterPulse {
      0%, 100% {
        opacity: 0.7;
        text-shadow: none;
      }
      50% {
        opacity: 1;
        text-shadow: 0 0 8px rgba(255, 103, 0, 0.6);
      }
    }
    
    #about-page .about-footer-item a {
      color: var(--gray-light);
    }
    
    /* CTA Buttons - Apple style */
    .cta-buttons {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.8rem;
      margin: 2rem 0 1.5rem;
      width: 100%;
    }
    
    .cta-button {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.6rem 0;
      background: none;
      border: none;
      color: var(--gray-light);
      font-family: var(--font-display);
      font-size: 0.95rem;
      font-weight: 400;
      font-style: italic;
      text-decoration: none;
      cursor: pointer;
      transition: color 0.3s ease;
      letter-spacing: 0.01em;
    }
    
    .cta-button:hover {
      color: var(--orange);
    }
    
    .cta-button:active {
      opacity: 0.8;
    }
    
    .cta-button .arrow {
      font-size: 1rem;
      font-style: normal;
      transition: transform 0.3s ease;
      opacity: 0.5;
    }
    
    .cta-button:hover .arrow {
      transform: translateX(4px);
      opacity: 1;
    }
    
    /* Site-wide bottom banner */
    .site-banner {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      text-align: center;
      font-family: var(--font-mono);
      font-size: 0.55rem;
      letter-spacing: 0.2em;
      color: rgba(255, 255, 255, 0.15);
      padding: 6px 0;
      z-index: 50;
      pointer-events: none;
      transition: opacity 0.5s ease;
    }
    
    .site-banner.hidden {
      opacity: 0;
    }
    
    /* Social links - Apple pill style */
    .social-links {
      display: flex;
      gap: 0.6rem;
      flex-wrap: wrap;
      margin: 1.5rem 0 1rem;
    }
    
    .social-link {
      font-size: 0.8rem;
      padding: 0.6rem 1.1rem;
      border: none;
      border-radius: 100px;
      background: rgba(255, 255, 255, 0.06);
      color: var(--gray-lighter);
      text-decoration: none;
      transition: all 0.3s ease-in-out;
      letter-spacing: 0.02em;
    }
    
    .social-link:hover {
      background: rgba(255, 103, 0, 0.15);
      color: var(--orange);
      transform: scale(1.03);
    }
    
    .social-link:active {
      transform: scale(0.97);
    }
    
    /* Contact form - Apple style */
    .contact-section {
      margin-top: 2rem;
      max-width: 420px;
    }
    
    #contact-page h2 {
      font-size: clamp(1.2rem, 3vw, 1.6rem);
      color: var(--orange);
      font-style: normal;
      font-weight: 400;
      margin-bottom: 0.5rem;
      letter-spacing: 0.08em;
      line-height: 1.25;
    }
    
    .contact-section h3 {
      font-size: 0.95rem;
      font-style: normal;
      font-weight: 500;
      color: var(--white);
      margin-bottom: 1rem;
      letter-spacing: 0.01em;
    }
    
    .form-group {
      margin-bottom: 0.75rem;
      position: relative;
    }
    
    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 0.75rem 1rem;
      background: rgba(255, 255, 255, 0.05);
      border: none;
      border-radius: 10px;
      color: var(--white);
      font-family: var(--font-display);
      font-size: 0.9rem;
      transition: all 0.3s ease-in-out;
      outline: none;
    }
    
    .form-group input:focus,
    .form-group textarea:focus {
      background: rgba(255, 255, 255, 0.08);
      box-shadow: 0 0 0 2px rgba(255, 103, 0, 0.2);
    }
    
    .form-group input::placeholder,
    .form-group textarea::placeholder {
      color: var(--gray);
      font-style: normal;
    }
    
    .form-group textarea {
      resize: none;
      min-height: 80px;
    }
    
    #contact-form button {
      margin-top: 0.3rem;
      padding: 0.75rem 1.5rem;
      background: var(--orange);
      border: none;
      border-radius: 10px;
      color: var(--black);
      font-family: var(--font-display);
      font-size: 0.85rem;
      font-weight: 600;
      letter-spacing: 0.02em;
      cursor: pointer;
      transition: all 0.3s ease-in-out;
    }
    
    #contact-form button:hover {
      background: #ff7a1a;
      transform: scale(1.02);
    }
    
    #contact-form button:active {
      transform: scale(0.98);
    }
    
    /* Patent pending badge */
    .patent-badge {
      margin-top: 1.5rem;
      padding-top: 1rem;
      border-top: 1px solid rgba(255, 255, 255, 0.06);
      color: var(--gray);
      font-size: 0.75rem;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      text-align: center;
    }
    
    .patent-badge a {
      color: var(--gray);
      text-decoration: none;
      border-bottom: none;
      transition: color 0.3s ease-in-out;
    }
    
    .patent-badge a:hover {
      color: var(--orange);
    }
    
    /* Theory page */
    #rcott-page h1 {
      font-size: clamp(1.2rem, 3vw, 1.8rem);
      color: var(--orange);
      font-style: italic;
      font-weight: 400;
      margin-bottom: 0.3rem;
      letter-spacing: -0.02em;
      line-height: 1.3;
    }
    
    #rcott-page .subtitle {
      color: var(--gray);
      margin-bottom: 0.6rem;
      font-size: 0.85rem;
    }
    
    #rcott-page .gating {
      font-family: var(--font-mono);
      font-size: 0.9rem;
      font-weight: 400;
      color: var(--orange);
      padding: 0.5rem 0.8rem;
      border: none;
      border-radius: 8px;
      display: inline-block;
      margin-bottom: 0.8rem;
      background: rgba(255, 103, 0, 0.1);
    }
    
    #rcott-page section {
      margin: 1rem 0;
      padding-top: 1rem;
      border-top: 1px solid rgba(255, 255, 255, 0.06);
    }
    
    #rcott-page section:first-of-type {
      border-top: none;
      margin-top: 0.5rem;
      padding-top: 0;
    }
    
    #rcott-page h2 {
      font-size: 1.1rem;
      color: var(--orange);
      font-style: normal;
      font-weight: 500;
      margin-bottom: 0.6rem;
      letter-spacing: -0.01em;
    }
    
    #rcott-page h3 {
      font-size: 0.95rem;
      color: var(--white);
      font-weight: 500;
      margin: 0.8rem 0 0.4rem;
    }
    
    #rcott-page p {
      max-width: 680px;
      margin-bottom: 0.6rem;
      color: var(--gray-pale);
      font-size: 0.9rem;
    }
    
    .math-block {
      background: rgba(255, 103, 0, 0.06);
      border: none;
      border-radius: 14px;
      padding: 1.8rem 2rem;
      margin: 2.5rem 0;
      font-family: var(--font-mono);
      font-size: 0.9rem;
      overflow-x: auto;
      line-height: 2.2;
    }
    
    .math-block .symbol {
      color: var(--orange);
    }
    
    .symbol-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 0.6rem;
      margin: 2rem 0;
    }
    
    .symbol-item {
      display: flex;
      align-items: center;
      gap: 1.2rem;
      padding: 0.9rem 1.1rem;
      background: rgba(255, 255, 255, 0.03);
      border: none;
      border-radius: 10px;
      transition: background 0.3s ease-in-out;
    }
    
    .symbol-item:hover {
      background: rgba(255, 255, 255, 0.06);
    }
    
    .symbol-item .sym {
      font-family: var(--font-mono);
      color: var(--orange);
      font-size: 0.9rem;
      min-width: 70px;
    }
    
    .symbol-item .def {
      color: var(--gray-pale);
      font-size: 0.9rem;
    }
    
    /* Invariant list - Apple toggle style */
    .invariant-list {
      margin: 2rem 0;
    }
    
    .invariant-item {
      display: flex;
      align-items: center;
      gap: 1.2rem;
      padding: 1rem 1.2rem;
      margin: 0.5rem 0;
      background: rgba(255, 255, 255, 0.03);
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease-in-out;
    }
    
    .invariant-item:hover {
      background: rgba(255, 255, 255, 0.05);
    }
    
    .invariant-item .toggle {
      width: 48px;
      height: 28px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 14px;
      position: relative;
      transition: background 0.3s ease-in-out;
      flex-shrink: 0;
    }
    
    .invariant-item .toggle::after {
      content: '';
      position: absolute;
      top: 3px;
      left: 3px;
      width: 22px;
      height: 22px;
      background: var(--white);
      border-radius: 50%;
      transition: all 0.3s ease-in-out;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }
    
    .invariant-item.checked .toggle {
      background: var(--orange);
    }
    
    .invariant-item.checked .toggle::after {
      left: 23px;
    }
    
    .invariant-item .label {
      font-size: 0.95rem;
      color: var(--gray-bright);
    }
    
    .gate-result {
      font-family: var(--font-mono);
      font-size: 1rem;
      text-align: center;
      padding: 1.5rem;
      margin: 2.5rem 0;
      border: none;
      border-radius: 14px;
      transition: all 0.4s ease-in-out;
    }
    
    .gate-result.pass {
      background: rgba(255, 103, 0, 0.12);
      color: var(--orange);
    }
    
    .gate-result.fail {
      background: rgba(255, 255, 255, 0.05);
      color: var(--gray);
    }
    
    /* Domain selector - Apple segmented control style */
    .domain-selector {
      margin: 2.5rem 0 1.5rem;
    }
    
    .domain-pills {
      display: inline-flex;
      gap: 0;
      flex-wrap: wrap;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      padding: 4px;
    }
    
    .domain-pill {
      padding: 0.7rem 1.3rem;
      background: transparent;
      border: none;
      border-radius: 10px;
      color: var(--gray-lighter);
      font-family: var(--font-display);
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease-in-out;
    }
    
    .domain-pill:hover {
      color: var(--white);
    }
    
    .domain-pill.active {
      background: rgba(255, 103, 0, 0.2);
      color: var(--orange);
    }
    
    .domain-content {
      display: none;
      padding: 1.8rem;
      background: rgba(255, 255, 255, 0.03);
      border: none;
      border-radius: 16px;
      margin-top: 1rem;
    }
    
    .domain-content.active {
      display: block;
      animation: fadeIn 0.5s ease-in-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .domain-content h4 {
      color: var(--orange);
      font-weight: 500;
      font-style: normal;
      font-size: 1rem;
      margin-bottom: 1.2rem;
    }
    
    .domain-content table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .domain-content td {
      padding: 0.9rem 0.5rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      font-size: 0.95rem;
      vertical-align: top;
    }
    
    .domain-content tr:last-child td {
      border-bottom: none;
    }
    
    .domain-content td:first-child {
      color: var(--orange);
      font-family: var(--font-mono);
      font-size: 0.85rem;
      width: 100px;
      padding-right: 1.5rem;
      opacity: 0.9;
    }
    
    /* Failure modes - Apple card style */
    .failure-modes {
      margin-top: 2rem;
    }
    
    .failure-item {
      padding: 1.3rem 1.5rem;
      background: rgba(255, 100, 100, 0.06);
      border: none;
      border-radius: 12px;
      margin-bottom: 0.6rem;
    }
    
    .failure-item h4 {
      color: #ff9999;
      font-weight: 500;
      font-size: 0.95rem;
      margin-bottom: 0.3rem;
    }
    
    .failure-item p {
      color: var(--gray-lighter);
      font-size: 0.9rem;
      margin: 0;
    }
    
    /* Patent page */
    #patent-page .page-content {
      padding-top: 4rem;
    }
    
    .patent-header {
      margin-bottom: 3rem;
    }
    
    .patent-header .label {
      font-size: 0.7rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--gray);
      margin-bottom: 0.8rem;
    }
    
    .patent-header h1 {
      font-size: clamp(1.5rem, 4vw, 2.2rem);
      color: var(--white);
      font-weight: 500;
      line-height: 1.35;
      margin-bottom: 2rem;
      max-width: 680px;
    }
    
    .patent-meta {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 1rem;
      padding: 1.5rem;
      background: rgba(255, 255, 255, 0.03);
      border: none;
      border-radius: 16px;
    }
    
    .patent-meta-item .key {
      font-size: 0.65rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--gray);
      margin-bottom: 0.3rem;
    }
    
    .patent-meta-item .value {
      font-family: var(--font-mono);
      font-size: 0.9rem;
      color: var(--orange);
    }
    
    .patent-section {
      margin: 3rem 0;
      padding-top: 2.5rem;
      border-top: 1px solid rgba(255, 255, 255, 0.06);
    }
    
    .patent-section h2 {
      font-size: 1.2rem;
      color: var(--orange);
      font-style: normal;
      font-weight: 500;
      margin-bottom: 1.5rem;
    }
    
    .patent-section h3 {
      font-size: 1rem;
      color: var(--white);
      font-weight: 500;
      margin: 1.8rem 0 0.8rem;
    }
    
    .amendment-date {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      color: var(--orange);
      opacity: 0.7;
      margin-bottom: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .amendment-note {
      color: var(--gray-lighter);
      font-size: 0.85rem;
      line-height: 1.7;
      padding: 1rem 1.2rem;
      background: rgba(255, 103, 0, 0.05);
      border-left: 2px solid var(--orange);
      border-radius: 0 8px 8px 0;
      margin-bottom: 1.5rem;
    }
    
    .claim-number {
      display: none;
    }
    
    .patent-text {
      color: var(--gray-bright);
      line-height: 1.85;
      margin-bottom: 1.2rem;
    }
    
    /* Claims section */
    .claims-list {
      counter-reset: claim;
    }
    
    .claims-list.amendment-claims {
      counter-reset: claim 14;
    }
    
    .claim-item {
      padding: 1.4rem;
      background: rgba(255, 255, 255, 0.03);
      border: none;
      border-radius: 14px;
      margin-bottom: 0.6rem;
      position: relative;
      padding-left: 3.8rem;
    }
    
    .claim-item::before {
      counter-increment: claim;
      content: counter(claim) ".";
      position: absolute;
      left: 1.4rem;
      top: 1.4rem;
      font-family: var(--font-mono);
      font-size: 0.85rem;
      color: var(--orange);
      opacity: 0.8;
    }
    
    .claim-item p {
      margin: 0;
      color: var(--gray-bright);
      line-height: 1.75;
    }
    
    .claim-item .dependent {
      color: var(--gray-lighter);
      font-size: 0.9rem;
      margin-top: 0.5rem;
    }
    
    /* Claims toggle sections */
    .claims-toggle-section {
      margin-bottom: 1rem;
    }
    
    .claims-toggle {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      width: 100%;
      padding: 1rem 1.2rem;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.06);
      border-radius: 10px;
      cursor: pointer;
      font-family: var(--font-mono);
      font-size: 0.8rem;
      color: var(--gray-lighter);
      text-align: left;
      transition: all 0.3s ease;
    }
    
    .claims-toggle:hover {
      background: rgba(255, 255, 255, 0.05);
      border-color: rgba(255, 255, 255, 0.1);
    }
    
    .claims-toggle.active {
      background: rgba(255, 103, 0, 0.08);
      border-color: rgba(255, 103, 0, 0.3);
      color: var(--white);
    }
    
    .claims-toggle .toggle-indicator {
      color: var(--orange);
      font-size: 0.6rem;
    }
    
    .claims-toggle .toggle-status {
      margin-left: auto;
      font-size: 0.65rem;
      letter-spacing: 0.1em;
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      background: rgba(255, 103, 0, 0.15);
      color: var(--orange);
    }
    
    .claims-toggle .toggle-status.superseded {
      background: rgba(255, 255, 255, 0.05);
      color: var(--gray);
    }
    
    .claims-content {
      margin-top: 1rem;
      transition: all 0.4s ease;
    }
    
    .claims-content.collapsed {
      max-height: 0;
      overflow: hidden;
      margin-top: 0;
      opacity: 0;
    }
    
    .claims-content.blurred .claims-list {
      filter: blur(3px);
      opacity: 0.5;
      pointer-events: none;
      user-select: none;
    }
    
    .claims-content:not(.collapsed) {
      max-height: none;
      opacity: 1;
    }
    
    /* Patent notice and figures */
    .patent-notice {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      padding: 0.85rem 1.2rem;
      background: rgba(255, 255, 255, 0.04);
      border: none;
      border-radius: 10px;
      margin-bottom: 2.5rem;
      font-size: 0.8rem;
      color: var(--gray-lighter);
    }
    
    .patent-notice .notice-icon {
      color: var(--orange);
      font-size: 0.85rem;
    }
    
    /* Figures */
    .figure-full {
      margin: 2rem 0;
      padding: 1.8rem;
      background: rgba(255, 255, 255, 0.03);
      border: none;
      border-radius: 16px;
    }
    
    .figure-full .figure-label {
      font-family: var(--font-mono);
      font-size: 0.7rem;
      color: var(--orange);
      letter-spacing: 0.08em;
      margin-bottom: 0.25rem;
      opacity: 0.85;
    }
    
    .figure-full .figure-title {
      font-size: 0.95rem;
      color: var(--white);
      margin-bottom: 1.3rem;
      font-weight: 500;
    }
    
    .patent-figure {
      width: 100%;
      max-width: 100%;
      height: auto;
      margin-bottom: 1.3rem;
    }
    
    .figure-full .figure-desc {
      font-size: 0.85rem;
      color: var(--gray-lighter);
      font-style: normal;
      padding-top: 1rem;
      border-top: 1px solid rgba(255, 255, 255, 0.06);
    }
    
    /* Claims - additional styles */
    .claim-item.claim-independent {
      background: rgba(255, 103, 0, 0.06);
    }
    
    .claim-item p {
      margin: 0 0 0.6rem 0;
    }
    
    .claim-item p:last-child {
      margin-bottom: 0;
    }
    
    .claim-element {
      padding-left: 1.2rem;
      color: var(--gray-pale) !important;
      font-size: 0.92rem;
    }
    
    /* Page link */
    .page-link {
      margin-top: 3rem;
      padding-top: 1.5rem;
      border-top: 1px solid rgba(255, 255, 255, 0.06);
    }
    
    .page-link a {
      color: var(--orange);
      text-decoration: none;
      font-size: 0.95rem;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      transition: opacity 0.3s ease-in-out;
    }
    
    .page-link a:hover {
      opacity: 0.7;
    }
    
    /* Lab page - hidden/protected */
    .lab-gate {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 2rem 1rem;
      background: rgba(0, 0, 0, 0.97);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      z-index: 1000;
      overflow-y: auto;
    }
    
    .lab-gate.hidden {
      display: none;
    }
    
    /* Disclaimer styles - Apple aesthetic - unified card */
    .disclaimer-prompt {
      width: calc(100% - 2rem);
      max-width: 500px;
      padding: 2rem;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 24px;
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.05);
      margin: 1rem;
      box-sizing: border-box;
    }
    
    .disclaimer-prompt.hidden {
      display: none;
    }
    
    .disclaimer-header {
      text-align: center;
      margin-bottom: 1.5rem;
    }
    
    .disclaimer-header .lab-icon {
      font-size: 1.8rem;
      color: var(--orange);
      margin-bottom: 1rem;
      opacity: 0.9;
    }
    
    .disclaimer-header h2 {
      font-size: 1.4rem;
      color: var(--white);
      font-weight: 600;
      margin-bottom: 0.4rem;
      letter-spacing: -0.02em;
    }
    
    .disclaimer-header p {
      color: var(--gray);
      font-size: 0.9rem;
    }
    
    .disclaimer-scroll {
      height: 280px;
      overflow-y: auto;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 16px;
      margin-bottom: 1.2rem;
      border: 1px solid rgba(255, 255, 255, 0.05);
      -webkit-overflow-scrolling: touch;
    }
    
    .disclaimer-scroll::-webkit-scrollbar {
      width: 6px;
    }
    
    .disclaimer-scroll::-webkit-scrollbar-track {
      background: transparent;
    }
    
    .disclaimer-scroll::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.15);
      border-radius: 3px;
    }
    
    .disclaimer-scroll::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 255, 255, 0.25);
    }
    
    .disclaimer-content {
      padding: 1.5rem;
      font-size: 0.8rem;
      line-height: 1.75;
      color: var(--gray-pale);
    }
    
    .disclaimer-content h3 {
      font-size: 0.95rem;
      color: var(--white);
      font-weight: 600;
      margin-bottom: 0.4rem;
      text-align: center;
      letter-spacing: -0.01em;
    }
    
    .disclaimer-content .disclaimer-date {
      text-align: center;
      color: var(--gray);
      font-size: 0.75rem;
      margin-bottom: 1.5rem;
    }
    
    .disclaimer-content h4 {
      font-size: 0.85rem;
      color: var(--orange);
      font-weight: 600;
      margin: 1.5rem 0 0.8rem;
    }
    
    .disclaimer-content p {
      margin-bottom: 0.8rem;
    }
    
    .disclaimer-content strong {
      color: var(--white);
      font-weight: 500;
    }
    
    .disclaimer-end-marker {
      text-align: center;
      padding: 2rem 0 0.5rem;
      color: var(--gray);
      font-size: 0.75rem;
      border-top: 1px solid rgba(255, 255, 255, 0.08);
      margin-top: 1.5rem;
    }
    
    .disclaimer-accept-section {
      padding: 0;
    }
    
    .accept-checkbox-wrapper {
      display: flex;
      align-items: flex-start;
      gap: 0.8rem;
      margin-bottom: 1rem;
      text-align: left;
    }
    
    .accept-checkbox {
      width: 24px;
      height: 24px;
      min-width: 24px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid var(--orange);
      border-radius: 7px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease-in-out;
      margin-top: 2px;
    }
    
    .accept-checkbox .checkmark {
      color: var(--black);
      font-size: 0.9rem;
      font-weight: bold;
      opacity: 0;
      transition: opacity 0.3s ease-in-out;
    }
    
    .accept-checkbox.checked {
      background: var(--orange);
    }
    
    .accept-checkbox.checked .checkmark {
      opacity: 1;
    }
    
    .accept-checkbox-wrapper label {
      font-size: 0.85rem;
      color: var(--gray-lighter);
      line-height: 1.5;
      cursor: pointer;
    }
    
    #accept-btn {
      width: 100%;
      padding: 1rem;
      font-size: 0.95rem;
      font-weight: 600;
      border-radius: 12px;
      letter-spacing: -0.01em;
      margin-top: 0;
    }
    
    #accept-btn:disabled {
      background: rgba(255, 255, 255, 0.06);
      color: var(--gray);
      cursor: not-allowed;
      transform: none;
    }
    
    #accept-btn:disabled:hover {
      background: rgba(255, 255, 255, 0.06);
      transform: none;
    }
    
    .lab-content {
      display: none;
      opacity: 0;
      transition: opacity 0.6s ease-in-out;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 9999;
      background: #0a0a0a;
    }
    
    .lab-content.visible {
      display: block;
      opacity: 1;
    }
    
    /* Demo toggle - controlled by window.DEMO_ACTIVE */
    .demo-view {
      width: 100%;
      height: 100%;
    }
    
    .demo-404, .demo-custom {
      display: none;
    }
    
    .demo-placeholder {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 60vh;
      color: var(--gray);
      font-size: 1.1rem;
    }

    /* DVD-style Boundary Failure */
    .dvd-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      background: #000;
      pointer-events: none;
    }
    
    #noise-canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0.15;
      pointer-events: none;
    }
    
    .dvd-logo {
      position: absolute;
      padding: 1.5rem 2.5rem;
      border-radius: 8px;
      transition: background-color 0.5s ease;
      pointer-events: none;
    }
    
    .dvd-text {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.2rem;
      text-shadow: 0 0 30px currentColor, 0 0 60px currentColor;
    }
    
    .dvd-boundary {
      font-family: var(--font-display);
      font-size: clamp(3rem, 10vw, 5rem);
      font-weight: 700;
      font-style: italic;
      letter-spacing: -0.02em;
    }
    
    .dvd-title {
      font-family: var(--font-body);
      font-size: clamp(1.5rem, 5vw, 2.5rem);
      font-weight: 800;
      letter-spacing: 0.3em;
      text-transform: uppercase;
    }
    
    .dvd-subtitle {
      font-family: var(--font-body);
      font-size: clamp(0.8rem, 2.5vw, 1.2rem);
      font-weight: 600;
      letter-spacing: 0.5em;
      text-transform: uppercase;
      opacity: 0.8;
    }
    
    .dvd-exit-btn {
      position: fixed;
      bottom: 2rem;
      left: 50%;
      transform: translateX(-50%);
      z-index: 9999;
      opacity: 0.6;
      transition: opacity 0.3s ease;
      pointer-events: auto;
    }
    
    .dvd-exit-btn:hover {
      opacity: 1;
    }
    
    .lab-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.4rem;
      background: rgba(255, 103, 0, 0.08);
      border-radius: 12px;
      margin-bottom: 3rem;
    }
    
    .lab-status {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      font-size: 0.85rem;
      color: var(--orange);
    }
    
    .lab-status .status-dot {
      width: 8px;
      height: 8px;
      background: var(--orange);
      border-radius: 50%;
      animation: pulse 2s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }
    
    .lab-logout {
      padding: 0.5rem 1rem;
      background: rgba(255, 255, 255, 0.06);
      border: none;
      border-radius: 8px;
      color: var(--gray-lighter);
      font-family: var(--font-display);
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.3s ease-in-out;
    }
    
    .lab-logout:hover {
      background: rgba(255, 255, 255, 0.1);
      color: var(--white);
    }
    
    #lab-page h1 {
      font-size: clamp(1.6rem, 3.5vw, 2.2rem);
      color: var(--orange);
      font-style: italic;
      font-weight: 400;
      margin-bottom: 0.5rem;
    }
    
    .lab-intro {
      color: var(--gray);
      font-size: 1rem;
      margin-bottom: 3rem;
    }
    
    .lab-placeholder {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 5rem 2rem;
      background: rgba(255, 255, 255, 0.02);
      border-radius: 20px;
      border: 1px dashed rgba(255, 255, 255, 0.1);
    }
    
    .lab-placeholder .placeholder-icon {
      font-size: 2.5rem;
      color: var(--orange);
      opacity: 0.3;
      margin-bottom: 1rem;
    }
    
    .lab-placeholder p {
      color: var(--gray);
      font-size: 0.95rem;
    }
    
    /* Pyodide loading */
    .pyodide-loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 4rem 2rem;
      color: var(--gray);
    }
    
    .pyodide-loading.hidden {
      display: none;
    }
    
    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid rgba(255, 103, 0, 0.2);
      border-top-color: var(--orange);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 1.5rem;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Lab buttons */
    .lab-btn {
      padding: 0.9rem 1.8rem;
      background: rgba(255, 103, 0, 0.15);
      border: none;
      border-radius: 10px;
      color: var(--orange);
      font-family: var(--font-display);
      font-size: 0.95rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease-in-out;
      margin-top: 1rem;
    }
    
    .lab-btn:hover {
      background: rgba(255, 103, 0, 0.25);
      transform: scale(1.02);
    }
    
    .lab-btn:active {
      transform: scale(0.98);
    }
    
    .lab-btn.primary {
      background: var(--orange);
      color: var(--black);
    }
    
    .lab-btn.primary:hover {
      background: #ff7a1a;
    }
    
    .lab-btn.secondary {
      background: rgba(255, 255, 255, 0.08);
      color: var(--gray-lighter);
    }
    
    .lab-btn.small {
      padding: 0.6rem 1.2rem;
      font-size: 0.85rem;
      margin-top: 0;
      margin-right: 0.5rem;
    }
    
    /* Parsed variables */
    .parsed-section,
    .viz-section,
    .metrics-section,
    .output-section,
    .reco-section {
      margin-top: 2.5rem;
      padding-top: 2rem;
      border-top: 1px solid rgba(255, 255, 255, 0.06);
    }
    
    .parsed-section.hidden,
    .viz-section.hidden,
    .metrics-section.hidden,
    .output-section.hidden,
    .reco-section.hidden {
      display: none;
    }
    
    .parsed-section h3,
    .viz-section h3,
    .metrics-section h3,
    .output-section h3,
    .reco-section h3 {
      color: var(--orange);
      font-size: 1rem;
      font-weight: 500;
      margin-bottom: 1.2rem;
    }
    
    .parsed-vars {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 0.8rem;
      margin-bottom: 1rem;
    }
    
    .parsed-var {
      padding: 1rem 1.2rem;
      background: rgba(255, 255, 255, 0.04);
      border-radius: 10px;
    }
    
    .parsed-var .var-name {
      font-family: var(--font-mono);
      font-size: 0.8rem;
      color: var(--orange);
      margin-bottom: 0.3rem;
    }
    
    .parsed-var .var-value {
      font-size: 1.1rem;
      color: var(--white);
      font-weight: 500;
    }
    
    .parsed-var .var-source {
      font-size: 0.75rem;
      color: var(--gray);
      margin-top: 0.3rem;
      font-style: italic;
    }
    
    /* Visualization */
    .viz-controls {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    
    .time-display {
      font-family: var(--font-mono);
      font-size: 0.9rem;
      color: var(--orange);
      margin-left: 1rem;
    }
    
    #grid-canvas {
      width: 100%;
      max-width: 600px;
      height: auto;
      background: rgba(0, 0, 0, 0.4);
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.06);
    }
    
    .viz-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      margin-top: 1rem;
      font-size: 0.8rem;
      color: var(--gray-lighter);
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .legend-item .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }
    
    .legend-item .dot.current {
      background: var(--orange);
      box-shadow: 0 0 8px var(--orange);
    }
    
    .legend-item .dot.boundary {
      background: #ff4444;
    }
    
    .legend-item .dot.trajectory {
      background: #888;
    }
    
    .legend-item .dot.safe {
      background: rgba(255, 103, 0, 0.3);
    }
    
    /* Metrics grid */
    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 1rem;
    }
    
    .metric-card {
      padding: 1.3rem;
      background: rgba(255, 255, 255, 0.04);
      border-radius: 14px;
      text-align: center;
    }
    
    .metric-label {
      font-size: 0.75rem;
      color: var(--gray);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 0.5rem;
    }
    
    .metric-value {
      font-family: var(--font-mono);
      font-size: 1.6rem;
      color: var(--orange);
      font-weight: 500;
    }
    
    .metric-value.warning {
      color: #ffaa00;
    }
    
    .metric-value.danger {
      color: #ff4444;
    }
    
    .metric-value.good {
      color: #44cc88;
    }
    
    .metric-unit {
      font-size: 0.7rem;
      color: var(--gray);
      font-family: var(--font-mono);
      margin-top: 0.3rem;
    }
    
    /* Natural language output */
    .nl-output {
      padding: 1.5rem;
      background: rgba(255, 103, 0, 0.06);
      border-radius: 14px;
      line-height: 1.8;
      color: var(--gray-pale);
    }
    
    .nl-output strong {
      color: var(--orange);
      font-weight: 500;
    }
    
    .nl-output .warning {
      color: #ffaa00;
    }
    
    .nl-output .danger {
      color: #ff4444;
    }
    
    /* Recommendations */
    .recommendations {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }
    
    .reco-card {
      padding: 1.2rem 1.4rem;
      background: rgba(255, 255, 255, 0.04);
      border-radius: 12px;
      border-left: 3px solid var(--orange);
      cursor: pointer;
      transition: all 0.3s ease-in-out;
    }
    
    .reco-card:hover {
      background: rgba(255, 255, 255, 0.06);
      transform: translateX(4px);
    }
    
    .reco-card.selected {
      background: rgba(255, 103, 0, 0.1);
      border-left-color: #44cc88;
    }
    
    .reco-card .reco-title {
      font-weight: 500;
      color: var(--white);
      margin-bottom: 0.4rem;
    }
    
    .reco-card .reco-impact {
      font-size: 0.85rem;
      color: var(--gray-lighter);
    }
    
    .reco-card .reco-metrics {
      display: flex;
      gap: 1.5rem;
      margin-top: 0.8rem;
      font-family: var(--font-mono);
      font-size: 0.8rem;
    }
    
    .reco-card .reco-metrics span {
      color: var(--gray);
    }
    
    .reco-card .reco-metrics .better {
      color: #44cc88;
    }
    
    .reco-card .reco-metrics .worse {
      color: #ff6666;
    }

    /* Responsive */
    /* ============ RESPONSIVE DESIGN ============ */
    
    /* Large desktop (1200px+) */
    @media (min-width: 1200px) {
      .page-content {
        padding: 3rem 8vw 5rem;
        max-width: 1400px;
        margin: 0 auto;
      }
      
      #about-page .landing-question {
        font-size: 1.4rem;
      }
      
      .big-idea {
        padding: 3rem 4rem;
      }
      
      .disclaimer-scroll {
        height: 450px;
      }
    }
    
    /* Tablet and small desktop (768px - 1199px) */
    @media (max-width: 1199px) {
      .page-content {
        padding: 2.5rem 6vw 4rem;
      }
      
      .metrics-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .parsed-vars {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    /* Tablet (768px - 1023px) */
    @media (max-width: 1023px) {
      #nav {
        padding: 1.5rem 1rem 1.5rem 0.8rem;
      }
      
      .nav-vertices {
        gap: 1.5rem;
      }
      
      .vertex-label {
        font-size: 0.8rem;
      }
      
      .symbol-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .concept-card .formal {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }
      
      .concept-card .arrow {
        display: none;
      }
      
      #grid-canvas {
        height: 300px;
      }
    }
    
    /* Mobile landscape and small tablet (576px - 767px) */
    @media (max-width: 767px) {
      :root {
        --font-scale: 0.95;
      }
      
      #nav {
        padding: 1rem 0.8rem 1rem 0.5rem;
      }
      
      .nav-vertices {
        gap: 1.2rem;
      }
      
      .vertex-label {
        font-size: 0.75rem;
      }
      
      .vertex-node {
        width: 4px;
        height: 4px;
      }
      
      .nav-vertex.nav-logo .vertex-label {
        width: 2rem;
        height: 2rem;
        font-size: 0.9rem;
      }
      
      .page-content {
        padding: 2rem 5vw 6rem;
      }
      
      #about-page .landing-question {
        font-size: 1.1rem;
      }
      
      #about-page .about-section p {
        font-size: 0.85rem;
      }
      
      .social-links {
        justify-content: center;
      }
      
      .symbol-grid {
        grid-template-columns: 1fr;
      }
      
      .domain-pills {
        flex-wrap: wrap;
        justify-content: flex-start;
      }
      
      .domain-pill {
        padding: 0.6rem 1rem;
        font-size: 0.85rem;
      }
      
      .math-block {
        padding: 1.2rem 1rem;
        font-size: 0.8rem;
        line-height: 2;
      }
      
      .patent-meta {
        grid-template-columns: 1fr 1fr;
        padding: 1.2rem;
        gap: 1rem;
      }
      
      .figure-full {
        padding: 1.2rem;
      }
      
      .claim-item {
        padding: 1.2rem;
        padding-left: 3rem;
      }
      
      .claim-item::before {
        left: 1rem;
      }
      
      /* Lab page mobile */
      .disclaimer-prompt {
        width: calc(100% - 2rem);
        max-width: 100%;
        padding: 1.5rem;
        border-radius: 20px;
        margin: 0;
      }
      
      .disclaimer-scroll {
        height: 220px;
      }
      
      .disclaimer-content {
        padding: 1.2rem;
        font-size: 0.75rem;
      }
      
      .disclaimer-content h3 {
        font-size: 0.85rem;
      }
      
      .disclaimer-content h4 {
        font-size: 0.8rem;
      }
      
      .accept-checkbox-wrapper label {
        font-size: 0.8rem;
      }
      
      .metrics-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.6rem;
      }
      
      .metric-card {
        padding: 1rem;
      }
      
      .metric-value {
        font-size: 1.3rem;
      }
      
      .parsed-vars {
        grid-template-columns: 1fr;
      }
      
      .nl-input-section textarea {
        min-height: 100px;
        font-size: 0.95rem;
      }
      
      .viz-controls {
        flex-wrap: wrap;
      }
      
      .lab-btn.small {
        flex: 1;
        min-width: calc(50% - 0.5rem);
        text-align: center;
        justify-content: center;
      }
      
      .time-display {
        width: 100%;
        text-align: center;
        margin-top: 0.5rem;
        margin-left: 0;
      }
      
      #grid-canvas {
        height: 250px;
      }
      
      .viz-legend {
        flex-wrap: wrap;
        justify-content: center;
        gap: 1rem;
      }
      
      .nl-output {
        padding: 1.2rem;
        font-size: 0.9rem;
      }
      
      .reco-card {
        padding: 1rem 1.2rem;
      }
      
      .reco-card .reco-metrics {
        flex-direction: column;
        gap: 0.3rem;
      }
      
      /* Contact form mobile */
      .contact-section {
        max-width: 100%;
      }
      
      /* Field selector mobile */
      .field-dropdown {
        max-width: 100%;
      }
      
      .big-idea {
        padding: 1.8rem 1.5rem;
      }
      
      .big-idea p {
        font-size: 1rem;
      }
    }
    
    /* Mobile portrait (max 575px) */
    @media (max-width: 575px) {
      #nav {
        padding: 0.8rem 0.5rem 0.8rem 0.3rem;
        top: auto;
        bottom: 1rem;
        right: 0;
        transform: translateY(0) translateX(100%);
      }
      
      #nav.visible {
        transform: translateY(0) translateX(0);
      }
      
      .nav-vertices {
        gap: 0.8rem;
      }
      
      .vertex-label {
        font-size: 0.65rem;
      }
      
      .nav-vertex.nav-logo .vertex-label {
        width: 1.8rem;
        height: 1.8rem;
        font-size: 0.8rem;
      }
      
      .page-content {
        padding: 1.5rem 4vw 5rem;
      }
      
      #about-page .landing-question {
        font-size: 0.95rem;
      }
      
      #about-page .about-section {
        margin-bottom: 1rem;
      }
      
      #rcott-page h1,
      #lab-page h1 {
        font-size: 1.4rem;
      }
      
      .patent-header h1 {
        font-size: 1.3rem;
      }
      
      .patent-meta {
        grid-template-columns: 1fr;
      }
      
      .patent-section h2 {
        font-size: 1.1rem;
      }
      
      .domain-pills {
        padding: 3px;
        border-radius: 10px;
      }
      
      .domain-pill {
        padding: 0.5rem 0.8rem;
        font-size: 0.8rem;
        border-radius: 8px;
      }
      
      .domain-content {
        padding: 1.2rem;
        border-radius: 12px;
      }
      
      .invariant-item {
        padding: 0.9rem 1rem;
        gap: 1rem;
      }
      
      .invariant-item .toggle {
        width: 42px;
        height: 26px;
      }
      
      .invariant-item .toggle::after {
        width: 20px;
        height: 20px;
      }
      
      .invariant-item.checked .toggle::after {
        left: 19px;
      }
      
      .invariant-item .label {
        font-size: 0.85rem;
      }
      
      .gate-result {
        padding: 1.2rem;
        font-size: 0.9rem;
      }
      
      /* Lab mobile small */
      .disclaimer-prompt {
        width: calc(100% - 1.5rem);
        max-width: 100%;
        padding: 1.2rem;
        border-radius: 18px;
        margin: 0;
      }
      
      .disclaimer-header .lab-icon {
        font-size: 1.4rem;
        margin-bottom: 0.8rem;
      }
      
      .disclaimer-header h2 {
        font-size: 1.15rem;
      }
      
      .disclaimer-header p {
        font-size: 0.85rem;
      }
      
      .disclaimer-scroll {
        height: 200px;
        border-radius: 12px;
      }
      
      .disclaimer-content {
        padding: 1rem;
        font-size: 0.7rem;
        line-height: 1.65;
      }
      
      .disclaimer-content h3 {
        font-size: 0.8rem;
      }
      
      .disclaimer-content h4 {
        font-size: 0.75rem;
        margin: 1.2rem 0 0.6rem;
      }
      
      .accept-checkbox-wrapper label {
        font-size: 0.75rem;
        line-height: 1.4;
      }
      
      #accept-btn {
        font-size: 0.85rem;
        padding: 0.9rem;
      }
      
      .lab-header {
        flex-direction: column;
        gap: 0.8rem;
        padding: 1rem;
      }
      
      .lab-status {
        font-size: 0.8rem;
      }
      
      .lab-intro {
        font-size: 0.9rem;
      }
      
      /* Apple cards mobile */
      .apple-card {
        padding: 1.2rem;
        margin-bottom: 0.8rem;
        border-radius: 16px;
      }
      
      .step-indicator {
        width: 22px;
        height: 22px;
        font-size: 0.75rem;
        top: -10px;
        left: 16px;
      }
      
      .apple-card .section-header h3 {
        font-size: 1rem;
      }
      
      .apple-card .section-subtitle {
        font-size: 0.85rem;
      }
      
      .domain-selector {
        padding: 0.9rem 1rem;
        font-size: 0.9rem;
      }
      
      .user-input {
        min-height: 120px;
        font-size: 0.9rem;
        padding: 1rem;
      }
      
      .apple-btn {
        padding: 1rem 1.5rem;
        font-size: 1rem;
      }
      
      /* Constraint builder mobile */
      .constraint-input {
        padding: 0.9rem 1rem;
        font-size: 0.9rem;
      }
      
      .add-constraint-btn {
        width: 48px;
        height: 48px;
        font-size: 1.5rem;
      }
      
      .constraint-item {
        padding: 0.7rem 0.9rem;
      }
      
      .constraint-suggestions {
        flex-wrap: wrap;
      }
      
      .suggestion-chip {
        font-size: 0.75rem;
        padding: 0.35rem 0.7rem;
      }
      
      /* Report cards mobile */
      .plain-english-summary {
        padding: 1rem;
      }
      
      .plain-english-summary .status-emoji {
        font-size: 2.5rem;
      }
      
      .plain-english-summary .big-takeaway {
        font-size: 1.2rem;
      }
      
      .plain-english-summary .takeaway-detail {
        font-size: 0.9rem;
      }
      
      .geometry-summary {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .geometry-item {
        padding: 1rem 0.8rem;
      }
      
      .geometry-symbol {
        font-size: 1.1rem;
      }
      
      .details-toggle {
        font-size: 0.85rem;
        padding: 0.8rem;
      }
      
      .continuation-item {
        padding: 1rem;
      }
      
      .metrics-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.5rem;
      }
      
      .metric-card {
        padding: 0.9rem 0.6rem;
        border-radius: 12px;
      }
      
      .metric-label {
        font-size: 0.65rem;
      }
      
      .metric-value {
        font-size: 1.2rem;
      }
      
      .metric-unit {
        font-size: 0.6rem;
      }
      
      #grid-canvas {
        height: 200px;
        border-radius: 12px;
      }
      
      .lab-btn {
        padding: 0.8rem 1.4rem;
        font-size: 0.9rem;
        border-radius: 10px;
      }
      
      .lab-btn.small {
        padding: 0.6rem 1rem;
        font-size: 0.8rem;
      }
      
      .concept-card {
        padding: 1.2rem;
        border-radius: 12px;
      }
      
      .failure-card,
      .failure-item {
        padding: 1rem 1.2rem;
        border-radius: 10px;
      }
    }
    
    /* Very small screens (max 374px) */
    @media (max-width: 374px) {
      .nav-vertices {
        gap: 0.6rem;
      }
      
      .vertex-label {
        font-size: 0.6rem;
      }
      
      .nav-vertex.nav-logo .vertex-label {
        width: 1.6rem;
        height: 1.6rem;
        font-size: 0.7rem;
      }
      
      .metrics-grid {
        grid-template-columns: 1fr 1fr;
      }
      
      .metric-card {
        padding: 0.8rem 0.5rem;
      }
      
      .metric-value {
        font-size: 1rem;
      }
    }
    
    /* Touch device optimizations */
    @media (hover: none) and (pointer: coarse) {
      .cta-button:hover,
      .social-link:hover,
      .domain-pill:hover,
      .lab-btn:hover {
        transform: none;
      }
      
      .cta-button:active,
      .social-link:active,
      .domain-pill:active,
      .lab-btn:active {
        transform: scale(0.98);
      }
      
      /* Larger touch targets */
      .domain-pill {
        min-height: 44px;
        display: flex;
        align-items: center;
      }
      
      .invariant-item {
        min-height: 48px;
      }
    }
    
    /* Reduced motion preference */
    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
    
    /* High contrast mode support */
    @media (prefers-contrast: high) {
      :root {
        --gray: #888;
        --gray-light: #aaa;
      }
      
      .form-group input,
      .form-group textarea,
      .nl-input-section textarea {
        border: 1px solid var(--gray);
      }
    }
    
    /* Dark mode is default, but ensure consistency */
    @media (prefers-color-scheme: light) {
      /* Site is dark-themed, maintain dark even in light mode preference */
    }
    
    /* Landscape orientation adjustments for mobile */
    @media (max-height: 500px) and (orientation: landscape) {
      .lab-gate {
        min-height: auto;
        padding: 1rem;
        padding-top: 1rem;
        align-items: flex-start;
      }
      
      .disclaimer-prompt {
        width: calc(100% - 2rem);
        max-width: 100%;
        padding: 1rem;
        margin: 0;
      }
      
      .disclaimer-scroll {
        height: 150px;
      }
      
      .disclaimer-header {
        margin-bottom: 0.8rem;
      }
      
      .disclaimer-header .lab-icon {
        margin-bottom: 0.5rem;
        font-size: 1.2rem;
      }
      
      .disclaimer-header h2 {
        font-size: 1.1rem;
        margin-bottom: 0.3rem;
      }
      
      .disclaimer-header p {
        margin-bottom: 1rem;
        font-size: 0.85rem;
      }
      
      .accept-checkbox-wrapper {
        margin-bottom: 0.8rem;
      }
    }
    
    /* Safe area insets for notched devices */
    @supports (padding: max(0px)) {
      #nav {
        padding-left: max(1.2rem, env(safe-area-inset-left));
        padding-right: max(1.2rem, env(safe-area-inset-right));
      }
      
      .page-content {
        padding-left: max(5vw, env(safe-area-inset-left));
        padding-right: max(5vw, env(safe-area-inset-right));
      }
    }
    
    /* ============ INTERACTIVE FORMULA VISUALIZATION ============ */
    .formula-explorer {
      margin: 0.8rem 0;
      padding: 1rem;
      background: rgba(255, 103, 0, 0.04);
      border-radius: 12px;
      border: 1px solid rgba(255, 103, 0, 0.1);
    }
    
    .formula-explorer-title {
      text-align: center;
      margin-bottom: 0.2rem;
    }
    
    .formula-explorer-title h3 {
      color: var(--orange);
      font-size: 0.7rem;
      font-weight: 600;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      margin: 0;
    }
    
    .formula-explorer-subtitle {
      text-align: center;
      color: var(--gray);
      font-size: 0.75rem;
      margin-bottom: 0.8rem;
    }
    
    .formula-display {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      gap: 0.25rem;
      font-family: var(--font-mono);
      font-size: clamp(0.8rem, 2vw, 1rem);
      color: var(--gray-bright);
      margin-bottom: 0.6rem;
      line-height: 1.6;
    }
    
    .formula-var {
      padding: 0.15rem 0.4rem;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.5s ease-in-out;
      position: relative;
    }
    
    .formula-var:hover {
      transform: scale(1.1);
    }
    
    .formula-var.active {
      transform: scale(1.15);
      box-shadow: 0 0 20px currentColor;
    }
    
    .formula-var.var-F,
    .formula-var.var-dF,
    .formula-var.var-margin,
    .formula-var.var-C,
    .formula-var.var-Pi,
    .formula-var.var-fail { color: var(--orange); background: rgba(255, 103, 0, 0.15); }
    
    .formula-static {
      color: var(--gray-lighter);
    }
    
    .formula-panel {
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transition: all 0.8s var(--ease-out-expo);
      margin-top: 0;
    }
    
    .formula-panel.open {
      max-height: 500px;
      opacity: 1;
      margin-top: 1rem;
    }
    
    .formula-panel-inner {
      background: rgba(0, 0, 0, 0.4);
      border-radius: 12px;
      overflow: hidden;
    }
    
    .panel-nav {
      display: flex;
      gap: 0;
      padding: 3px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px 10px 0 0;
    }
    
    .panel-nav-item {
      flex: 1;
      padding: 0.5rem 0.6rem;
      background: transparent;
      border: none;
      border-radius: 6px;
      color: var(--gray-lighter);
      font-family: var(--font-display);
      font-size: 0.7rem;
      cursor: pointer;
      transition: all 0.5s ease-in-out;
      text-align: center;
    }
    
    .panel-nav-item:hover {
      color: var(--white);
      background: rgba(255, 255, 255, 0.05);
    }
    
    .panel-nav-item.active {
      background: rgba(255, 103, 0, 0.2);
      color: var(--orange);
    }
    
    .panel-content {
      padding: 1rem;
      min-height: 150px;
    }
    
    .panel-domain {
      display: none;
      animation: panelFadeIn 0.7s ease-out;
    }
    
    .panel-domain.active {
      display: block;
    }
    
    @keyframes panelFadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .panel-domain-header {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      margin-bottom: 0.6rem;
    }
    
    .panel-domain-icon {
      font-size: 1.2rem;
      color: var(--orange);
      font-family: var(--font-mono);
      width: 1.3rem;
      text-align: center;
    }
    
    .panel-domain-title {
      font-size: 0.95rem;
      font-weight: 500;
      color: var(--white);
    }
    
    .panel-var-name {
      font-family: var(--font-mono);
      font-size: 0.85rem;
      padding: 0.3rem 0.6rem;
      border-radius: 6px;
      display: inline-block;
      margin-bottom: 0.6rem;
    }
    
    .panel-var-name.var-F,
    .panel-var-name.var-dF,
    .panel-var-name.var-margin,
    .panel-var-name.var-C,
    .panel-var-name.var-Pi { color: var(--orange); background: rgba(255, 103, 0, 0.15); }
    
    .panel-interpretation {
      color: var(--gray-pale);
      font-size: 0.9rem;
      line-height: 1.6;
      margin-bottom: 0.8rem;
    }
    
    .panel-question {
      background: rgba(255, 103, 0, 0.08);
      border-left: 3px solid var(--orange);
      padding: 0.7rem 1rem;
      border-radius: 0 8px 8px 0;
    }
    
    .panel-question-label {
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--orange);
      margin-bottom: 0.3rem;
    }
    
    .panel-question-text {
      color: var(--white);
      font-size: 0.85rem;
      font-style: italic;
    }
    
    .panel-failure-item {
      margin-bottom: 0.6rem;
      padding: 0.6rem 0.8rem;
      background: rgba(255, 103, 0, 0.05);
      border-radius: 6px;
    }
    
    .panel-failure-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--orange);
      margin-bottom: 0.3rem;
      font-weight: 500;
    }
    
    .panel-failure-text {
      color: var(--gray-pale);
      font-size: 0.85rem;
      line-height: 1.5;
    }
    
    .panel-var-name.var-fail { 
      color: var(--orange); 
      background: rgba(255, 103, 0, 0.15); 
    }
    
    /* Collapsible Technical Details */
    .tech-details-toggle {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 0;
      background: none;
      border: none;
      cursor: pointer;
      transition: color 0.3s ease;
      margin: 1rem 0 0;
      font-family: var(--font-display);
      color: var(--gray-light);
      font-size: 0.9rem;
      font-style: italic;
    }
    
    .tech-details-toggle:hover {
      color: var(--orange);
    }
    
    .tech-details-toggle.open {
      color: var(--orange);
    }
    
    .tech-details-toggle .chevron {
      font-size: 0.85rem;
      font-style: normal;
      font-weight: 300;
      transition: transform 0.4s ease;
      opacity: 0.5;
    }
    
    .tech-details-toggle:hover .chevron {
      opacity: 1;
    }
    
    .tech-details-toggle.open .chevron {
      transform: rotate(90deg);
      opacity: 1;
    }
    
    .tech-details-content {
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transition: all 0.8s var(--ease-out-expo);
    }
    
    .tech-details-content.open {
      max-height: 2000px;
      opacity: 1;
      margin-top: 1rem;
    }
    
    .tech-details-content section {
      margin: 0 0 1.5rem;
      padding: 0;
      border-top: none;
    }
    
    .tech-details-content section:last-child {
      margin-bottom: 0;
    }
    
    .formula-disclaimer {
      text-align: center;
      margin-top: 1rem;
      padding: 0;
    }
    
    .formula-disclaimer p {
      font-size: 0.7rem;
      color: rgba(255, 255, 255, 0.12);
      margin: 0;
      line-height: 1.5;
      font-style: italic;
    }
    
    .panel-ai-mapped {
      font-family: var(--font-mono);
      font-size: 0.55rem;
      color: rgba(255, 255, 255, 0.2);
      text-align: center;
      letter-spacing: 0.15em;
      margin-top: 1rem;
      padding-top: 0.5rem;
      border-top: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    .formula-disclaimer a {
      color: var(--gray);
      text-decoration: underline;
    }
    
    @media (max-width: 767px) {
      .formula-explorer {
        padding: 1.5rem 1rem;
        margin: 2rem -1rem;
        border-radius: 0;
      }
      
      .formula-display {
        font-size: 0.85rem;
        gap: 0.2rem;
      }
      
      .formula-var {
        padding: 0.25rem 0.4rem;
      }
      
      .panel-nav-item {
        font-size: 0.65rem;
        padding: 0.5rem 0.3rem;
      }
      
      .panel-content {
        padding: 1rem;
      }
    }
    
    /* ============ HARDWARE/SOFTWARE PAGES (TEAL THEME) ============ */
    
    /* Applications Splash Page */
    #applications-splash {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 100;
      background: transparent;
      opacity: 0;
      pointer-events: none;
      transition: opacity 1.5s ease-in-out;
    }
    
    #applications-splash.visible {
      opacity: 1;
      pointer-events: auto;
    }
    
    .app-splash-logo {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: clamp(70px, 18vmin, 180px);
      height: auto;
      user-select: none;
      z-index: 101;
      cursor: pointer;
    }
    
    .app-splash-logo svg {
      width: 100%;
      height: auto;
      transform: scaleY(1.3);
      filter: drop-shadow(0 0 40px rgba(0, 212, 170, 0.4)) drop-shadow(0 0 80px rgba(0, 212, 170, 0.2));
      transition: filter 0.4s ease;
    }
    
    .app-splash-logo:hover svg {
      filter: drop-shadow(0 0 30px rgba(0, 212, 170, 0.7)) drop-shadow(0 0 60px rgba(0, 212, 170, 0.5)) drop-shadow(0 0 100px rgba(0, 212, 170, 0.3));
    }
    
    .app-splash-ring-static {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: clamp(85px, 22vmin, 220px);
      height: clamp(85px, 22vmin, 220px);
      border: none; /* No visible ring */
      border-radius: 50%;
      pointer-events: none;
      box-sizing: border-box;
      z-index: 100;
    }
    
    #applications-splash.visible ~ .app-splash-ring-static {
      animation: staticRingPulseTeal 8s ease-in-out infinite;
    }
    
    /* Pulse glow only - no visible ring */
    @keyframes staticRingPulseTeal {
      0% {
        box-shadow: none;
      }
      12% {
        box-shadow: 0 0 20px rgba(0, 212, 170, 0.3), inset 0 0 15px rgba(0, 212, 170, 0.15);
      }
      25% {
        box-shadow: none;
      }
      50% {
        box-shadow: none;
      }
      62% {
        box-shadow: 0 0 20px rgba(0, 212, 170, 0.3), inset 0 0 15px rgba(0, 212, 170, 0.15);
      }
      75% {
        box-shadow: none;
      }
      100% {
        box-shadow: none;
      }
    }
    
    .app-splash-ring-static::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      transform: translate(-50%, -50%) scale(0);
      background: radial-gradient(circle at 40% 35%, rgba(0, 212, 170, 0.13) 0%, transparent 50%),
                  radial-gradient(circle at 65% 60%, rgba(0, 212, 170, 0.10) 0%, transparent 45%),
                  radial-gradient(circle at 35% 70%, rgba(0, 212, 170, 0.09) 0%, transparent 40%),
                  radial-gradient(circle at 60% 30%, rgba(0, 212, 170, 0.07) 0%, transparent 35%),
                  radial-gradient(circle at 50% 50%, rgba(0, 212, 170, 0.05) 0%, transparent 70%);
      opacity: 0;
      pointer-events: none;
    }
    
    @keyframes staticRingFillThenUnfillTeal {
      0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
      }
      25% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
      26% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
        filter: grayscale(0%);
      }
      30% {
        filter: grayscale(100%);
      }
      100% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
        filter: grayscale(100%);
      }
    }
    
    @keyframes staticRingGlowFillThenUnfillTeal {
      0% {
        box-shadow: 0 0 5px rgba(0, 212, 170, 0.04), inset 0 0 5px rgba(0, 212, 170, 0.02);
      }
      25% {
        box-shadow: 0 0 25px rgba(0, 212, 170, 0.13), inset 0 0 20px rgba(0, 212, 170, 0.09);
      }
      30% {
        box-shadow: 0 0 25px rgba(100, 100, 100, 0.13), inset 0 0 20px rgba(100, 100, 100, 0.09);
      }
      100% {
        box-shadow: none;
        opacity: 0;
      }
    }
    
    .app-splash-ring-static.transitioning {
      opacity: 1;
      animation: staticRingGlowFillThenUnfillTeal 8s ease-in-out forwards !important;
    }
    
    .app-splash-ring-static.transitioning::before {
      animation: staticRingFillThenUnfillTeal 8s ease-in-out forwards;
    }
    
    .app-splash-below {
      position: fixed;
      top: calc(50% + clamp(60px, 14vmin, 130px));
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      z-index: 101;
    }
    
    .app-splash-subtitle {
      font-family: var(--font-mono);
      font-size: 0.7rem;
      color: rgba(0, 212, 170, 0.25);
      text-transform: uppercase;
      letter-spacing: 0.3em;
    }
    
    /* Teal rings animation for applications splash */
    .app-splash-ring {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      border-radius: 50%;
      pointer-events: none;
      box-sizing: border-box;
      display: none;
      opacity: 0;
    }
    
    .app-splash-ring-1 {
      width: clamp(180px, 45vmin, 450px);
      height: clamp(180px, 45vmin, 450px);
      border: 1.5px solid rgba(0, 212, 170, 0.5);
      z-index: 99;
      animation: tealRingCascade 12s ease-in-out infinite;
    }
    
    .app-splash-ring-2 {
      width: clamp(180px, 45vmin, 450px);
      height: clamp(180px, 45vmin, 450px);
      border: 1.25px solid rgba(0, 212, 170, 0.35);
      z-index: 98;
      animation: tealRingCascade 12s ease-in-out infinite 4s;
    }
    
    .app-splash-ring-3 {
      width: clamp(180px, 45vmin, 450px);
      height: clamp(180px, 45vmin, 450px);
      border: 1px solid rgba(0, 212, 170, 0.2);
      z-index: 97;
      animation: tealRingCascade 12s ease-in-out infinite 8s;
    }
    
    @keyframes tealRingCascade {
      0% {
        transform: translate(-50%, -50%) scale(0.47);
        opacity: 0;
        box-shadow: 0 0 20px rgba(0, 212, 170, 0.3), inset 0 0 15px rgba(0, 212, 170, 0.15);
      }
      5% {
        opacity: 0.5;
        box-shadow: 0 0 20px rgba(0, 212, 170, 0.3), inset 0 0 15px rgba(0, 212, 170, 0.15);
      }
      50% {
        opacity: 0.4;
        box-shadow: 0 0 15px rgba(0, 212, 170, 0.25), inset 0 0 12px rgba(0, 212, 170, 0.12);
      }
      85% {
        opacity: 0.2;
        box-shadow: 0 0 10px rgba(0, 212, 170, 0.15), inset 0 0 8s rgba(0, 212, 170, 0.08);
      }
      100% {
        transform: translate(-50%, -50%) scale(1.5);
        opacity: 0;
        box-shadow: none;
      }
    }
    
    /* Doors overlay */
    #doors {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 2.5rem;
      z-index: 100;
      opacity: 0;
      pointer-events: none;
      transition: opacity 1.2s ease-in-out;
    }
    
    #doors.visible {
      opacity: 1;
      pointer-events: auto;
    }
    
    .doors-main {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4rem;
    }
    
    .door {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
      cursor: pointer;
      padding: 2rem;
      border: 1px solid rgba(0, 212, 170, 0.2);
      border-radius: 12px;
      background: rgba(0, 0, 0, 0.6);
      transition: all 0.4s ease;
      min-width: 180px;
    }
    
    .door:hover {
      border-color: var(--teal);
      background: rgba(0, 212, 170, 0.05);
      box-shadow: 0 10px 40px rgba(0, 212, 170, 0.15);
    }
    
    .door-icon {
      font-size: 2.5rem;
      color: var(--teal);
    }
    
    .door-label {
      font-family: var(--font-mono);
      font-size: 0.85rem;
      color: var(--gray-bright);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }
    
    .doors-demo-link {
      font-family: var(--font-mono);
      font-size: 0.7rem;
      color: var(--gray-light);
      text-decoration: none;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      padding: 0.5rem 1rem;
      border: 1px solid rgba(0, 212, 170, 0.15);
      border-radius: 6px;
      transition: all 0.3s ease;
    }
    
    .doors-demo-link:hover {
      color: var(--teal);
      border-color: var(--teal);
      background: rgba(0, 212, 170, 0.05);
    }
    
    /* Hardware/Software page sections */
    .hw-sw-page .page-content {
      max-width: 800px;
      margin: 0 auto;
      padding: 4rem 2rem 6rem;
    }
    
    .hw-sw-page .section {
      margin-bottom: 4rem;
      text-align: center;
    }
    
    .hw-sw-page .section-title {
      font-family: var(--font-mono);
      font-size: 0.7rem;
      color: var(--teal);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      margin-bottom: 1rem;
    }
    
    .hw-sw-page .section-body {
      font-size: 1.1rem;
      line-height: 1.9;
      color: var(--gray-bright);
      margin-bottom: 1rem;
      text-align: center;
    }
    
    .hw-sw-page .current-work {
      font-family: var(--font-mono);
      font-size: 0.8rem;
      color: var(--teal);
      font-style: italic;
    }
    
    .hw-sw-page .spec-line {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      color: var(--gray-pale);
      margin-bottom: 0.5rem;
    }
    
    /* Interactive visuals */
    .visual-container {
      width: 100%;
      max-width: 360px;
      height: 220px;
      position: relative;
      cursor: pointer;
      border: 1px solid rgba(0, 212, 170, 0.2);
      border-radius: 8px;
      overflow: visible;
      box-shadow: 0 0 15px rgba(0, 212, 170, 0.08);
      margin: 1.5rem auto;
    }
    
    .visual-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: opacity 0.6s ease;
    }
    
    .visual-layer svg {
      width: 100%;
      height: 100%;
    }
    
    .layer-abstract { opacity: 1; }
    .layer-concrete { opacity: 0; pointer-events: none; }
    .visual-container.revealed .layer-abstract { opacity: 1; }
    .visual-container.revealed .layer-concrete { opacity: 1; pointer-events: auto; }
    
    .visual-hint {
      position: absolute;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.65rem;
      color: var(--teal-dim);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      padding: 0.4rem 0.8rem;
      border-radius: 4px;
      border: 1px solid rgba(0, 212, 170, 0.2);
      animation: visualPulseGlow 2s ease-in-out infinite;
      z-index: 5;
    }
    
    .visual-hint span {
      display: inline-block;
      animation: visualLetterPulse 2s ease-in-out infinite;
    }
    
    .visual-hint span:nth-child(1) { animation-delay: 0s; }
    .visual-hint span:nth-child(2) { animation-delay: 0.1s; }
    .visual-hint span:nth-child(3) { animation-delay: 0.2s; }
    .visual-hint span:nth-child(4) { animation-delay: 0.3s; }
    .visual-hint span:nth-child(5) { animation-delay: 0.4s; }
    
    @keyframes visualLetterPulse {
      0%, 100% { opacity: 0.6; text-shadow: 0 0 5px rgba(0, 212, 170, 0.4); }
      50% { opacity: 1; text-shadow: 0 0 14px rgba(0, 212, 170, 0.9); }
    }
    
    @keyframes visualPulseGlow {
      0%, 100% { background: rgba(0, 212, 170, 0.02); box-shadow: 0 0 5px rgba(0, 212, 170, 0.035); }
      50% { background: rgba(0, 212, 170, 0.035); box-shadow: 0 0 8px rgba(0, 212, 170, 0.07); }
    }
    
    .visual-glow { filter: drop-shadow(0 0 8px rgba(0, 212, 170, 0.8)); }
    .visual-glow-orange { filter: drop-shadow(0 0 8px rgba(255, 103, 0, 0.8)); }
    
    #visual-tooltip {
      position: fixed;
      background: rgba(0, 0, 0, 0.95);
      color: var(--teal);
      font-family: var(--font-mono);
      font-size: 0.55rem;
      padding: 0.3rem 0.6rem;
      border-radius: 3px;
      border: 1px solid rgba(0, 212, 170, 0.3);
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.15s ease;
      z-index: 100;
      white-space: nowrap;
    }
    
    #visual-tooltip.visible { opacity: 1; }
    .hotspot { cursor: help; }
    
    /* Tech block */
    .hw-sw-page .tech-block {
      background: rgba(0, 212, 170, 0.04);
      border: 1px solid rgba(0, 212, 170, 0.1);
      border-radius: 8px;
      padding: 1.5rem;
      margin-top: 1rem;
    }
    
    .hw-sw-page .tech-block p {
      font-family: var(--font-mono);
      font-size: 0.85rem;
      color: var(--gray-pale);
      margin-bottom: 0.5rem;
    }
    
    .hw-sw-page .tech-block p:last-child { margin-bottom: 0; }
    .hw-sw-page .tech-block a { color: var(--teal); text-decoration: none; }
    .hw-sw-page .tech-block a:hover { text-decoration: underline; }
    
    /* Partnership section */
    .hw-sw-page .partnership-section {
      background: rgba(0, 212, 170, 0.06);
      border: 1px solid rgba(0, 212, 170, 0.2);
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
    }
    
    .hw-sw-page .partnership-section h3 {
      font-family: var(--font-display);
      font-size: 1.5rem;
      color: var(--teal);
      margin-bottom: 1rem;
    }
    
    .hw-sw-page .partnership-section p { color: var(--gray-pale); margin-bottom: 1.5rem; }
    
    .hw-sw-page .partnership-columns {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      text-align: center;
      margin-bottom: 1.5rem;
      justify-items: center;
    }
    
    .hw-sw-page .partnership-column h4 {
      font-family: var(--font-mono);
      font-size: 0.7rem;
      color: var(--teal);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 0.8rem;
    }
    
    .hw-sw-page .partnership-column ul { list-style: none; }
    .hw-sw-page .partnership-column li { font-size: 0.9rem; color: var(--gray-pale); padding: 0.3rem 0; }
    
    .hw-sw-page .contact-btn {
      display: inline-block;
      font-family: var(--font-mono);
      font-size: 0.85rem;
      color: var(--black);
      background: var(--teal);
      padding: 0.8rem 2rem;
      border-radius: 6px;
      text-decoration: none;
      transition: all 0.3s ease;
    }
    
    .hw-sw-page .contact-btn:hover { box-shadow: 0 8px 30px rgba(0, 212, 170, 0.3); }
    
    /* Back button */
    .hw-sw-page .back-btn,
    #lab-page .back-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-family: var(--font-mono);
      font-size: 0.75rem;
      color: var(--gray-lighter);
      text-decoration: none;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 3rem;
      padding: 0.5rem 1rem;
      border: 1px solid var(--gray-mid);
      border-radius: 6px;
      transition: all 0.3s ease;
      cursor: pointer;
      background: transparent;
    }
    
    .hw-sw-page .back-btn:hover,
    #lab-page .back-btn:hover { color: var(--teal); border-color: var(--teal); }
    
    /* Footer nav */
    .hw-sw-page .footer {
      margin-top: 4rem;
      padding-top: 2rem;
      border-top: 1px solid var(--gray-mid);
      text-align: center;
    }
    
    .hw-sw-page .footer-nav {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .hw-sw-page .footer-nav-btn {
      font-family: var(--font-mono);
      font-size: 0.8rem;
      color: var(--teal);
      text-decoration: none;
      padding: 0.6rem 1.5rem;
      border: 1px solid var(--teal);
      border-radius: 6px;
      transition: background 0.3s ease;
    }
    
    .hw-sw-page .footer-nav-btn:hover { background: rgba(0, 212, 170, 0.1); }
    
    .hw-sw-page .footer-links { margin-bottom: 0.5rem; }
    .hw-sw-page .footer-links a { color: var(--gray-light); text-decoration: none; font-size: 0.85rem; }
    .hw-sw-page .footer-links a:hover { color: var(--teal); }
    .hw-sw-page .footer-company { font-size: 0.75rem; color: var(--gray); }
    
    /* Research disclaimer */
    .research-disclaimer {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      text-align: center;
      padding: 6px 0;
      z-index: 50;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s ease;
    }
    
    .research-disclaimer.visible { opacity: 1; }
    .disclaimer-main { 
      font-family: var(--font-mono); 
      font-size: 0.55rem; 
      color: rgba(255, 255, 255, 0.15); 
      text-transform: uppercase; 
      letter-spacing: 0.2em; 
    }
    .disclaimer-sub { display: none; }
    
    /* Mobile for doors */
    @media (max-width: 600px) {
      .doors-main { flex-direction: column; gap: 2rem; }
      .door { min-width: 160px; padding: 1.5rem; }
    }
    
    /* Teal nav items */
    .nav-vertex.nav-teal .vertex-node {
      background: rgba(0, 212, 170, 0.3);
      border-color: rgba(0, 212, 170, 0.5);
    }
    
    .nav-vertex.nav-teal:hover .vertex-node {
      background: var(--teal);
      box-shadow: 0 0 10px var(--teal);
    }
    
    .nav-vertex.nav-teal.active .vertex-node {
      background: var(--teal);
      box-shadow: 0 0 12px var(--teal), 0 0 24px rgba(0, 212, 170, 0.4);
    }
    
    .nav-vertex.nav-teal:hover .vertex-label {
      color: var(--white);
    }
    
    .nav-vertex.nav-teal.active .vertex-label {
      color: var(--teal);
    }
  </style>
</head>
<body>
  <!-- Visual tooltip for hardware/software visuals -->
  <div id="visual-tooltip"></div>
  
  <!-- Transition overlay -->
  <div id="transition-overlay">
    <div id="transition-logo">Co<sup>3</sup></div>
  </div>
  
  <!-- Three.js background -->
  <div id="canvas-container"></div>
  
  <!-- Logo for splash -->
  <div id="logo-ring-outer"></div>
  <div id="logo-ring-mid"></div>
  <div id="logo-ring"></div>
  <div id="logo-ring-static"></div>
  <div id="logo-text">
    <svg viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="2" result="blur"/>
          <feMerge>
            <feMergeNode in="blur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
      </defs>
      <text x="50" y="42" text-anchor="middle" font-family="Cormorant Garamond, Georgia, serif" font-size="48" font-style="italic" font-weight="300" fill="#ff6700" filter="url(#glow)">Co<tspan font-size="18" baseline-shift="super" dy="-12">3</tspan></text>
    </svg>
  </div>
  <div id="logo-below">
    <div id="logo-subtitle">Re-discovering the method of the madness</div>
  </div>
  
  <!-- Applications Splash (Teal) -->
  <div class="app-splash-ring app-splash-ring-3"></div>
  <div class="app-splash-ring app-splash-ring-2"></div>
  <div class="app-splash-ring app-splash-ring-1"></div>
  <div id="applications-splash">
    <div class="app-splash-logo">
      <svg viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter id="glow-teal" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="2" result="blur"/>
            <feMerge>
              <feMergeNode in="blur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>
        <text x="50" y="42" text-anchor="middle" font-family="Cormorant Garamond, Georgia, serif" font-size="48" font-style="italic" font-weight="300" fill="#00d4aa" filter="url(#glow-teal)">Co<tspan font-size="18" baseline-shift="super" dy="-12">3</tspan></text>
      </svg>
    </div>
    <div class="app-splash-below">
      <div class="app-splash-subtitle">Applications</div>
    </div>
  </div>
  <div class="app-splash-ring-static"></div>
  
  <!-- Doors overlay (Hardware/Software) -->
  <div id="doors">
    <div class="doors-main">
      <div class="door" data-page="hardware">
        <div class="door-icon">◈</div>
        <div class="door-label">Hardware</div>
      </div>
      <div class="door" data-page="software">
        <div class="door-icon">λ</div>
        <div class="door-label">Software</div>
      </div>
    </div>
    <a href="#" class="doors-demo-link" data-page="lab">Try Demo</a>
  </div>
  
  <!-- Research disclaimer (hardware page only) -->
  <div id="research-disclaimer" class="research-disclaimer">
    <span class="disclaimer-main">RESEARCH STAGE · SPECCED NOT SHIPPED</span>
  </div>
  
  <!-- Lab Page -->
  <div id="lab-page" class="page">
    <div class="page-content">
      <button class="back-btn lab-back-btn" data-page="doors">← Back</button>
      <div class="lab-gate" id="lab-gate">
        <!-- Disclaimer -->
        <div class="disclaimer-prompt" id="disclaimer-prompt">
          <div class="disclaimer-header">
            <div class="lab-icon">◈</div>
            <h2>Terms of Access</h2>
            <p>Please review and accept the following terms to continue.</p>
          </div>
          
          <div class="disclaimer-scroll" id="disclaimer-scroll">
            <div class="disclaimer-content">
              <h3>PROTOTYPE ACCESS AGREEMENT AND DISCLAIMER</h3>
              <p class="disclaimer-date">Effective Date: January 2026</p>
              
              <p>This Prototype Access Agreement and Disclaimer ("Agreement") is entered into by and between CO3 ONE LLC, an Arizona limited liability company ("Company," "we," "us," or "our"), and the individual accessing this prototype environment ("User," "you," or "your").</p>
              
              <p><strong>BY ACCESSING THIS PROTOTYPE, YOU ACKNOWLEDGE THAT YOU HAVE READ, UNDERSTOOD, AND AGREE TO BE BOUND BY THIS AGREEMENT. IF YOU DO NOT AGREE TO THESE TERMS, DO NOT ACCESS OR USE THIS PROTOTYPE.</strong></p>
              
              <h4>1. EXPERIMENTAL NATURE OF PROTOTYPE</h4>
              <p>1.1. The software, tools, demonstrations, and materials accessible through this portal (collectively, the "Prototype") are experimental, developmental, and provided solely for testing, evaluation, and demonstration purposes.</p>
              <p>1.2. The Prototype is provided "AS IS" and "AS AVAILABLE" without any warranties of any kind, whether express, implied, statutory, or otherwise, including but not limited to warranties of merchantability, fitness for a particular purpose, title, non-infringement, accuracy, reliability, or availability.</p>
              <p>1.3. The Prototype may contain errors, bugs, defects, or inaccuracies. Outputs, calculations, analyses, recommendations, or other results generated by the Prototype should not be relied upon for any purpose and do not constitute professional, legal, financial, medical, or other advice.</p>
              
              <h4>2. NO CONFIDENTIALITY OF USER INPUTS</h4>
              <p><strong>2.1. IMPORTANT NOTICE: ANY AND ALL INFORMATION, DATA, TEXT, OR OTHER CONTENT YOU ENTER INTO, SUBMIT TO, OR TRANSMIT THROUGH THIS PROTOTYPE ("USER INPUTS") IS NOT CONFIDENTIAL AND SHALL NOT BE TREATED AS CONFIDENTIAL BY THE COMPANY.</strong></p>
              <p>2.2. By submitting User Inputs, you acknowledge and agree that: (a) User Inputs may be stored, logged, analyzed, reviewed, or retained by the Company without limitation; (b) User Inputs may be used by the Company for any purpose, including but not limited to improving, developing, or training systems and models; (c) you have no expectation of privacy or confidentiality with respect to User Inputs; (d) you shall not submit any information that you consider confidential, proprietary, sensitive, or private.</p>
              <p>2.3. You represent and warrant that you have all necessary rights to submit User Inputs and that such submission does not violate any third-party rights, confidentiality obligations, or applicable laws.</p>
              
              <h4>3. INTELLECTUAL PROPERTY</h4>
              <p>3.1. The Prototype, including but not limited to its underlying code, algorithms, methodologies, frameworks, theories, documentation, and user interface (collectively, "Company IP"), is the exclusive property of the Company and is protected by intellectual property laws, including patent-pending technologies.</p>
              <p>3.2. This Agreement grants you a limited, non-exclusive, non-transferable, revocable license to access and use the Prototype solely for personal, non-commercial evaluation purposes during your authorized session.</p>
              <p>3.3. You shall not: (a) copy, reproduce, modify, or create derivative works of the Prototype or Company IP; (b) reverse engineer, decompile, disassemble, or attempt to derive source code; (c) sublicense, sell, distribute, or transfer access to the Prototype; (d) use the Prototype for any commercial purpose; (e) remove or alter any proprietary notices or markings.</p>
              
              <h4>4. LIMITATION OF LIABILITY</h4>
              <p><strong>4.1. TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, IN NO EVENT SHALL THE COMPANY, ITS MANAGERS, MEMBERS, EMPLOYEES, AGENTS, AFFILIATES, SUCCESSORS, OR ASSIGNS BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, PUNITIVE, OR EXEMPLARY DAMAGES, INCLUDING BUT NOT LIMITED TO DAMAGES FOR LOSS OF PROFITS, GOODWILL, USE, DATA, OR OTHER INTANGIBLE LOSSES, ARISING OUT OF OR RELATING TO YOUR ACCESS TO OR USE OF (OR INABILITY TO ACCESS OR USE) THE PROTOTYPE.</strong></p>
              <p><strong>4.2. TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, THE COMPANY'S TOTAL AGGREGATE LIABILITY ARISING OUT OF OR RELATING TO THIS AGREEMENT OR THE PROTOTYPE SHALL NOT EXCEED ONE HUNDRED UNITED STATES DOLLARS ($100.00).</strong></p>
              <p>4.3. THE LIMITATIONS IN THIS SECTION SHALL APPLY REGARDLESS OF THE THEORY OF LIABILITY, WHETHER BASED ON WARRANTY, CONTRACT, STATUTE, TORT (INCLUDING NEGLIGENCE), STRICT LIABILITY, OR ANY OTHER LEGAL OR EQUITABLE THEORY, AND WHETHER OR NOT THE COMPANY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</p>
              
              <h4>5. INDEMNIFICATION</h4>
              <p>5.1. You agree to indemnify, defend, and hold harmless the Company and its managers, members, employees, agents, and affiliates from and against any and all claims, damages, losses, liabilities, costs, and expenses (including reasonable attorneys' fees) arising out of or relating to: (a) your access to or use of the Prototype; (b) your User Inputs; (c) your violation of this Agreement; (d) your violation of any rights of any third party.</p>
              
              <h4>6. ACCESS REVOCATION</h4>
              <p>6.1. Your access to the Prototype is granted at the sole discretion of the Company and may be revoked, suspended, or terminated at any time, for any reason or no reason, without notice or liability.</p>
              
              <h4>7. GOVERNING LAW AND DISPUTE RESOLUTION</h4>
              <p>7.1. This Agreement shall be governed by and construed in accordance with the laws of the State of Arizona, without regard to its conflict of laws principles.</p>
              <p>7.2. Any dispute arising out of or relating to this Agreement or the Prototype shall be resolved exclusively in the state or federal courts located in Maricopa County, Arizona, and you consent to the personal jurisdiction of such courts.</p>
              <p>7.3. You waive any right to participate in a class action lawsuit or class-wide arbitration against the Company.</p>
              
              <h4>8. MISCELLANEOUS</h4>
              <p>8.1. This Agreement constitutes the entire agreement between you and the Company regarding the Prototype and supersedes all prior agreements and understandings.</p>
              <p>8.2. If any provision of this Agreement is found to be unenforceable, the remaining provisions shall continue in full force and effect.</p>
              <p>8.3. The Company's failure to enforce any right or provision of this Agreement shall not constitute a waiver of such right or provision.</p>
              <p>8.4. This Agreement may be modified by the Company at any time. Continued access to the Prototype following any modification constitutes acceptance of the modified terms.</p>
              
              <div class="disclaimer-end-marker">
                <span>— End of Agreement —</span>
              </div>
            </div>
          </div>
          
          <div class="disclaimer-accept-section">
            <div class="accept-checkbox-wrapper">
              <div class="accept-checkbox" id="accept-checkbox">
                <span class="checkmark">✓</span>
              </div>
              <label>I have read, understand, and agree to be bound by the terms of this Agreement.</label>
            </div>
            <button id="accept-btn" class="lab-btn primary" disabled>
              <span id="accept-btn-text">Please scroll to read (10s)</span>
            </button>
          </div>
        </div>
      </div>
      
      <div class="lab-content" id="lab-content">
        
        <!-- ====== DEFAULT: 404 BOUNDARY FAILURE ====== -->
        <div class="demo-view demo-404" id="demo-404">
          <div class="dvd-container" id="dvd-container">
            <canvas id="noise-canvas"></canvas>
            <div class="dvd-logo" id="dvd-logo">
              <div class="dvd-text">
                <span class="dvd-boundary">∂ℱ</span>
                <span class="dvd-title">BOUNDARY</span>
                <span class="dvd-subtitle">FAILURE</span>
              </div>
            </div>
          </div>
          <button id="lab-logout" class="lab-btn secondary dvd-exit-btn">
            <span>Exit</span>
          </button>
        </div>

        <!-- ====== ALIGNMENT PHASE TRANSITION DEMO ====== -->
        <div class="demo-view demo-alignment" id="demo-alignment" style="display: none;">
          <style>
            .demo-alignment {
              width: 100%;
              height: 100%;
              overflow: hidden;
            }
            .alignment-container {
              display: flex;
              flex-direction: column;
              height: 100vh;
              height: 100dvh;
              gap: 1px;
              background: #222;
              font-family: 'JetBrains Mono', 'SF Mono', monospace;
              font-size: 11px;
            }
            .alignment-header {
              background: #0a0a0a;
              padding: 5px 12px;
              display: flex;
              justify-content: space-between;
              align-items: center;
              border-bottom: 1px solid #222;
            }
            .alignment-header-title {
              font-size: 10px;
              text-transform: uppercase;
              letter-spacing: 0.1em;
              color: #888;
            }
            .alignment-header-title span { color: var(--orange); }
            .alignment-header-right {
              display: flex;
              align-items: center;
              gap: 12px;
            }
            .alignment-header-patent {
              font-size: 9px;
              color: #444;
            }
            .alignment-disclaimer {
              text-align: center;
              font-family: var(--font-mono);
              font-size: 10px;
              color: rgba(255, 103, 0, 0.5);
              padding: 8px 0;
              letter-spacing: 0.05em;
              background: #0a0a0a;
            }
            .alignment-top-row {
              display: flex;
              gap: 1px;
              background: #222;
            }
            .alignment-top-row .alignment-metrics {
              flex: 1;
              min-width: 0;
            }
            .alignment-top-row .alignment-controls {
              flex: 2;
              min-width: 0;
            }
            .alignment-phase {
              flex: 1;
              min-height: 0;
            }
            .alignment-diagrams {
              flex: 1;
              display: flex;
              gap: 1px;
              background: #222;
              min-height: 0;
            }
            .alignment-diagrams .alignment-panel {
              flex: 1;
              min-width: 0;
            }
            .alignment-exit {
              padding: 4px 10px;
              font-size: 9px;
            }
            .alignment-panel {
              background: #0a0a0a;
              padding: 6px;
              display: flex;
              flex-direction: column;
              min-height: 0;
            }
            .alignment-panel-title {
              font-size: 9px;
              text-transform: uppercase;
              letter-spacing: 0.08em;
              color: #555;
              margin-bottom: 4px;
            }
            .alignment-canvas-wrap {
              flex: 1;
              position: relative;
              min-height: 0;
            }
            .alignment-canvas-wrap canvas {
              width: 100%;
              height: 100%;
              background: #000;
              border-radius: 3px;
            }
            .alignment-metrics {
              display: flex;
              flex-direction: column;
              gap: 4px;
              overflow-y: auto;
            }
            .alignment-metric-group {
              background: #000;
              border-radius: 3px;
              padding: 4px 6px;
            }
            .alignment-metric-row {
              display: flex;
              justify-content: space-between;
              align-items: center;
              padding: 2px 0;
              border-bottom: 1px solid #1a1a1a;
            }
            .alignment-metric-row:last-child { border-bottom: none; }
            .alignment-metric-label {
              font-size: 9px;
              color: #555;
            }
            .alignment-metric-value {
              font-size: 11px;
              color: var(--orange);
              font-weight: 500;
            }
            .alignment-sparkline {
              height: 60px;
              background: #0a0a0a;
              padding: 6px;
            }
            .alignment-sparkline canvas {
              width: 100%;
              height: 100%;
              background: #000;
              border-radius: 3px;
            }
            .alignment-status {
              display: flex;
              justify-content: space-between;
              align-items: center;
              padding: 4px 6px;
              background: #000;
              border-radius: 3px;
            }
            .alignment-status-label {
              font-size: 8px;
              color: #555;
              text-transform: uppercase;
            }
            .alignment-status-value {
              font-size: 10px;
              font-weight: 600;
              padding: 2px 6px;
              border-radius: 3px;
            }
            .alignment-status-value.stable { background: rgba(59, 255, 111, 0.15); color: #3bff6f; }
            .alignment-status-value.warning { background: rgba(255, 170, 0, 0.15); color: #ffaa00; }
            .alignment-status-value.critical { background: rgba(255, 59, 59, 0.15); color: #ff3b3b; }
            .alignment-status-value.failed { background: rgba(255, 59, 59, 0.3); color: #ff3b3b; }
            .alignment-equations {
              font-size: 8px;
              color: #444;
              padding: 4px;
              background: #000;
              border-radius: 3px;
              line-height: 1.3;
            }
            .alignment-equations .eq { color: var(--orange); }
            .alignment-controls {
              background: #0a0a0a;
              padding: 6px 10px;
              display: flex;
              align-items: center;
              gap: 12px;
              border-top: 1px solid #222;
              flex-wrap: wrap;
            }
            .alignment-control-group {
              flex: 1;
              min-width: 120px;
              max-width: 180px;
            }
            .alignment-control-label {
              font-size: 8px;
              color: #666;
              margin-bottom: 2px;
              display: flex;
              justify-content: space-between;
            }
            .alignment-control-label span { color: var(--orange); font-weight: 500; }
            .alignment-control-sublabel { display: none; }
            .alignment-container input[type="range"] {
              -webkit-appearance: none;
              width: 100%;
              height: 3px;
              background: #222;
              border-radius: 2px;
              outline: none;
            }
            .alignment-container input[type="range"]::-webkit-slider-thumb {
              -webkit-appearance: none;
              width: 10px;
              height: 10px;
              background: var(--orange);
              border-radius: 50%;
              cursor: pointer;
            }
            .alignment-btn-group {
              display: flex;
              gap: 4px;
            }
            .alignment-btn {
              padding: 5px 10px;
              background: #222;
              border: 1px solid #444;
              color: #888;
              font-family: 'JetBrains Mono', monospace;
              font-size: 9px;
              cursor: pointer;
              border-radius: 3px;
              transition: all 0.15s;
            }
            .alignment-btn:hover {
              background: #444;
              color: #eee;
            }
            .alignment-btn.primary {
              background: var(--orange);
              border-color: var(--orange);
              color: #000;
            }
            .alignment-btn.primary:hover { background: #ff8533; }
            .alignment-btn.active {
              background: rgba(255, 103, 0, 0.15);
              border-color: var(--orange);
              color: var(--orange);
            }
            .alignment-step-counter {
              font-size: 9px;
              color: #555;
            }
            .alignment-legend {
              display: flex;
              gap: 8px;
              font-size: 8px;
              color: #555;
              margin-top: 3px;
            }
            .alignment-legend-item {
              display: flex;
              align-items: center;
              gap: 3px;
            }
            .alignment-legend-dot {
              width: 5px;
              height: 5px;
              border-radius: 50%;
            }
            .alignment-legend-dot.current { background: var(--orange); box-shadow: 0 0 4px var(--orange); }
            .alignment-legend-dot.trajectory { background: #666; }
            .alignment-legend-dot.boundary { background: #ff3b3b; }
            .alignment-legend-dot.safe { background: rgba(59, 255, 111, 0.3); }
            
            /* Tablet: narrower metrics column */
            @media (max-width: 1100px) {
              .alignment-container {
                grid-template-columns: 1fr 1fr 160px;
              }
            }
            
            /* Mobile landscape / small tablet */
            @media (max-width: 900px) {
              .alignment-container {
                grid-template-columns: 1fr 1fr;
                grid-template-rows: auto 1fr auto auto;
              }
              .alignment-panel.alignment-metrics {
                grid-column: 1 / -1;
                flex-direction: row;
                gap: 4px;
                padding: 4px 6px;
                overflow-x: auto;
              }
              .alignment-metric-group {
                flex: 0 0 auto;
                min-width: 80px;
              }
              .alignment-sparkline { 
                flex: 1 1 auto;
                min-width: 100px;
                height: 32px;
              }
              .alignment-equations { display: none; }
              .alignment-status { flex: 0 0 auto; min-width: 90px; }
              .alignment-header-patent { display: none; }
            }
            
            /* Mobile portrait */
            @media (max-width: 600px) {
              .alignment-container {
                grid-template-columns: 1fr 1fr;
                grid-template-rows: auto minmax(120px, 1fr) auto auto auto auto;
                gap: 1px;
              }
              .alignment-header {
                grid-column: 1 / -1;
              }
              /* Side by side panels at top */
              .alignment-panel {
                padding: 4px;
              }
              .alignment-panel:not(.alignment-metrics) {
                min-height: 120px;
              }
              .alignment-panel-title {
                font-size: 7px;
                margin-bottom: 2px;
              }
              .alignment-legend {
                font-size: 6px;
                gap: 4px;
                margin-top: 2px;
              }
              .alignment-legend-dot {
                width: 4px;
                height: 4px;
              }
              /* Sparkline full width - SHOW on mobile */
              .alignment-sparkline {
                display: block;
                grid-column: 1 / -1;
                width: 100%;
                height: 44px;
                min-width: unset;
                background: #0a0a0a;
                border-radius: 0;
                padding: 4px;
              }
              /* Metrics section */
              .alignment-panel.alignment-metrics {
                grid-column: 1 / -1;
                flex-direction: row;
                flex-wrap: wrap;
                gap: 4px;
                padding: 6px;
                overflow-x: visible;
              }
              .alignment-metric-group {
                flex: 1 1 45%;
                min-width: unset;
              }
              .alignment-status {
                flex: 1 1 100%;
                min-width: unset;
                order: 10;
              }
              /* Controls */
              .alignment-controls {
                grid-column: 1 / -1;
                padding: 5px 8px;
                gap: 6px;
              }
              .alignment-control-group {
                min-width: 100%;
              }
              .alignment-btn-group {
                width: 100%;
                justify-content: center;
              }
              .alignment-step-counter {
                width: 100%;
                text-align: center;
              }
              /* Larger touch targets for sliders on mobile */
              .alignment-container input[type="range"] {
                height: 6px;
              }
              .alignment-container input[type="range"]::-webkit-slider-thumb {
                width: 22px;
                height: 22px;
              }
              .alignment-container input[type="range"]::-moz-range-thumb {
                width: 22px;
                height: 22px;
                background: var(--orange);
                border-radius: 50%;
                border: none;
                cursor: pointer;
              }
            }
          </style>

          <div class="alignment-container">
            <div class="alignment-header">
              <div class="alignment-header-title"><span>RCOT</span> Alignment Phase Transition</div>
              <div class="alignment-header-right">
                <div class="alignment-header-patent">Patent Pending · US App. 19/448,772</div>
                <button id="lab-logout-alignment" class="alignment-btn alignment-exit">Exit</button>
              </div>
            </div>
            
            <div class="alignment-disclaimer">Illustrative toy model — not a validated prediction system</div>

            <!-- Top row: Metrics and Controls side by side -->
            <div class="alignment-top-row">
              <div class="alignment-panel alignment-metrics">
                <div class="alignment-panel-title">RCOT Metrics</div>
                <div class="alignment-metric-group">
                  <div class="alignment-metric-row">
                    <div class="alignment-metric-label">d(y, ∂𝔽)</div>
                    <div class="alignment-metric-value" id="alignment-metric-distance">0.847</div>
                  </div>
                  <div class="alignment-metric-row">
                    <div class="alignment-metric-label">C<sub>Δ</sub></div>
                    <div class="alignment-metric-value" id="alignment-metric-coherence">0.923</div>
                  </div>
                  <div class="alignment-metric-row">
                    <div class="alignment-metric-label">ĊC<sub>Δ</sub></div>
                    <div class="alignment-metric-value" id="alignment-metric-trend">+0.003</div>
                  </div>
                  <div class="alignment-metric-row">
                    <div class="alignment-metric-label">TTBC</div>
                    <div class="alignment-metric-value" id="alignment-metric-ttbc">∞</div>
                  </div>
                </div>
                <div class="alignment-status">
                  <div class="alignment-status-label">Prediction</div>
                  <div class="alignment-status-value stable" id="alignment-status-value">STABLE</div>
                </div>
              </div>

              <div class="alignment-controls">
                <div class="alignment-control-group">
                  <div class="alignment-control-label">Reward Misspecification (ε) <span id="alignment-epsilon-value">0.15</span></div>
                  <input type="range" id="alignment-epsilon-slider" min="0" max="100" value="15">
                </div>
                <div class="alignment-control-group">
                  <div class="alignment-control-label">Capability (log scale) <span id="alignment-capability-value">10<sup>9</sup></span></div>
                  <input type="range" id="alignment-capability-slider" min="6" max="15" value="9" step="0.1">
                </div>
                <div class="alignment-control-group">
                  <div class="alignment-control-label">KL Drift Rate (β) <span id="alignment-beta-value">0.20</span></div>
                  <input type="range" id="alignment-beta-slider" min="1" max="100" value="20">
                </div>
                <div class="alignment-btn-group">
                  <button class="alignment-btn primary" id="alignment-btn-run">▶ Run</button>
                  <button class="alignment-btn" id="alignment-btn-step">Step</button>
                  <button class="alignment-btn" id="alignment-btn-reset">↻ Reset</button>
                </div>
                <div class="alignment-step-counter">Step <span id="alignment-step-count">0</span></div>
              </div>
            </div>

            <!-- Sparkline row -->
            <div class="alignment-sparkline">
              <canvas id="alignment-sparkline-canvas"></canvas>
            </div>

            <!-- Diagrams row -->
            <div class="alignment-diagrams">
              <div class="alignment-panel">
                <div class="alignment-panel-title">State Space Trajectory</div>
                <div class="alignment-canvas-wrap">
                  <canvas id="alignment-state-canvas"></canvas>
                </div>
                <div class="alignment-legend">
                  <div class="alignment-legend-item"><div class="alignment-legend-dot current"></div>Current</div>
                  <div class="alignment-legend-item"><div class="alignment-legend-dot trajectory"></div>History</div>
                  <div class="alignment-legend-item"><div class="alignment-legend-dot boundary"></div>∂𝔽</div>
                </div>
              </div>
              
              <div class="alignment-panel">
                <div class="alignment-panel-title">Phase Diagram (ε, log C)</div>
                <div class="alignment-canvas-wrap">
                  <canvas id="alignment-phase-canvas"></canvas>
                </div>
                <div class="alignment-legend">
                  <div class="alignment-legend-item"><div class="alignment-legend-dot safe"></div>Aligned</div>
                  <div class="alignment-legend-item"><div class="alignment-legend-dot" style="background: #ffaa00;"></div>Transition</div>
                  <div class="alignment-legend-item"><div class="alignment-legend-dot" style="background: #ff3b3b;"></div>Failure</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        
      </div>
    </div>
  </div>
  
  <!-- Navigation with integrated corner logos -->
  <nav id="nav">
    <!-- Orange corner logo (top-left on orange theme) -->
    <a id="corner-logo" class="corner-logo" data-page="splash">
      <svg viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter id="glow-corner" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="2" result="blur"/>
            <feMerge>
              <feMergeNode in="blur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>
        <text x="50" y="42" text-anchor="middle" font-family="Cormorant Garamond, Georgia, serif" font-size="48" font-style="italic" font-weight="300" fill="#ff6700" filter="url(#glow-corner)">Co<tspan font-size="18" baseline-shift="super" dy="-12">3</tspan></text>
      </svg>
    </a>
    <!-- Teal corner logo (top-left on teal theme) -->
    <a id="corner-logo-teal" class="corner-logo-teal" data-page="splash">
      <svg viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter id="glow-corner-teal" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="2" result="blur"/>
            <feMerge>
              <feMergeNode in="blur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>
        <text x="50" y="42" text-anchor="middle" font-family="Cormorant Garamond, Georgia, serif" font-size="48" font-style="italic" font-weight="300" fill="#00d4aa" filter="url(#glow-corner-teal)">Co<tspan font-size="18" baseline-shift="super" dy="-12">3</tspan></text>
      </svg>
    </a>
    <div class="nav-toggle" id="nav-toggle">
      <div class="nav-toggle-icon">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
    <div class="nav-vertices">
      <a class="nav-vertex" data-page="about">
        <span class="vertex-node"></span>
        <span class="vertex-label">About</span>
      </a>
      <a class="nav-vertex" data-page="rcott">
        <span class="vertex-node"></span>
        <span class="vertex-label">Theory</span>
      </a>
      <a class="nav-vertex" data-page="patent">
        <span class="vertex-node"></span>
        <span class="vertex-label">Patent</span>
      </a>
      <a class="nav-vertex nav-teal" data-page="applications">
        <span class="vertex-node"></span>
        <span class="vertex-label">Applications</span>
      </a>
      <a class="nav-vertex" data-page="contact">
        <span class="vertex-node"></span>
        <span class="vertex-label">Contact</span>
      </a>
    </div>
  </nav>
  
  <!-- About Page -->
  <div id="about-page" class="page">
    <div class="page-content">
      <p class="landing-question">What if alignment drift were visible before evals caught it?</p>
      
      <p class="landing-intro">Co³ One develops formal methods for constraint-aware safety. We believe the difference between systems that stay aligned and systems that drift is geometric—and measurable—long before behavioral metrics register the change.</p>
      
      <div class="about-section">
        <div class="about-section-title">The Problem</div>
        <p>Constitutional AI defines what a system should not do. But constraints alone don't tell you how close you are to violating them. Current evaluation methods capture snapshots. Drift is continuous. By the time a boundary is crossed, the trajectory that led there is already behind you.</p>
      </div>
      
      <div class="about-section">
        <div class="about-section-title">The Method</div>
        <p>Our research identified a structure that governs persistence under constraint: the relationship between a system's current state, its distance from failure boundaries, and the coherence of its trajectory over time. We formalized this as Restraint Continuity Observation Translation—a framework for seeing where a trajectory is headed, not just where it is. The math is simple. The applications are not.</p>
      </div>
      
      <div class="about-section">
        <div class="about-section-title">The Evidence</div>
        <p>We did not build this framework for AI. It emerged from work across physical systems, biological regulation, infrastructure resilience, and institutional dynamics. The same geometry held. That it applies to alignment is a consequence, not a premise.</p>
      </div>
      
      <div class="about-section">
        <div class="about-section-title">The Artifact</div>
        <p>Full documentation and licensing available for aligned research partners.</p>
      </div>
      
      <div class="about-footer">
        <div class="about-footer-item about-footer-cta">
          <a href="#" data-page="rcott" class="discover-link">
            <span class="pulse-letter" style="--i:0">D</span><span class="pulse-letter" style="--i:1">I</span><span class="pulse-letter" style="--i:2">S</span><span class="pulse-letter" style="--i:3">C</span><span class="pulse-letter" style="--i:4">O</span><span class="pulse-letter" style="--i:5">V</span><span class="pulse-letter" style="--i:6">E</span><span class="pulse-letter" style="--i:7">R</span><span class="pulse-letter" style="--i:8">&nbsp;</span><span class="pulse-letter" style="--i:9">T</span><span class="pulse-letter" style="--i:10">H</span><span class="pulse-letter" style="--i:11">E</span><span class="pulse-letter" style="--i:12">&nbsp;</span><span class="pulse-letter" style="--i:13">T</span><span class="pulse-letter" style="--i:14">H</span><span class="pulse-letter" style="--i:15">E</span><span class="pulse-letter" style="--i:16">O</span><span class="pulse-letter" style="--i:17">R</span><span class="pulse-letter" style="--i:18">Y</span>
          </a>
        </div>
        <div class="about-footer-divider"></div>
        <div class="about-footer-item about-footer-cta">
          <a href="#" data-page="contact" class="discover-link">
            <span class="pulse-letter" style="--i:0">C</span><span class="pulse-letter" style="--i:1">O</span><span class="pulse-letter" style="--i:2">N</span><span class="pulse-letter" style="--i:3">T</span><span class="pulse-letter" style="--i:4">A</span><span class="pulse-letter" style="--i:5">C</span><span class="pulse-letter" style="--i:6">T</span><span class="pulse-letter" style="--i:7">&nbsp;</span><span class="pulse-letter" style="--i:8">C</span><span class="pulse-letter" style="--i:9">O</span><sup class="pulse-letter" style="--i:10">3</sup><span class="pulse-letter" style="--i:11">&nbsp;</span><span class="pulse-letter" style="--i:12">O</span><span class="pulse-letter" style="--i:13">N</span><span class="pulse-letter" style="--i:14">E</span>
          </a>
        </div>
      </div>
      
      <p class="patent-inline"><a href="#" data-page="patent">Constraint-based trajectory selection using TTBC — Patent Pending</a></p>
    </div>
  </div>
  
  <!-- Theory Page -->
  <div id="rcott-page" class="page">
    <div class="page-content">
      <h1>Restraint Continuity Observation Translation</h1>
      <p style="color: var(--gray-light); font-size: 0.9rem; max-width: 580px; margin-bottom: 0.8rem;">
        What happens next is whatever stays allowed, remains stable, and maintains distance from failure.
        Click any variable to see the same geometry across domains.
      </p>
      
      <section>
        <div class="formula-explorer">
          <div class="formula-explorer-title">
            <h3>Interactive Constraint Geometry</h3>
          </div>
          <div class="formula-explorer-subtitle">Click a colored variable to explore</div>
          
          <div class="formula-display">
            <span class="formula-static">argmax</span>
            <span class="formula-var var-margin" data-var="margin" title="Margin to failure">d(y, ∂𝔽)</span>
            <span class="formula-static">+</span>
            <span class="formula-static">λ·</span>
            <span class="formula-var var-C" data-var="C" title="Coherence">C<sub>Δ</sub></span>
            <span class="formula-static">+</span>
            <span class="formula-static">μ·</span>
            <span class="formula-var var-C" data-var="Cdot" title="Coherence trend">Ċ<sub>Δ</sub></span>
          </div>
          
          <div class="formula-display" style="margin-top: -0.5rem;">
            <span class="formula-static">y ∈</span>
            <span class="formula-var var-F" data-var="F" title="Feasible set">𝔽</span>
            <span class="formula-static">&nbsp;&nbsp;subject to:</span>
            <span class="formula-var var-Pi" data-var="Pi" title="Projection map">Π</span>
            <span class="formula-static">(y) ≈ observed</span>
          </div>
          
          <div class="formula-display" style="margin-top: 0.5rem;">
            <span class="formula-static">where</span>
            <span class="formula-var var-dF" data-var="dF" title="Failure boundary">∂𝔽</span>
            <span class="formula-static">=</span>
            <span class="formula-var var-fail" data-var="fail" title="What goes wrong">failure boundary</span>
          </div>
          
          <div class="formula-panel" id="formula-panel">
            <div class="formula-panel-inner">
              <div class="panel-nav" id="panel-nav">
                <button class="panel-nav-item active" data-domain="physics">Physics</button>
                <button class="panel-nav-item" data-domain="medicine">Medicine</button>
                <button class="panel-nav-item" data-domain="math">Math</button>
                <button class="panel-nav-item" data-domain="computing">Computing</button>
                <button class="panel-nav-item" data-domain="biology">Biology</button>
              </div>
              
              <div class="panel-content" id="panel-content">
                <!-- Content injected by JavaScript -->
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <button class="tech-details-toggle" id="tech-details-toggle">
        <span class="chevron">›</span>
        Technical Details
      </button>
      
      <div class="tech-details-content" id="tech-details-content">
        <section>
          <h2>Foundational Claim</h2>
          <p>
            Observed system behavior and its translations are governed by the persistence of 
            admissible continuations under accumulating restraints. What remains continuous 
            determines what can move and what can be consistently represented.
          </p>
        </section>
        
        <section>
          <h2>Mathematical Formulation</h2>
          
          <h3>Symbolic Key</h3>
          <div class="symbol-grid">
            <div class="symbol-item"><span class="sym">X</span><span class="def">state space</span></div>
            <div class="symbol-item"><span class="sym">x</span><span class="def">current state</span></div>
            <div class="symbol-item"><span class="sym">𝔽(t,x)</span><span class="def">feasible continuation set</span></div>
            <div class="symbol-item"><span class="sym">∂𝔽(t,x)</span><span class="def">feasibility boundary</span></div>
            <div class="symbol-item"><span class="sym">d(y,∂𝔽)</span><span class="def">margin to violation</span></div>
            <div class="symbol-item"><span class="sym">C<sub>Δ</sub>(t,y)</span><span class="def">coherence over window Δ</span></div>
            <div class="symbol-item"><span class="sym">Ċ<sub>Δ</sub>(t,y)</span><span class="def">coherence trend</span></div>
            <div class="symbol-item"><span class="sym">Π</span><span class="def">projection/translation map</span></div>
          </div>
          
          <h3>Trajectory Rule</h3>
          <div class="math-block">
            <span class="symbol">π</span><sub>t+Δt</sub>(x) = <span class="symbol">Π</span>(<br>
            &nbsp;&nbsp;<span class="symbol">argmin</span><sub>y ∈ 𝔽(t,x)</sub> [<br>
            &nbsp;&nbsp;&nbsp;&nbsp;d(y, ∂𝔽) − λ·C<sub>Δ</sub>(t,y) − μ·Ċ<sub>Δ</sub>(t,y)<br>
            &nbsp;&nbsp;]<br>
            )
          </div>
        </section>
        
        <section>
          <h2>Binary Invariants</h2>
          <p class="subtitle" style="margin-bottom: 1rem;">A 0–1 Pass / "Understood" Gating Framework</p>
          <div class="gating" style="margin-bottom: 1.5rem;">G := ∏<sub>m</sub> I<sub>m</sub> ∈ {0, 1}</div>
          <p style="color: var(--gray-light); margin-bottom: 1.5rem;">
            Validity is structural rather than interpretive. Each invariant is encoded as a binary 
            indicator I<sub>m</sub> ∈ {0,1}. Toggle to test the gate.
          </p>
          
          <div class="invariant-list">
            <div class="invariant-item checked" data-inv="1">
              <div class="toggle"></div>
              <div class="label">Sign coherence between prose and optimization direction</div>
            </div>
            <div class="invariant-item checked" data-inv="2">
              <div class="toggle"></div>
              <div class="label">Nonempty-domain requirements for infimum or argmin</div>
            </div>
            <div class="invariant-item checked" data-inv="3">
              <div class="toggle"></div>
              <div class="label">Explicit declaration and typing of the projection/translation map Π</div>
            </div>
            <div class="invariant-item checked" data-inv="4">
              <div class="toggle"></div>
              <div class="label">Sufficient definition of coherence functional C<sub>Δ</sub></div>
            </div>
            <div class="invariant-item checked" data-inv="5">
              <div class="toggle"></div>
              <div class="label">Stated convention for boundary edge cases involving ∂𝔽</div>
            </div>
          </div>
          
          <div class="gate-result pass" id="gate-result">
            G = 1 × 1 × 1 × 1 × 1 = <strong>1</strong> (PASS)
          </div>
        </section>
      </div>
    </div>
  </div>
  
  <!-- Patent Page -->
  <div id="patent-page" class="page">
    <div class="page-content patent-protected">
      <div class="patent-header">
        <div class="label">United States Patent Application</div>
        <h1>System and Method for Constraint-Aware Trajectory Optimization</h1>
        <div class="patent-meta">
          <div class="patent-meta-item">
            <div class="key">Application No.</div>
            <div class="value">19/448,772</div>
          </div>
          <div class="patent-meta-item">
            <div class="key">Filing Date</div>
            <div class="value">January 14, 2026</div>
          </div>
          <div class="patent-meta-item">
            <div class="key">Inventor</div>
            <div class="value">Ricardo Cruz Orozco</div>
          </div>
          <div class="patent-meta-item">
            <div class="key">Status</div>
            <div class="value">Patent Pending</div>
          </div>
        </div>
      </div>
      
      <div class="patent-notice">
        <span class="notice-icon">◈</span>
        <span>This document is provided for reference only. Content is protected.</span>
      </div>
      
      <div class="patent-section">
        <h2>Abstract</h2>
        <p class="patent-text">A computer-implemented method for selecting trajectories within constrained systems is disclosed. The method generates a finite set of candidate trajectories, predicts time-to-boundary-crossing values for each candidate relative to a failure boundary, and selects a trajectory by comparative ordering that maximizes a minimum temporal margin over a future evaluation horizon. The approach preserves continued system operability and is applicable across physical, computational, and organizational domains.</p>
      </div>
      
      <div class="patent-section">
        <h2>Background of the Invention</h2>
        <h3>Field of the Invention</h3>
        <p class="patent-text">[0003] The present invention relates to computational decision systems and, more particularly, to methods for selecting trajectories within constrained systems to preserve operability over time.</p>
        
        <h3>Description of Related Art</h3>
        <p class="patent-text">[0004] Existing trajectory planning and optimization techniques typically focus on minimizing cost or maximizing performance while satisfying constraints. Such methods may include model predictive control, safety filtering, and clearance-based planning. These approaches generally emphasize constraint satisfaction or spatial clearance and may not account for comparative temporal margins to system failure boundaries when selecting among multiple candidate trajectories. As a result, such systems may remain technically feasible while operating near failure boundaries with limited predictive robustness.</p>
      </div>
      
      <div class="patent-section">
        <h2>Summary of the Invention</h2>
        <p class="patent-text">[0005] The invention provides a computer-implemented method and system for selecting trajectories within constrained systems by generating a finite plurality of candidate trajectories, computing for each candidate a predicted time-to-boundary-crossing relative to a failure boundary, and selecting a trajectory by comparative ordering that maximizes a minimum predicted time-to-boundary-crossing over a future evaluation horizon to preserve operability.</p>
        <p class="patent-text">[0006] The selected trajectory may be output in a form usable by an external control, scheduling, or decision process to reduce risk of boundary violation over time.</p>
      </div>
      
      <div class="patent-section">
        <h2>Detailed Description of the Invention</h2>
        <p class="patent-text">[0012] The invention operates by identifying constraints that define a feasible region of operation for a system. These constraints may be physical, computational, logical, policy-based, or organizational in nature, and collectively define conditions under which continued system operability is preserved.</p>
        <p class="patent-text">[0013] Candidate trajectories are generated as discrete or continuous system evolutions computed from a current system state and constrained to remain initially within the feasible region. The set of candidate trajectories represents admissible future system behaviors for evaluation.</p>
        <p class="patent-text">[0014] For each candidate trajectory, a predicted time-to-boundary-crossing (TTBC) value is computed. The TTBC represents an estimated future time at which the candidate trajectory would intersect a failure boundary associated with loss of operability if the trajectory were continued.</p>
        <p class="patent-text">[0015] TTBC computation may be performed using forward simulation of system dynamics, interpolation between sampled trajectory states, or analytical evaluation of constraint functions over time. In discrete or stepwise systems, TTBC may be approximated by identifying the earliest timestep at which a constraint inequality defining the failure boundary is violated.</p>
        <p class="patent-text">[0016] The TTBC metric differs from time-to-collision methods in that it evaluates temporal margin relative to abstract or system-defined boundaries rather than physical object collisions, and is applicable to non-physical domains including computational and organizational systems.</p>
        <p class="patent-text">[0017] Candidate trajectories are comparatively ordered based on their TTBC values. In one embodiment, comparative ordering maximizes a minimum TTBC over a predefined evaluation horizon, thereby prioritizing trajectories that exhibit greater temporal robustness with respect to the failure boundary.</p>
        <p class="patent-text">[0018] The selected trajectory is output in a form usable by an external system or decision process, including control execution, scheduling, or governance action, thereby enabling operational decisions that reduce the likelihood of boundary violation over time.</p>
      </div>
      
      <div class="patent-section">
        <h2>Figures</h2>
        
        <div class="figure-full">
          <div class="figure-label">FIG. 1</div>
          <div class="figure-title">System Architecture</div>
          <svg class="patent-figure" viewBox="0 0 800 120" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#ff6700"/>
              </marker>
            </defs>
            <!-- Boxes -->
            <rect x="20" y="40" width="120" height="40" fill="none" stroke="#ff6700" stroke-width="1"/>
            <text x="80" y="57" text-anchor="middle" fill="#ccc" font-size="9" font-family="JetBrains Mono, monospace">Constraint</text>
            <text x="80" y="70" text-anchor="middle" fill="#ccc" font-size="9" font-family="JetBrains Mono, monospace">Identification</text>
            
            <rect x="180" y="40" width="120" height="40" fill="none" stroke="#ff6700" stroke-width="1"/>
            <text x="240" y="57" text-anchor="middle" fill="#ccc" font-size="9" font-family="JetBrains Mono, monospace">Trajectory</text>
            <text x="240" y="70" text-anchor="middle" fill="#ccc" font-size="9" font-family="JetBrains Mono, monospace">Computation</text>
            
            <rect x="340" y="40" width="120" height="40" fill="none" stroke="#ff6700" stroke-width="1"/>
            <text x="400" y="57" text-anchor="middle" fill="#ccc" font-size="9" font-family="JetBrains Mono, monospace">Boundary</text>
            <text x="400" y="70" text-anchor="middle" fill="#ccc" font-size="9" font-family="JetBrains Mono, monospace">Evaluation</text>
            
            <rect x="500" y="40" width="120" height="40" fill="none" stroke="#ff6700" stroke-width="1"/>
            <text x="560" y="57" text-anchor="middle" fill="#ccc" font-size="9" font-family="JetBrains Mono, monospace">Selection</text>
            <text x="560" y="70" text-anchor="middle" fill="#ccc" font-size="9" font-family="JetBrains Mono, monospace">Module</text>
            
            <rect x="660" y="40" width="120" height="40" fill="none" stroke="#ff6700" stroke-width="1"/>
            <text x="720" y="57" text-anchor="middle" fill="#ccc" font-size="9" font-family="JetBrains Mono, monospace">Output</text>
            <text x="720" y="70" text-anchor="middle" fill="#ccc" font-size="9" font-family="JetBrains Mono, monospace">Translation</text>
            
            <!-- Arrows -->
            <line x1="140" y1="60" x2="175" y2="60" stroke="#ff6700" stroke-width="1" marker-end="url(#arrowhead)"/>
            <line x1="300" y1="60" x2="335" y2="60" stroke="#ff6700" stroke-width="1" marker-end="url(#arrowhead)"/>
            <line x1="460" y1="60" x2="495" y2="60" stroke="#ff6700" stroke-width="1" marker-end="url(#arrowhead)"/>
            <line x1="620" y1="60" x2="655" y2="60" stroke="#ff6700" stroke-width="1" marker-end="url(#arrowhead)"/>
          </svg>
          <p class="figure-desc">Trajectory selection architecture defining a feasible region and an associated failure boundary.</p>
        </div>
        
        <div class="figure-full">
          <div class="figure-label">FIG. 2</div>
          <div class="figure-title">Method Flow</div>
          <svg class="patent-figure" viewBox="0 0 400 420" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <marker id="arrowhead2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#ff6700"/>
              </marker>
            </defs>
            <!-- Step 1 -->
            <rect x="50" y="20" width="300" height="50" fill="none" stroke="#ff6700" stroke-width="1"/>
            <text x="200" y="50" text-anchor="middle" fill="#ccc" font-size="11" font-family="Cormorant Garamond, serif">Identify constraints defining a feasible region</text>
            
            <!-- Arrow 1 -->
            <line x1="200" y1="70" x2="200" y2="95" stroke="#ff6700" stroke-width="1" marker-end="url(#arrowhead2)"/>
            
            <!-- Step 2 -->
            <rect x="50" y="100" width="300" height="50" fill="none" stroke="#ff6700" stroke-width="1"/>
            <text x="200" y="122" text-anchor="middle" fill="#ccc" font-size="11" font-family="Cormorant Garamond, serif">Compute candidate trajectories within</text>
            <text x="200" y="138" text-anchor="middle" fill="#ccc" font-size="11" font-family="Cormorant Garamond, serif">the feasible region</text>
            
            <!-- Arrow 2 -->
            <line x1="200" y1="150" x2="200" y2="175" stroke="#ff6700" stroke-width="1" marker-end="url(#arrowhead2)"/>
            
            <!-- Step 3 -->
            <rect x="50" y="180" width="300" height="50" fill="none" stroke="#ff6700" stroke-width="1"/>
            <text x="200" y="202" text-anchor="middle" fill="#ccc" font-size="11" font-family="Cormorant Garamond, serif">Evaluate proximity of candidate trajectories</text>
            <text x="200" y="218" text-anchor="middle" fill="#ccc" font-size="11" font-family="Cormorant Garamond, serif">to failure boundary over prediction horizon</text>
            
            <!-- Arrow 3 -->
            <line x1="200" y1="230" x2="200" y2="255" stroke="#ff6700" stroke-width="1" marker-end="url(#arrowhead2)"/>
            
            <!-- Step 4 -->
            <rect x="50" y="260" width="300" height="50" fill="none" stroke="#ff6700" stroke-width="1"/>
            <text x="200" y="282" text-anchor="middle" fill="#ccc" font-size="11" font-family="Cormorant Garamond, serif">Select trajectory based on preservation of</text>
            <text x="200" y="298" text-anchor="middle" fill="#ccc" font-size="11" font-family="Cormorant Garamond, serif">distance from the failure boundary</text>
            
            <!-- Arrow 4 -->
            <line x1="200" y1="310" x2="200" y2="335" stroke="#ff6700" stroke-width="1" marker-end="url(#arrowhead2)"/>
            
            <!-- Step 5 -->
            <rect x="50" y="340" width="300" height="50" fill="none" stroke="#ff6700" stroke-width="1"/>
            <text x="200" y="362" text-anchor="middle" fill="#ccc" font-size="11" font-family="Cormorant Garamond, serif">Generate an output representation</text>
            <text x="200" y="378" text-anchor="middle" fill="#ccc" font-size="11" font-family="Cormorant Garamond, serif">corresponding to the selected trajectory</text>
          </svg>
          <p class="figure-desc">Trajectory generation module producing a finite plurality of candidate trajectories within the feasible region.</p>
        </div>
        
        <div class="figure-full">
          <div class="figure-label">FIG. 3</div>
          <div class="figure-title">Feasible Region and Trajectories</div>
          <svg class="patent-figure" viewBox="0 0 500 350" xmlns="http://www.w3.org/2000/svg">
            <!-- Outer boundary (failure boundary) -->
            <rect x="30" y="30" width="440" height="280" rx="30" ry="30" fill="none" stroke="#444" stroke-width="2"/>
            <text x="60" y="55" fill="#666" font-size="10" font-family="JetBrains Mono, monospace">Failure Boundary</text>
            
            <!-- Feasible region -->
            <path d="M100,200 Q80,120 150,100 Q250,70 350,120 Q420,160 380,220 Q340,280 250,270 Q160,260 120,230 Q90,210 100,200" fill="rgba(255,103,0,0.05)" stroke="#ff6700" stroke-width="1"/>
            <text x="230" y="190" fill="#ff6700" font-size="11" font-family="Cormorant Garamond, serif" font-style="italic">FEASIBLE REGION</text>
            
            <!-- Current state -->
            <circle cx="120" cy="180" r="25" fill="none" stroke="#666" stroke-width="1"/>
            <circle cx="120" cy="180" r="3" fill="#ff6700"/>
            <text x="90" y="220" fill="#888" font-size="9" font-family="JetBrains Mono, monospace">CURRENT</text>
            <text x="98" y="232" fill="#888" font-size="9" font-family="JetBrains Mono, monospace">STATE</text>
            
            <!-- Trajectory 1 (approaches boundary) -->
            <path d="M120,180 Q200,140 280,100 Q340,70 390,85" fill="none" stroke="#888" stroke-width="1" stroke-dasharray="4,2"/>
            <circle cx="390" cy="85" r="4" fill="#888"/>
            <text x="320" y="75" fill="#888" font-size="9" font-family="JetBrains Mono, monospace">CANDIDATE</text>
            <text x="320" y="87" fill="#888" font-size="9" font-family="JetBrains Mono, monospace">TRAJECTORY 1</text>
            
            <!-- Trajectory 2 (stays in feasible region) -->
            <path d="M120,180 Q180,190 250,200 Q320,210 370,190" fill="none" stroke="#ff6700" stroke-width="1.5"/>
            <circle cx="370" cy="190" r="4" fill="#ff6700"/>
            <text x="375" y="175" fill="#ff6700" font-size="9" font-family="JetBrains Mono, monospace">CANDIDATE</text>
            <text x="375" y="187" fill="#ff6700" font-size="9" font-family="JetBrains Mono, monospace">TRAJECTORY 2</text>
          </svg>
          <p class="figure-desc">Trajectory evaluation module computing predicted time-to-boundary-crossing values for candidate trajectories relative to the failure boundary.</p>
        </div>
        
        <div class="figure-full">
          <div class="figure-label">FIG. 4</div>
          <div class="figure-title">Selection Module</div>
          <svg class="patent-figure" viewBox="0 0 700 140" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <marker id="arrowhead4" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#ff6700"/>
              </marker>
            </defs>
            <!-- Input trajectories -->
            <rect x="20" y="15" width="130" height="30" fill="none" stroke="#666" stroke-width="1"/>
            <text x="85" y="35" text-anchor="middle" fill="#888" font-size="9" font-family="JetBrains Mono, monospace">Candidate Traj. 1</text>
            
            <rect x="20" y="55" width="130" height="30" fill="none" stroke="#666" stroke-width="1"/>
            <text x="85" y="75" text-anchor="middle" fill="#888" font-size="9" font-family="JetBrains Mono, monospace">Candidate Traj. 2</text>
            
            <rect x="20" y="95" width="130" height="30" fill="none" stroke="#666" stroke-width="1"/>
            <text x="85" y="115" text-anchor="middle" fill="#888" font-size="9" font-family="JetBrains Mono, monospace">Candidate Traj. N</text>
            
            <!-- Converging lines -->
            <line x1="150" y1="30" x2="220" y2="70" stroke="#666" stroke-width="1"/>
            <line x1="150" y1="70" x2="220" y2="70" stroke="#666" stroke-width="1"/>
            <line x1="150" y1="110" x2="220" y2="70" stroke="#666" stroke-width="1"/>
            
            <!-- Selection module -->
            <rect x="230" y="45" width="130" height="50" fill="none" stroke="#ff6700" stroke-width="1"/>
            <text x="295" y="75" text-anchor="middle" fill="#ff6700" font-size="10" font-family="JetBrains Mono, monospace">Selection Module</text>
            
            <!-- Arrow to output -->
            <line x1="360" y1="70" x2="410" y2="70" stroke="#ff6700" stroke-width="1" marker-end="url(#arrowhead4)"/>
            
            <!-- Output module -->
            <rect x="420" y="45" width="130" height="50" fill="none" stroke="#ff6700" stroke-width="1"/>
            <text x="485" y="68" text-anchor="middle" fill="#ccc" font-size="9" font-family="JetBrains Mono, monospace">Output /</text>
            <text x="485" y="82" text-anchor="middle" fill="#ccc" font-size="9" font-family="JetBrains Mono, monospace">Translation Module</text>
            
            <!-- Arrow to representation -->
            <line x1="550" y1="70" x2="600" y2="70" stroke="#ff6700" stroke-width="1" marker-end="url(#arrowhead4)"/>
            
            <!-- Output representation -->
            <rect x="610" y="45" width="70" height="50" fill="rgba(255,103,0,0.1)" stroke="#ff6700" stroke-width="1"/>
            <text x="645" y="68" text-anchor="middle" fill="#ff6700" font-size="8" font-family="JetBrains Mono, monospace">Output</text>
            <text x="645" y="80" text-anchor="middle" fill="#ff6700" font-size="8" font-family="JetBrains Mono, monospace">Repr.</text>
          </svg>
          <p class="figure-desc">Trajectory selection module comparatively ordering candidate trajectories based on predicted time-to-boundary-crossing values.</p>
        </div>
        
        <div class="figure-full">
          <div class="figure-label">FIG. 5</div>
          <div class="figure-title">Computing System</div>
          <svg class="patent-figure" viewBox="0 0 700 200" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <marker id="arrowhead5" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#ff6700"/>
              </marker>
            </defs>
            <!-- System boundary -->
            <rect x="20" y="20" width="660" height="160" fill="none" stroke="#333" stroke-width="1"/>
            <text x="350" y="170" text-anchor="middle" fill="#666" font-size="10" font-family="JetBrains Mono, monospace">Computing System</text>
            
            <!-- Processor -->
            <rect x="40" y="40" width="100" height="35" fill="none" stroke="#ff6700" stroke-width="1"/>
            <text x="90" y="62" text-anchor="middle" fill="#ff6700" font-size="10" font-family="JetBrains Mono, monospace">Processor</text>
            
            <!-- Memory -->
            <rect x="560" y="40" width="100" height="35" fill="none" stroke="#ff6700" stroke-width="1"/>
            <text x="610" y="62" text-anchor="middle" fill="#ff6700" font-size="10" font-family="JetBrains Mono, monospace">Memory</text>
            
            <!-- Connection line -->
            <line x1="140" y1="57" x2="560" y2="57" stroke="#444" stroke-width="1"/>
            
            <!-- Vertical lines -->
            <line x1="90" y1="75" x2="90" y2="95" stroke="#444" stroke-width="1"/>
            
            <!-- Module boxes -->
            <rect x="40" y="100" width="95" height="45" fill="none" stroke="#666" stroke-width="1"/>
            <text x="87" y="120" text-anchor="middle" fill="#888" font-size="7" font-family="JetBrains Mono, monospace">Constraint</text>
            <text x="87" y="132" text-anchor="middle" fill="#888" font-size="7" font-family="JetBrains Mono, monospace">Identification</text>
            
            <rect x="155" y="100" width="95" height="45" fill="none" stroke="#666" stroke-width="1"/>
            <text x="202" y="120" text-anchor="middle" fill="#888" font-size="7" font-family="JetBrains Mono, monospace">Trajectory</text>
            <text x="202" y="132" text-anchor="middle" fill="#888" font-size="7" font-family="JetBrains Mono, monospace">Computation</text>
            
            <rect x="270" y="100" width="95" height="45" fill="none" stroke="#666" stroke-width="1"/>
            <text x="317" y="120" text-anchor="middle" fill="#888" font-size="7" font-family="JetBrains Mono, monospace">Boundary</text>
            <text x="317" y="132" text-anchor="middle" fill="#888" font-size="7" font-family="JetBrains Mono, monospace">Evaluation</text>
            
            <rect x="385" y="100" width="95" height="45" fill="none" stroke="#666" stroke-width="1"/>
            <text x="432" y="120" text-anchor="middle" fill="#888" font-size="7" font-family="JetBrains Mono, monospace">Selection</text>
            <text x="432" y="132" text-anchor="middle" fill="#888" font-size="7" font-family="JetBrains Mono, monospace">Module</text>
            
            <rect x="500" y="100" width="95" height="45" fill="none" stroke="#666" stroke-width="1"/>
            <text x="547" y="120" text-anchor="middle" fill="#888" font-size="7" font-family="JetBrains Mono, monospace">Output /</text>
            <text x="547" y="132" text-anchor="middle" fill="#888" font-size="7" font-family="JetBrains Mono, monospace">Translation</text>
            
            <!-- Module arrows -->
            <line x1="135" y1="122" x2="150" y2="122" stroke="#ff6700" stroke-width="1" marker-end="url(#arrowhead5)"/>
            <line x1="250" y1="122" x2="265" y2="122" stroke="#ff6700" stroke-width="1" marker-end="url(#arrowhead5)"/>
            <line x1="365" y1="122" x2="380" y2="122" stroke="#ff6700" stroke-width="1" marker-end="url(#arrowhead5)"/>
            <line x1="480" y1="122" x2="495" y2="122" stroke="#ff6700" stroke-width="1" marker-end="url(#arrowhead5)"/>
          </svg>
          <p class="figure-desc">Output interface providing an output representation of the selected trajectory for use by an external system or decision process.</p>
        </div>
      </div>
      
      <div class="patent-section">
        <h2>Claims</h2>
        
        <!-- Amended Claims (Current) -->
        <div class="claims-toggle-section">
          <button class="claims-toggle" id="amended-claims-toggle">
            <span class="toggle-indicator">○</span>
            <span>Amended Claims 15–28</span>
            <span class="toggle-status">CURRENT</span>
          </button>
          <div class="claims-content collapsed" id="amended-claims-content">
            <p class="amendment-date">Filed January 19, 2026</p>
            <p class="amendment-note">This preliminary amendment cancels Claims 1–14 and adds replacement Claims 15–28 directed to the same disclosed invention. No new matter is introduced.</p>
            <div class="claims-list amendment-claims">
              <div class="claim-item claim-independent">
                <p>A computer-implemented method for selecting a trajectory within a constrained system, comprising:</p>
                <p class="claim-element">identifying constraints defining a feasible region of system operation;</p>
                <p class="claim-element">generating, by one or more processors, a finite plurality of candidate trajectories extending from a current system state and admissible within the feasible region;</p>
                <p class="claim-element">evaluating, by the one or more processors, each candidate trajectory by computing a predicted time-to-boundary-crossing (TTBC) value representing an estimated future time at which the candidate trajectory would intersect a failure boundary associated with loss of system operability if the trajectory were continued, the evaluating being performed over a future evaluation horizon;</p>
                <p class="claim-element">selecting, by the one or more processors, a selected candidate trajectory from the finite plurality of candidate trajectories by comparatively ordering at least a subset of the candidate trajectories based at least on their predicted TTBC values and selecting a candidate trajectory that maximizes a minimum predicted TTBC value over the future evaluation horizon relative to at least one other candidate trajectory; and</p>
                <p class="claim-element">transmitting, by an output interface, an output representation corresponding to the selected candidate trajectory for use by an external system or decision process.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 15, wherein computing the predicted TTBC value comprises identifying an earliest time at which a constraint defining the failure boundary is violated.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 15, wherein the candidate trajectories are generated as discrete trajectories, continuous trajectories, or combinations thereof.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 15, wherein the constraints comprise one or more inequality constraints, and wherein the failure boundary is defined by a constraint function evaluated along the candidate trajectory.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 15, wherein computing the predicted TTBC value is performed using forward simulation of system dynamics over the future evaluation horizon.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 19, wherein computing the predicted TTBC value further comprises interpolation between sampled trajectory points to estimate a time at which a constraint inequality defining the failure boundary is violated.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 15, wherein the failure boundary is defined by a plurality of constraints, and wherein the predicted TTBC value for a given candidate trajectory is determined as a minimum predicted time-to-boundary-crossing across the plurality of constraints.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 15, wherein the future evaluation horizon comprises a plurality of timesteps, and wherein computing the predicted TTBC value comprises identifying an earliest timestep at which the failure boundary would be intersected.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 15, further comprising receiving an updated system state and repeating the generating, evaluating, and selecting to provide an updated selected candidate trajectory.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 15, wherein the output representation comprises at least one of: a control sequence; a schedule; a recommendation; a governance action; a plan; or a machine-readable instruction set consumable by the external system or decision process.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 15, wherein the constrained system comprises at least one of a physical system, a computational system, or an organizational system.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 15, wherein the constraints comprise one or more physical, mechanical, or environmental constraints.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 15, wherein the constraints comprise one or more logical, computational, or resource-based constraints.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 15, wherein the constraints comprise one or more policy, regulatory, operational, or governance constraints.</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Original Claims (Superseded) -->
        <div class="claims-toggle-section">
          <button class="claims-toggle" id="original-claims-toggle">
            <span class="toggle-indicator">○</span>
            <span>Original Claims 1–14</span>
            <span class="toggle-status superseded">SUPERSEDED</span>
          </button>
          <div class="claims-content collapsed blurred" id="original-claims-content">
            <div class="claims-list">
              <div class="claim-item claim-independent">
                <p>A computer-implemented method for selecting a trajectory within a constrained system, comprising:</p>
                <p class="claim-element">(i) identifying constraints defining a feasible region of system operation;</p>
                <p class="claim-element">(ii) computing, by a trajectory generation module, a finite plurality of candidate trajectories extending from a current system state and admissible within the feasible region;</p>
                <p class="claim-element">(iii) evaluating, by a trajectory evaluation module, each candidate trajectory by computing a predicted time-to-boundary-crossing value representing a predicted time until the candidate trajectory intersects a failure boundary associated with loss of system operability;</p>
                <p class="claim-element">(iv) selecting, by a trajectory selection module, one of the candidate trajectories based on a comparative ordering that maximizes a minimum predicted time-to-boundary-crossing across the candidate trajectories over a future evaluation horizon; and</p>
                <p class="claim-element">(v) generating, by an output interface, an output representation corresponding to the selected trajectory for use by an external system or decision process.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 1, wherein evaluating each candidate trajectory comprises forward simulating the constrained system under the candidate trajectory across the future evaluation horizon to identify an earliest time at which a constraint defining the failure boundary is violated.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 1, wherein the constraints comprise one or more inequality constraints, and wherein the predicted time-to-boundary-crossing value is computed by detecting a threshold crossing or sign change of a constraint function evaluated along the candidate trajectory.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 1, wherein the constrained system is modeled in discrete time, and wherein the predicted time-to-boundary-crossing value is approximated by identifying a first discrete timestep within the future evaluation horizon at which a constraint inequality is violated.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 1, wherein generating the finite plurality of candidate trajectories comprises selecting trajectory primitives from a predefined library or sampling admissible trajectories from a trajectory generator.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 1, wherein the comparative ordering further accounts for at least one secondary criterion selected from:</p>
                <p class="claim-element">(i) a rate of decrease of temporal margin relative to the failure boundary,</p>
                <p class="claim-element">(ii) a stability metric,</p>
                <p class="claim-element">(iii) an energy or resource expenditure metric, or</p>
                <p class="claim-element">(iv) a priority weighting applied to subsets of the constraints.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 1, wherein the failure boundary corresponds to a boundary of the feasible region, and wherein the predicted time-to-boundary-crossing represents a predicted time until the candidate trajectory exits the feasible region.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 1, wherein the future evaluation horizon comprises a fixed temporal duration, a fixed number of discrete timesteps, or a dynamically selected horizon determined based on at least one of system state, constraint tightness, or computational budget.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 1, wherein the output representation comprises at least one of:</p>
                <p class="claim-element">(i) a control sequence,</p>
                <p class="claim-element">(ii) a schedule,</p>
                <p class="claim-element">(iii) a recommendation,</p>
                <p class="claim-element">(iv) a governance action,</p>
                <p class="claim-element">(v) a plan, or</p>
                <p class="claim-element">(vi) a machine-readable instruction set consumable by the external system or decision process.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 1, wherein the constrained system corresponds to a physical system subject to one or more physical, mechanical, or environmental constraints.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 1, wherein the constrained system corresponds to a computational system subject to one or more logical, computational, or resource-based constraints.</p>
              </div>
              
              <div class="claim-item">
                <p>The computer-implemented method of claim 1, wherein the constrained system corresponds to an organizational or institutional system subject to one or more policy, regulatory, operational, or governance constraints.</p>
              </div>
              
              <div class="claim-item claim-independent">
                <p>A computer-implemented system comprising one or more processors and one or more memories storing instructions that, when executed, cause the one or more processors to perform the method of any one of claims 1–12.</p>
              </div>
              
              <div class="claim-item claim-independent">
                <p>A non-transitory computer-readable medium storing instructions that, when executed by one or more processors, cause the one or more processors to perform the method of any one of claims 1–12.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="page-link">
        <a href="#" data-page="rcott">← Back to Theory</a>
      </div>
    </div>
  </div>

  <!-- Hardware Page -->
  <div id="hardware-page" class="page hw-sw-page">
    <div class="page-content">
      <button class="back-btn" data-page="doors">← Back</button>
      
      <div class="section">
        <div class="section-title">Constraint-Native Hardware</div>
        <div class="section-body">
          What if the physics did the math?
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">CLaSP</div>
        <div class="section-body">
          Constraint Lattice State Projection. Photonic mesh where settling is computation. Light finds feasible states because that's where it wants to be.
        </div>
        <div class="spec-line">Spec: coupled SiN resonators · PCM barrier tiles · coherence-gated feedback</div>
        <div class="current-work">Current work: resonator coupling simulation, targeting MPW run.</div>
        
        <!-- CLaSP Interactive visual -->
        <div class="visual-container" id="clasp-visual">
          <div class="visual-layer layer-abstract">
            <svg viewBox="0 0 360 220">
              <line x1="40" y1="110" x2="320" y2="110" stroke="rgba(0, 212, 170, 0.3)" stroke-width="2" pointer-events="none"/>
              <line x1="40" y1="110" x2="320" y2="110" stroke="transparent" stroke-width="12" class="hotspot" data-tip="Signal path"/>
              <circle cx="70" cy="110" r="4" fill="#00d4aa" class="visual-glow" pointer-events="none" opacity="0.6"/>
              <circle cx="140" cy="70" r="28" fill="none" stroke="rgba(0, 212, 170, 0.3)" stroke-width="2" pointer-events="none"/>
              <circle cx="140" cy="70" r="28" fill="transparent" stroke="transparent" stroke-width="10" class="hotspot" data-tip="Resonator"/>
              <circle cx="220" cy="150" r="28" fill="none" stroke="rgba(0, 212, 170, 0.3)" stroke-width="2" pointer-events="none"/>
              <circle cx="220" cy="150" r="28" fill="transparent" stroke="transparent" stroke-width="10" class="hotspot" data-tip="Resonator"/>
              <line x1="155" y1="95" x2="205" y2="125" stroke="rgba(0, 212, 170, 0.15)" stroke-width="1" stroke-dasharray="3 3" pointer-events="none"/>
              <circle cx="180" cy="110" r="10" fill="transparent" class="hotspot" data-tip="Coupling"/>
              <circle cx="180" cy="110" r="3" fill="rgba(0, 212, 170, 0.4)" pointer-events="none"/>
              <rect x="134" y="94" width="12" height="12" fill="rgba(0, 212, 170, 0.2)" stroke="rgba(0, 212, 170, 0.4)" stroke-width="1" pointer-events="none"/>
              <rect x="130" y="90" width="20" height="20" fill="transparent" class="hotspot" data-tip="Gate"/>
              <circle cx="168" cy="70" r="12" fill="transparent" class="hotspot" data-tip="Coherence point"/>
              <circle cx="168" cy="70" r="5" fill="none" stroke="#00d4aa" stroke-width="2" class="visual-glow" pointer-events="none"/>
              <circle cx="168" cy="70" r="2" fill="#00d4aa" class="visual-glow" pointer-events="none"/>
              <path d="M 248 150 Q 290 110, 248 70 Q 220 50, 168 70" fill="none" stroke="rgba(0, 212, 170, 0.1)" stroke-width="1" stroke-dasharray="4 4" pointer-events="none"/>
            </svg>
          </div>
          <div class="visual-layer layer-concrete">
            <svg viewBox="0 0 360 220">
              <line x1="40" y1="110" x2="320" y2="110" stroke="rgba(255, 103, 0, 0.4)" stroke-width="3" pointer-events="none"/>
              <line x1="40" y1="110" x2="320" y2="110" stroke="transparent" stroke-width="14" class="hotspot" data-tip="Waveguide"/>
              <circle cx="70" cy="110" r="5" fill="#ff6700" class="visual-glow-orange" pointer-events="none" opacity="0.7"/>
              <circle cx="140" cy="70" r="28" fill="none" stroke="rgba(255, 103, 0, 0.4)" stroke-width="3" pointer-events="none"/>
              <circle cx="140" cy="70" r="28" fill="transparent" stroke="transparent" stroke-width="12" class="hotspot" data-tip="SiN ring"/>
              <circle cx="220" cy="150" r="28" fill="none" stroke="rgba(255, 103, 0, 0.4)" stroke-width="3" pointer-events="none"/>
              <circle cx="220" cy="150" r="28" fill="transparent" stroke="transparent" stroke-width="12" class="hotspot" data-tip="SiN ring"/>
              <line x1="155" y1="95" x2="205" y2="125" stroke="rgba(255, 103, 0, 0.25)" stroke-width="2" pointer-events="none"/>
              <circle cx="180" cy="110" r="12" fill="transparent" class="hotspot" data-tip="Evanescent coupling"/>
              <rect x="132" y="92" width="16" height="16" fill="rgba(255, 103, 0, 0.3)" stroke="rgba(255, 103, 0, 0.5)" stroke-width="2" pointer-events="none"/>
              <rect x="128" y="88" width="24" height="24" fill="transparent" class="hotspot" data-tip="PCM barrier"/>
              <path d="M 248 150 Q 290 110, 248 70 Q 220 50, 168 70" fill="none" stroke="rgba(255, 103, 0, 0.2)" stroke-width="2" stroke-dasharray="6 4" pointer-events="none"/>
              <path d="M 248 150 Q 290 110, 248 70 Q 220 50, 168 70" fill="none" stroke="transparent" stroke-width="14" class="hotspot" data-tip="Feedback loop"/>
              <circle cx="168" cy="70" r="14" fill="transparent" class="hotspot" data-tip="Coherence gate"/>
              <circle cx="168" cy="70" r="6" fill="none" stroke="#ff6700" stroke-width="2" class="visual-glow-orange" pointer-events="none"/>
              <circle cx="168" cy="70" r="2" fill="#ff6700" class="visual-glow-orange" pointer-events="none"/>
            </svg>
          </div>
          <div class="visual-hint"><span>a</span><span>p</span><span>p</span><span>l</span><span>y</span></div>
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">PrismForge</div>
        <div class="section-body">
          Hybrid optical compute. Not a GPU replacement—a successor for workloads that fit.
        </div>
        <div class="spec-line">Spec: optical tensor cores · CLaSP coprocessor · electrical fallback · chiplet interconnect</div>
        
        <!-- PrismForge Interactive visual -->
        <div class="visual-container" id="prismforge-visual">
          <div class="visual-layer layer-abstract">
            <svg viewBox="0 0 360 220">
              <g pointer-events="none">
                <line x1="80" y1="60" x2="80" y2="160" stroke="rgba(0, 212, 170, 0.1)" stroke-width="1" stroke-dasharray="4 4"/>
                <line x1="130" y1="60" x2="130" y2="160" stroke="rgba(0, 212, 170, 0.1)" stroke-width="1" stroke-dasharray="4 4"/>
                <line x1="180" y1="60" x2="180" y2="160" stroke="rgba(0, 212, 170, 0.1)" stroke-width="1" stroke-dasharray="4 4"/>
                <line x1="230" y1="60" x2="230" y2="160" stroke="rgba(0, 212, 170, 0.1)" stroke-width="1" stroke-dasharray="4 4"/>
                <line x1="55" y1="85" x2="255" y2="85" stroke="rgba(0, 212, 170, 0.1)" stroke-width="1" stroke-dasharray="4 4"/>
                <line x1="55" y1="135" x2="255" y2="135" stroke="rgba(0, 212, 170, 0.1)" stroke-width="1" stroke-dasharray="4 4"/>
              </g>
              <rect x="55" y="55" width="200" height="110" fill="transparent" class="hotspot" data-tip="Fallback path"/>
              <g pointer-events="none">
                <line x1="80" y1="55" x2="80" y2="165" stroke="rgba(0, 212, 170, 0.3)" stroke-width="2"/>
                <line x1="130" y1="55" x2="130" y2="165" stroke="rgba(0, 212, 170, 0.3)" stroke-width="2"/>
                <line x1="180" y1="55" x2="180" y2="165" stroke="rgba(0, 212, 170, 0.3)" stroke-width="2"/>
                <line x1="230" y1="55" x2="230" y2="165" stroke="rgba(0, 212, 170, 0.3)" stroke-width="2"/>
                <line x1="50" y1="85" x2="260" y2="85" stroke="rgba(0, 212, 170, 0.3)" stroke-width="2"/>
                <line x1="50" y1="135" x2="260" y2="135" stroke="rgba(0, 212, 170, 0.3)" stroke-width="2"/>
              </g>
              <line x1="50" y1="110" x2="260" y2="110" stroke="transparent" stroke-width="80" class="hotspot" data-tip="Optical path"/>
              <g pointer-events="none">
                <circle cx="80" cy="85" r="5" fill="rgba(0, 212, 170, 0.4)"/>
                <circle cx="130" cy="85" r="5" fill="rgba(0, 212, 170, 0.4)"/>
                <circle cx="180" cy="85" r="5" fill="rgba(0, 212, 170, 0.4)"/>
                <circle cx="230" cy="85" r="5" fill="rgba(0, 212, 170, 0.4)"/>
                <circle cx="80" cy="135" r="5" fill="rgba(0, 212, 170, 0.4)"/>
                <circle cx="130" cy="135" r="5" fill="rgba(0, 212, 170, 0.4)"/>
                <circle cx="180" cy="135" r="5" fill="rgba(0, 212, 170, 0.4)"/>
                <circle cx="230" cy="135" r="5" fill="rgba(0, 212, 170, 0.4)"/>
              </g>
              <rect x="65" y="70" width="180" height="80" fill="transparent" class="hotspot" data-tip="Tensor array"/>
              <g pointer-events="none">
                <rect x="280" y="120" width="45" height="45" fill="none" stroke="rgba(0, 212, 170, 0.25)" stroke-width="1" rx="3"/>
                <circle cx="295" cy="135" r="4" fill="rgba(0, 212, 170, 0.3)"/>
                <circle cx="310" cy="135" r="4" fill="rgba(0, 212, 170, 0.3)"/>
                <circle cx="295" cy="150" r="4" fill="rgba(0, 212, 170, 0.3)"/>
                <circle cx="310" cy="150" r="4" fill="rgba(0, 212, 170, 0.3)"/>
              </g>
              <rect x="275" y="115" width="55" height="55" fill="transparent" class="hotspot" data-tip="Coprocessor"/>
              <circle cx="180" cy="85" r="10" fill="transparent" class="hotspot" data-tip="Active node"/>
              <circle cx="180" cy="85" r="7" fill="none" stroke="#00d4aa" stroke-width="2" class="visual-glow" pointer-events="none"/>
            </svg>
          </div>
          <div class="visual-layer layer-concrete">
            <svg viewBox="0 0 360 220">
              <rect x="45" y="45" width="225" height="130" fill="none" stroke="rgba(255, 103, 0, 0.3)" stroke-width="2" rx="4" pointer-events="none"/>
              <rect x="40" y="40" width="235" height="140" fill="transparent" class="hotspot" data-tip="Chiplet package"/>
              <g pointer-events="none">
                <line x1="80" y1="60" x2="80" y2="160" stroke="rgba(255, 103, 0, 0.12)" stroke-width="1" stroke-dasharray="4 4"/>
                <line x1="130" y1="60" x2="130" y2="160" stroke="rgba(255, 103, 0, 0.12)" stroke-width="1" stroke-dasharray="4 4"/>
                <line x1="180" y1="60" x2="180" y2="160" stroke="rgba(255, 103, 0, 0.12)" stroke-width="1" stroke-dasharray="4 4"/>
                <line x1="230" y1="60" x2="230" y2="160" stroke="rgba(255, 103, 0, 0.12)" stroke-width="1" stroke-dasharray="4 4"/>
                <line x1="55" y1="85" x2="255" y2="85" stroke="rgba(255, 103, 0, 0.12)" stroke-width="1" stroke-dasharray="4 4"/>
                <line x1="55" y1="135" x2="255" y2="135" stroke="rgba(255, 103, 0, 0.12)" stroke-width="1" stroke-dasharray="4 4"/>
              </g>
              <rect x="55" y="55" width="200" height="110" fill="transparent" class="hotspot" data-tip="Electrical backup"/>
              <g pointer-events="none">
                <line x1="80" y1="55" x2="80" y2="165" stroke="rgba(255, 103, 0, 0.4)" stroke-width="3"/>
                <line x1="130" y1="55" x2="130" y2="165" stroke="rgba(255, 103, 0, 0.4)" stroke-width="3"/>
                <line x1="180" y1="55" x2="180" y2="165" stroke="rgba(255, 103, 0, 0.4)" stroke-width="3"/>
                <line x1="230" y1="55" x2="230" y2="165" stroke="rgba(255, 103, 0, 0.4)" stroke-width="3"/>
                <line x1="50" y1="85" x2="260" y2="85" stroke="rgba(255, 103, 0, 0.4)" stroke-width="3"/>
                <line x1="50" y1="135" x2="260" y2="135" stroke="rgba(255, 103, 0, 0.4)" stroke-width="3"/>
              </g>
              <line x1="50" y1="110" x2="260" y2="110" stroke="transparent" stroke-width="80" class="hotspot" data-tip="Optical interconnect"/>
              <g pointer-events="none">
                <circle cx="80" cy="85" r="6" fill="rgba(255, 103, 0, 0.5)" stroke="rgba(255, 103, 0, 0.6)" stroke-width="1"/>
                <circle cx="130" cy="85" r="6" fill="rgba(255, 103, 0, 0.5)" stroke="rgba(255, 103, 0, 0.6)" stroke-width="1"/>
                <circle cx="180" cy="85" r="6" fill="rgba(255, 103, 0, 0.5)" stroke="rgba(255, 103, 0, 0.6)" stroke-width="1"/>
                <circle cx="230" cy="85" r="6" fill="rgba(255, 103, 0, 0.5)" stroke="rgba(255, 103, 0, 0.6)" stroke-width="1"/>
                <circle cx="80" cy="135" r="6" fill="rgba(255, 103, 0, 0.5)" stroke="rgba(255, 103, 0, 0.6)" stroke-width="1"/>
                <circle cx="130" cy="135" r="6" fill="rgba(255, 103, 0, 0.5)" stroke="rgba(255, 103, 0, 0.6)" stroke-width="1"/>
                <circle cx="180" cy="135" r="6" fill="rgba(255, 103, 0, 0.5)" stroke="rgba(255, 103, 0, 0.6)" stroke-width="1"/>
                <circle cx="230" cy="135" r="6" fill="rgba(255, 103, 0, 0.5)" stroke="rgba(255, 103, 0, 0.6)" stroke-width="1"/>
              </g>
              <rect x="65" y="70" width="180" height="80" fill="transparent" class="hotspot" data-tip="Optical cores"/>
              <g pointer-events="none">
                <rect x="280" y="120" width="45" height="45" fill="rgba(255, 103, 0, 0.15)" stroke="rgba(255, 103, 0, 0.4)" stroke-width="2" rx="3"/>
                <circle cx="295" cy="135" r="5" fill="rgba(255, 103, 0, 0.4)" stroke="rgba(255, 103, 0, 0.5)" stroke-width="1"/>
                <circle cx="310" cy="135" r="5" fill="rgba(255, 103, 0, 0.4)" stroke="rgba(255, 103, 0, 0.5)" stroke-width="1"/>
                <circle cx="295" cy="150" r="5" fill="rgba(255, 103, 0, 0.4)" stroke="rgba(255, 103, 0, 0.5)" stroke-width="1"/>
                <circle cx="310" cy="150" r="5" fill="rgba(255, 103, 0, 0.4)" stroke="rgba(255, 103, 0, 0.5)" stroke-width="1"/>
                <line x1="270" y1="135" x2="280" y2="142" stroke="rgba(255, 103, 0, 0.3)" stroke-width="2"/>
              </g>
              <rect x="275" y="115" width="55" height="55" fill="transparent" class="hotspot" data-tip="CLaSP coprocessor"/>
              <circle cx="180" cy="85" r="12" fill="transparent" class="hotspot" data-tip="Active core"/>
              <circle cx="180" cy="85" r="8" fill="none" stroke="#ff6700" stroke-width="2" class="visual-glow-orange" pointer-events="none"/>
            </svg>
          </div>
          <div class="visual-hint"><span>a</span><span>p</span><span>p</span><span>l</span><span>y</span></div>
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">Fabrication Path</div>
        <div class="section-body">
          Real fabs. Real PDKs.
        </div>
        <div class="spec-line">Targets: AIM Photonics (US) · imec iSiPP (EU) · LIGENTEC SiN (low-loss)</div>
      </div>
      
      <div class="section">
        <div class="section-title">Built on RCOT</div>
        <div class="tech-block">
          <p>Restraint Continuity Observation Translation</p>
          <p>Patent pending: US Application #19/448,772</p>
          <p>Hardware provisionals pending</p>
          <p><a href="#" data-page="rcott">Explore RCOT Theory →</a></p>
        </div>
      </div>
      
      </div>
    </div>
  </div>

  <!-- Software Page -->
  <div id="software-page" class="page hw-sw-page">
    <div class="page-content">
      <button class="back-btn" data-page="doors">← Back</button>
      
      <div class="section">
        <div class="section-title">Toolkit</div>
        <div class="section-body">
          Proofs of concept. Domains where constraints define the problem.
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">Cognitive Prosthesis</div>
        <div class="section-body">
          The boundary between human and AI moves. When does assistance become override? Building the math for handoff.
        </div>
        <div class="current-work">Current work: fatigue-adaptive handoff in assisted movement.</div>
        
        <!-- Prosthesis Interactive visual -->
        <div class="visual-container" id="prosthesis-visual">
          <div class="visual-layer layer-abstract">
            <svg viewBox="0 0 280 180">
              <path d="M 60 130 Q 100 40, 160 90 Q 200 130, 220 100" fill="none" stroke="transparent" stroke-width="12" class="hotspot" data-tip="Human capability"/>
              <path d="M 70 60 L 120 80 L 160 90 L 200 70 L 230 90" fill="none" stroke="transparent" stroke-width="12" class="hotspot" data-tip="AI envelope"/>
              <path d="M 60 130 Q 100 40, 160 90 Q 200 130, 220 100" fill="none" stroke="rgba(0, 212, 170, 0.3)" stroke-width="2" pointer-events="none"/>
              <path d="M 70 60 L 120 80 L 160 90 L 200 70 L 230 90" fill="none" stroke="rgba(0, 212, 170, 0.3)" stroke-width="2" pointer-events="none"/>
              <circle cx="160" cy="90" r="12" fill="transparent" class="hotspot" data-tip="Handoff boundary"/>
              <circle cx="160" cy="90" r="6" fill="none" stroke="#00d4aa" stroke-width="2" class="visual-glow" pointer-events="none"/>
              <circle cx="160" cy="90" r="2" fill="#00d4aa" class="visual-glow" pointer-events="none"/>
            </svg>
          </div>
          <div class="visual-layer layer-concrete">
            <svg viewBox="0 0 280 180">
              <path d="M 50 100 Q 80 85, 120 90 Q 160 95, 200 90 Q 230 85, 250 95" fill="none" stroke="transparent" stroke-width="20" stroke-linecap="round" class="hotspot" data-tip="Human limb"/>
              <path d="M 50 100 Q 80 85, 120 90 Q 160 95, 200 90 Q 230 85, 250 95" fill="none" stroke="rgba(255, 103, 0, 0.25)" stroke-width="8" stroke-linecap="round" pointer-events="none"/>
              <rect x="70" y="60" width="160" height="60" fill="transparent" class="hotspot" data-tip="Exoskeleton"/>
              <g pointer-events="none">
                <path d="M 70 70 L 70 120" fill="none" stroke="rgba(255, 103, 0, 0.4)" stroke-width="2"/>
                <path d="M 70 70 L 130 65 L 130 115 L 70 120" fill="none" stroke="rgba(255, 103, 0, 0.4)" stroke-width="2"/>
                <path d="M 130 65 L 190 60 L 190 110 L 130 115" fill="none" stroke="rgba(255, 103, 0, 0.4)" stroke-width="2"/>
                <path d="M 190 60 L 230 65 L 230 105 L 190 110" fill="none" stroke="rgba(255, 103, 0, 0.4)" stroke-width="2"/>
              </g>
              <circle cx="60" cy="97" r="15" fill="transparent" class="hotspot" data-tip="Handoff point"/>
              <line x1="50" y1="100" x2="70" y2="95" stroke="#ff6700" stroke-width="2" class="visual-glow-orange" pointer-events="none"/>
              <circle cx="60" cy="97" r="3" fill="#ff6700" class="visual-glow-orange" pointer-events="none"/>
            </svg>
          </div>
          <div class="visual-hint"><span>a</span><span>p</span><span>p</span><span>l</span><span>y</span></div>
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">Autonomous Constraint Layers</div>
        <div class="section-body">
          Constraint layers for systems that act in the world. Reference architectures, not product.
        </div>
        <div class="current-work">Current work: drone no-fly enforcement that degrades safely, not abruptly.</div>
        
        <!-- Constraint Layers Interactive visual -->
        <div class="visual-container" id="constraint-visual">
          <div class="visual-layer layer-abstract">
            <svg viewBox="0 0 360 220">
              <circle cx="220" cy="110" r="60" fill="none" stroke="rgba(0, 212, 170, 0.08)" stroke-width="1" pointer-events="none"/>
              <circle cx="220" cy="110" r="48" fill="none" stroke="rgba(0, 212, 170, 0.12)" stroke-width="1" pointer-events="none"/>
              <circle cx="220" cy="110" r="36" fill="none" stroke="rgba(0, 212, 170, 0.18)" stroke-width="1" pointer-events="none"/>
              <circle cx="220" cy="110" r="24" fill="none" stroke="rgba(0, 212, 170, 0.25)" stroke-width="1" pointer-events="none"/>
              <circle cx="220" cy="110" r="12" fill="none" stroke="rgba(0, 212, 170, 0.35)" stroke-width="1" pointer-events="none"/>
              <circle cx="220" cy="110" r="60" fill="transparent" class="hotspot" data-tip="Constraint field"/>
              <path d="M 40 140 Q 100 130, 140 100 Q 170 75, 200 60 Q 260 40, 320 70" fill="none" stroke="transparent" stroke-width="14" class="hotspot" data-tip="Trajectory"/>
              <path d="M 40 140 Q 100 130, 140 100 Q 170 75, 200 60 Q 260 40, 320 70" fill="none" stroke="rgba(0, 212, 170, 0.3)" stroke-width="2" stroke-dasharray="6 4" pointer-events="none"/>
              <circle cx="175" cy="72" r="12" fill="transparent" class="hotspot" data-tip="Margin minimum"/>
              <circle cx="175" cy="72" r="5" fill="none" stroke="#00d4aa" stroke-width="2" class="visual-glow" pointer-events="none"/>
              <circle cx="175" cy="72" r="2" fill="#00d4aa" class="visual-glow" pointer-events="none"/>
            </svg>
          </div>
          <div class="visual-layer layer-concrete">
            <svg viewBox="0 0 360 220">
              <g pointer-events="none">
                <rect x="212" y="85" width="16" height="50" fill="rgba(255, 103, 0, 0.3)"/>
                <rect x="208" y="95" width="24" height="6" fill="rgba(255, 103, 0, 0.25)"/>
                <rect x="208" y="115" width="24" height="6" fill="rgba(255, 103, 0, 0.25)"/>
                <polygon points="220,70 230,85 210,85" fill="rgba(255, 103, 0, 0.35)"/>
              </g>
              <rect x="195" y="60" width="50" height="80" fill="transparent" class="hotspot" data-tip="Restricted zone"/>
              <g pointer-events="none">
                <ellipse cx="100" cy="118" rx="8" ry="4" fill="rgba(255, 103, 0, 0.5)"/>
                <line x1="92" y1="118" x2="85" y2="112" stroke="rgba(255, 103, 0, 0.4)" stroke-width="1.5"/>
                <line x1="108" y1="118" x2="115" y2="112" stroke="rgba(255, 103, 0, 0.4)" stroke-width="1.5"/>
                <line x1="92" y1="118" x2="85" y2="124" stroke="rgba(255, 103, 0, 0.4)" stroke-width="1.5"/>
                <line x1="108" y1="118" x2="115" y2="124" stroke="rgba(255, 103, 0, 0.4)" stroke-width="1.5"/>
                <circle cx="85" cy="112" r="3" fill="none" stroke="rgba(255, 103, 0, 0.3)" stroke-width="1"/>
                <circle cx="115" cy="112" r="3" fill="none" stroke="rgba(255, 103, 0, 0.3)" stroke-width="1"/>
                <circle cx="85" cy="124" r="3" fill="none" stroke="rgba(255, 103, 0, 0.3)" stroke-width="1"/>
                <circle cx="115" cy="124" r="3" fill="none" stroke="rgba(255, 103, 0, 0.3)" stroke-width="1"/>
              </g>
              <circle cx="100" cy="118" r="20" fill="transparent" class="hotspot" data-tip="Vehicle"/>
              <circle cx="175" cy="72" r="15" fill="transparent" class="hotspot" data-tip="Soft enforcement"/>
              <circle cx="175" cy="72" r="6" fill="none" stroke="#ff6700" stroke-width="2" class="visual-glow-orange" pointer-events="none"/>
              <circle cx="175" cy="72" r="2" fill="#ff6700" class="visual-glow-orange" pointer-events="none"/>
            </svg>
          </div>
          <div class="visual-hint"><span>a</span><span>p</span><span>p</span><span>l</span><span>y</span></div>
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">Spatial Training</div>
        <div class="section-body">
          Training that measures distance from failure, not just task completion.
        </div>
        <div class="current-work">Current work: crisis de-escalation with real-time margin feedback.</div>
        
        <!-- Spatial Training Interactive visual -->
        <div class="visual-container" id="training-visual">
          <div class="visual-layer layer-abstract">
            <svg viewBox="0 0 360 220">
              <g pointer-events="none">
                <circle cx="80" cy="95" r="12" fill="none" stroke="rgba(0, 212, 170, 0.4)" stroke-width="2"/>
                <line x1="80" y1="107" x2="80" y2="140" stroke="rgba(0, 212, 170, 0.4)" stroke-width="2"/>
                <line x1="80" y1="115" x2="65" y2="130" stroke="rgba(0, 212, 170, 0.4)" stroke-width="2"/>
                <line x1="80" y1="115" x2="95" y2="130" stroke="rgba(0, 212, 170, 0.4)" stroke-width="2"/>
                <line x1="80" y1="140" x2="68" y2="165" stroke="rgba(0, 212, 170, 0.4)" stroke-width="2"/>
                <line x1="80" y1="140" x2="92" y2="165" stroke="rgba(0, 212, 170, 0.4)" stroke-width="2"/>
              </g>
              <circle cx="80" cy="125" r="30" fill="transparent" class="hotspot" data-tip="Observer"/>
              <path d="M 80 70 A 55 55 0 0 1 80 180" fill="none" stroke="rgba(0, 212, 170, 0.08)" stroke-width="1" pointer-events="none"/>
              <path d="M 80 85 A 40 40 0 0 1 80 165" fill="none" stroke="rgba(0, 212, 170, 0.15)" stroke-width="1" pointer-events="none"/>
              <path d="M 80 100 A 25 25 0 0 1 80 150" fill="none" stroke="rgba(0, 212, 170, 0.25)" stroke-width="1" pointer-events="none"/>
              <path d="M 80 70 A 55 55 0 0 1 80 180 L 80 70" fill="transparent" class="hotspot" data-tip="Distance zones"/>
              <g pointer-events="none">
                <circle cx="200" cy="95" r="12" fill="none" stroke="rgba(0, 212, 170, 0.4)" stroke-width="2"/>
                <line x1="200" y1="107" x2="200" y2="140" stroke="rgba(0, 212, 170, 0.4)" stroke-width="2"/>
                <line x1="200" y1="115" x2="185" y2="130" stroke="rgba(0, 212, 170, 0.4)" stroke-width="2"/>
                <line x1="200" y1="115" x2="215" y2="130" stroke="rgba(0, 212, 170, 0.4)" stroke-width="2"/>
                <line x1="200" y1="140" x2="188" y2="165" stroke="rgba(0, 212, 170, 0.4)" stroke-width="2"/>
                <line x1="200" y1="140" x2="212" y2="165" stroke="rgba(0, 212, 170, 0.4)" stroke-width="2"/>
              </g>
              <circle cx="200" cy="125" r="30" fill="transparent" class="hotspot" data-tip="Approach"/>
              <circle cx="145" cy="125" r="12" fill="transparent" class="hotspot" data-tip="Margin"/>
              <circle cx="145" cy="125" r="5" fill="none" stroke="#00d4aa" stroke-width="2" class="visual-glow" pointer-events="none"/>
              <circle cx="145" cy="125" r="2" fill="#00d4aa" class="visual-glow" pointer-events="none"/>
              <line x1="105" y1="125" x2="175" y2="125" stroke="rgba(0, 212, 170, 0.15)" stroke-width="1" stroke-dasharray="3 3" pointer-events="none"/>
            </svg>
          </div>
          <div class="visual-layer layer-concrete">
            <svg viewBox="0 0 360 220">
              <g pointer-events="none">
                <circle cx="80" cy="95" r="12" fill="rgba(255, 103, 0, 0.2)" stroke="rgba(255, 103, 0, 0.5)" stroke-width="2"/>
                <line x1="80" y1="107" x2="80" y2="140" stroke="rgba(255, 103, 0, 0.5)" stroke-width="2"/>
                <line x1="80" y1="115" x2="65" y2="130" stroke="rgba(255, 103, 0, 0.5)" stroke-width="2"/>
                <line x1="80" y1="115" x2="95" y2="130" stroke="rgba(255, 103, 0, 0.5)" stroke-width="2"/>
                <line x1="80" y1="140" x2="68" y2="165" stroke="rgba(255, 103, 0, 0.5)" stroke-width="2"/>
                <line x1="80" y1="140" x2="92" y2="165" stroke="rgba(255, 103, 0, 0.5)" stroke-width="2"/>
              </g>
              <circle cx="80" cy="125" r="30" fill="transparent" class="hotspot" data-tip="Trainee"/>
              <path d="M 80 100 A 25 25 0 0 1 80 150" fill="none" stroke="rgba(255, 103, 0, 0.4)" stroke-width="2" stroke-dasharray="4 2" pointer-events="none"/>
              <path d="M 80 85 A 40 40 0 0 1 80 165 L 80 85" fill="transparent" class="hotspot" data-tip="Intervention threshold"/>
              <g pointer-events="none">
                <circle cx="200" cy="95" r="12" fill="rgba(255, 103, 0, 0.15)" stroke="rgba(255, 103, 0, 0.4)" stroke-width="2"/>
                <line x1="200" y1="107" x2="200" y2="140" stroke="rgba(255, 103, 0, 0.4)" stroke-width="2"/>
                <line x1="200" y1="115" x2="185" y2="130" stroke="rgba(255, 103, 0, 0.4)" stroke-width="2"/>
                <line x1="200" y1="115" x2="215" y2="130" stroke="rgba(255, 103, 0, 0.4)" stroke-width="2"/>
                <line x1="200" y1="140" x2="188" y2="165" stroke="rgba(255, 103, 0, 0.4)" stroke-width="2"/>
                <line x1="200" y1="140" x2="212" y2="165" stroke="rgba(255, 103, 0, 0.4)" stroke-width="2"/>
              </g>
              <circle cx="200" cy="125" r="30" fill="transparent" class="hotspot" data-tip="Subject"/>
              <circle cx="145" cy="125" r="15" fill="transparent" class="hotspot" data-tip="Real-time feedback"/>
              <circle cx="145" cy="125" r="6" fill="none" stroke="#ff6700" stroke-width="2" class="visual-glow-orange" pointer-events="none"/>
              <circle cx="145" cy="125" r="2" fill="#ff6700" class="visual-glow-orange" pointer-events="none"/>
            </svg>
          </div>
          <div class="visual-hint"><span>a</span><span>p</span><span>p</span><span>l</span><span>y</span></div>
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">Embodied Systems</div>
        <div class="section-body">
          Robots break things. Formalizing what not to do.
        </div>
        <div class="current-work">Current work: motion planning with dynamic collision boundaries.</div>
        
        <!-- Embodied Systems Interactive visual -->
        <div class="visual-container" id="embodied-visual">
          <div class="visual-layer layer-abstract">
            <svg viewBox="0 0 360 220">
              <rect x="60" y="150" width="30" height="10" fill="rgba(0, 212, 170, 0.2)" stroke="rgba(0, 212, 170, 0.3)" stroke-width="1" pointer-events="none"/>
              <g pointer-events="none">
                <line x1="75" y1="150" x2="130" y2="95" stroke="rgba(0, 212, 170, 0.5)" stroke-width="4" stroke-linecap="round"/>
                <circle cx="130" cy="95" r="5" fill="rgba(0, 212, 170, 0.3)" stroke="rgba(0, 212, 170, 0.5)" stroke-width="1"/>
                <line x1="130" y1="95" x2="200" y2="80" stroke="rgba(0, 212, 170, 0.5)" stroke-width="4" stroke-linecap="round"/>
                <circle cx="200" cy="80" r="4" fill="rgba(0, 212, 170, 0.4)" stroke="rgba(0, 212, 170, 0.5)" stroke-width="1"/>
              </g>
              <path d="M 75 150 L 130 95 L 200 80" fill="none" stroke="transparent" stroke-width="20" class="hotspot" data-tip="Kinematic chain"/>
              <path d="M 55 155 Q 50 140, 60 120 L 115 75 Q 130 60, 145 70 L 210 55 Q 230 55, 225 80 Q 225 100, 205 100 L 145 110 Q 130 115, 120 110 L 85 155 Q 75 165, 55 155" fill="none" stroke="rgba(0, 212, 170, 0.2)" stroke-width="1" stroke-dasharray="5 3" pointer-events="none"/>
              <path d="M 55 155 Q 50 140, 60 120 L 115 75 Q 130 60, 145 70 L 210 55 Q 230 55, 225 80 Q 225 100, 205 100 L 145 110 Q 130 115, 120 110 L 85 155 Q 75 165, 55 155" fill="transparent" class="hotspot" data-tip="Collision envelope"/>
              <rect x="250" y="70" width="35" height="35" fill="none" stroke="rgba(0, 212, 170, 0.25)" stroke-width="1" pointer-events="none"/>
              <rect x="245" y="65" width="45" height="45" fill="transparent" class="hotspot" data-tip="Obstacle"/>
              <circle cx="228" cy="78" r="12" fill="transparent" class="hotspot" data-tip="Clearance margin"/>
              <circle cx="228" cy="78" r="5" fill="none" stroke="#00d4aa" stroke-width="2" class="visual-glow" pointer-events="none"/>
              <circle cx="228" cy="78" r="2" fill="#00d4aa" class="visual-glow" pointer-events="none"/>
              <line x1="210" y1="75" x2="250" y2="82" stroke="rgba(0, 212, 170, 0.15)" stroke-width="1" stroke-dasharray="3 3" pointer-events="none"/>
            </svg>
          </div>
          <div class="visual-layer layer-concrete">
            <svg viewBox="0 0 360 220">
              <rect x="60" y="150" width="30" height="10" fill="rgba(255, 103, 0, 0.25)" stroke="rgba(255, 103, 0, 0.4)" stroke-width="1" pointer-events="none"/>
              <g pointer-events="none">
                <line x1="75" y1="150" x2="130" y2="95" stroke="rgba(255, 103, 0, 0.5)" stroke-width="6" stroke-linecap="round"/>
                <circle cx="130" cy="95" r="6" fill="rgba(255, 103, 0, 0.3)" stroke="rgba(255, 103, 0, 0.5)" stroke-width="2"/>
                <line x1="130" y1="95" x2="200" y2="80" stroke="rgba(255, 103, 0, 0.5)" stroke-width="5" stroke-linecap="round"/>
                <line x1="200" y1="80" x2="212" y2="72" stroke="rgba(255, 103, 0, 0.4)" stroke-width="2"/>
                <line x1="200" y1="80" x2="212" y2="88" stroke="rgba(255, 103, 0, 0.4)" stroke-width="2"/>
              </g>
              <path d="M 75 150 L 130 95 L 200 80" fill="none" stroke="transparent" stroke-width="25" class="hotspot" data-tip="Robot arm"/>
              <path d="M 55 155 Q 50 140, 60 120 L 115 75 Q 130 60, 145 70 L 210 55 Q 230 55, 225 80 Q 225 100, 205 100 L 145 110 Q 130 115, 120 110 L 85 155 Q 75 165, 55 155" fill="none" stroke="rgba(255, 103, 0, 0.3)" stroke-width="2" stroke-dasharray="6 3" pointer-events="none"/>
              <path d="M 55 155 Q 50 140, 60 120 L 115 75 Q 130 60, 145 70 L 210 55 Q 230 55, 225 80 Q 225 100, 205 100 L 145 110 Q 130 115, 120 110 L 85 155 Q 75 165, 55 155" fill="transparent" class="hotspot" data-tip="Dynamic boundary"/>
              <g pointer-events="none">
                <rect x="250" y="70" width="35" height="35" fill="rgba(255, 103, 0, 0.15)" stroke="rgba(255, 103, 0, 0.35)" stroke-width="2"/>
                <line x1="250" y1="70" x2="258" y2="62" stroke="rgba(255, 103, 0, 0.2)" stroke-width="1"/>
                <line x1="285" y1="70" x2="293" y2="62" stroke="rgba(255, 103, 0, 0.2)" stroke-width="1"/>
                <line x1="258" y1="62" x2="293" y2="62" stroke="rgba(255, 103, 0, 0.2)" stroke-width="1"/>
              </g>
              <rect x="245" y="58" width="55" height="52" fill="transparent" class="hotspot" data-tip="Object"/>
              <circle cx="228" cy="78" r="15" fill="transparent" class="hotspot" data-tip="Safe clearance"/>
              <circle cx="228" cy="78" r="6" fill="none" stroke="#ff6700" stroke-width="2" class="visual-glow-orange" pointer-events="none"/>
              <circle cx="228" cy="78" r="2" fill="#ff6700" class="visual-glow-orange" pointer-events="none"/>
            </svg>
          </div>
          <div class="visual-hint"><span>a</span><span>p</span><span>p</span><span>l</span><span>y</span></div>
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">Built on RCOT</div>
        <div class="tech-block">
          <p>Restraint Continuity Observation Translation</p>
          <p>Patent pending: US Application #19/448,772</p>
          <p>OpenXR compatible · Unity integration path</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Contact Page -->
  <div id="contact-page" class="page">
    <div class="page-content">
      <h2>CONTACT CO<sup>3</sup> ONE</h2>
      
      <div class="contact-section">
        <form id="contact-form" action="https://formsubmit.co/founder@co3.one" method="POST">
          <input type="hidden" name="_captcha" value="true">
          <input type="hidden" name="_subject" value="Co³ One Contact Form">
          <input type="hidden" name="_template" value="table">
          <input type="hidden" name="_next" value="https://co3.one">
          <div class="form-group">
            <input type="text" name="name" placeholder="Name" required>
          </div>
          <div class="form-group">
            <input type="email" name="email" placeholder="Email" required>
          </div>
          <div class="form-group">
            <textarea name="message" placeholder="Message" rows="4" required></textarea>
          </div>
          <button type="submit">Send</button>
        </form>
      </div>
      
      <div class="social-links" style="margin-top: 1.2rem; justify-content: flex-start;">
        <a href="https://substack.com/@co3one" target="_blank" class="social-link">Substack</a>
        <a href="https://github.com/rickymp3" target="_blank" class="social-link">GitHub</a>
        <a href="https://www.instagram.com/co3.one" target="_blank" class="social-link">Instagram</a>
        <a href="https://www.youtube.com/@CO3ONE" target="_blank" class="social-link">YouTube</a>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    // ============ THREE.JS WIREFRAME BACKGROUND ============
    (function() {
      try {
        if (typeof THREE === 'undefined') return;
        
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x000000);
        
        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 12, 0.01);
        camera.lookAt(0, 0, 0);
        
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        container.appendChild(renderer.domElement);
        
        const gridColor = 0x4a4a4a;
        const gridRadius = 5;
        const wellDepth = 3;
        const wellSharpness = 1.4;
        
        window.threeSpeedMultiplier = 1.67;
        window.threeTargetSpeed = 1.67;
        
        function calculateWellZ(r) {
          const normalizedR = r / gridRadius;
          const z = -wellDepth * Math.pow(1 - normalizedR, wellSharpness) / (normalizedR + 0.1);
          return Math.max(z, -wellDepth * 3.5);
        }
        
        const numRings = 21;
        const ringLifespans = [];
        const ringsGroup = new THREE.Group();
        
        // Track wireframe state: 'splash', 'transition', 'idle'
        window.threeWireframeState = 'splash';
        
        for (let i = 0; i < numRings; i++) {
          // Random direction: 1 = inward, -1 = outward (used during transitions)
          const direction = Math.random() > 0.5 ? 1 : -1;
          // Random transparency modifier: 25% of rings get 25-75% more transparent
          const isMoreTransparent = Math.random() < 0.25;
          const transparencyMod = isMoreTransparent ? (0.25 + Math.random() * 0.5) : 1;
          
          ringLifespans.push({ 
            progress: i / numRings, 
            baseSpeed: 0.015 + Math.random() * 0.008,  // Much slower
            direction: direction,
            transparencyMod: transparencyMod
          });
          const geometry = new THREE.BufferGeometry();
          const positions = new Float32Array(73 * 3);
          geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
          const material = new THREE.LineBasicMaterial({ color: gridColor, transparent: true, opacity: 0.7 });
          ringsGroup.add(new THREE.Line(geometry, material));
        }
        scene.add(ringsGroup);
        
        // Travelling points: doubled count, moving outward from center
        const numPoints = numRings * 2;
        const pointData = [];
        const pointsGroup = new THREE.Group();
        const minAngleSeparation = Math.PI / 8;  // Smaller separation for more points
        
        // Function to find a valid angle that's not too close to other spawning points
        function findValidAngle() {
          const maxAttempts = 20;
          for (let attempt = 0; attempt < maxAttempts; attempt++) {
            const candidateAngle = Math.random() * Math.PI * 2;
            let isValid = true;
            
            // Check against other points that are currently spawning (progress < 0.2)
            for (const other of pointData) {
              if (other.progress < 0.2) {
                let angleDiff = Math.abs(candidateAngle - other.angle);
                if (angleDiff > Math.PI) angleDiff = Math.PI * 2 - angleDiff;
                if (angleDiff < minAngleSeparation) {
                  isValid = false;
                  break;
                }
              }
            }
            
            if (isValid) return candidateAngle;
          }
          return Math.random() * Math.PI * 2;
        }
        
        for (let i = 0; i < numPoints; i++) {
          const angle = (i / numPoints) * Math.PI * 2 + Math.random() * 0.2;
          
          // Varied sizes: most small (2), some medium (3), few large (4)
          let size;
          const sizeRoll = Math.random();
          if (sizeRoll < 0.5) {
            size = 2;  // 50% small
          } else if (sizeRoll < 0.85) {
            size = 3;  // 35% medium
          } else {
            size = 4;  // 15% large
          }
          
          pointData.push({ 
            angle, 
            progress: Math.random(),
            baseSpeed: 0.008 + Math.random() * 0.006,
            orbitMod: 0.5 + Math.random() * 1.0
          });
          
          // Single point
          const geometry = new THREE.BufferGeometry();
          geometry.setAttribute('position', new THREE.BufferAttribute(new Float32Array(3), 3));
          const material = new THREE.PointsMaterial({ 
            color: gridColor, 
            transparent: true, 
            opacity: 0.6,
            size: size,
            sizeAttenuation: false
          });
          pointsGroup.add(new THREE.Points(geometry, material));
        }
        scene.add(pointsGroup);
        
        function updateRings(delta) {
          const solidity = window.getWireframeSolidity ? window.getWireframeSolidity() : 0;
          
          // Glow based on solidity (brighter when solid)
          const glowMultiplier = 0.7 + solidity * 0.5;
          
          ringsGroup.children.forEach((ring, i) => {
            const ls = ringLifespans[i];
            ls.progress += ls.baseSpeed * delta * window.threeSpeedMultiplier;
            if (ls.progress > 1) ls.progress = 0;
            if (ls.progress < 0) ls.progress = 1;
            
            // Always use inward motion (splash behavior)
            const r = (1 - ls.progress) * gridRadius;
            
            const pos = ring.geometry.attributes.position.array;
            for (let j = 0; j <= 72; j++) {
              const theta = (j / 72) * Math.PI * 2;
              pos[j*3] = r * Math.cos(theta);
              pos[j*3+1] = calculateWellZ(r);
              pos[j*3+2] = r * Math.sin(theta);
            }
            ring.geometry.attributes.position.needsUpdate = true;
            
            // Opacity: fade more as rings approach center
            // ls.progress goes 0→1 as ring moves inward, r goes gridRadius→0
            let baseOpacity = ls.progress * ls.transparencyMod * 0.7 * 0.7;
            
            // Extra fade for inner rings (when progress > 0.7, meaning inner 30% of radius)
            if (ls.progress > 0.7) {
              const innerFade = 1 - ((ls.progress - 0.7) / 0.3);
              baseOpacity *= innerFade;
            }
            
            ring.material.opacity = baseOpacity;
            
            // Brightness
            const brightness = 0.32;
            ring.material.color.setRGB(brightness, brightness, brightness);
          });
        }
        
        function updatePoints(delta, mouseX, mouseY, mouseInfluence) {
          // Convert mouse position to 3D world coordinates on the funnel surface
          const mouseWorldX = (mouseX - 0.5) * gridRadius * 2;
          const mouseWorldZ = (mouseY - 0.5) * gridRadius * 2;
          
          pointData.forEach((point, i) => {
            // Progress: 0 = at edge, 1 = at center and faded
            point.progress += point.baseSpeed * delta * window.threeSpeedMultiplier;
            
            // Respawn when complete
            if (point.progress >= 1) {
              point.progress = 0;
              point.angle = findValidAngle();
            }
            
            const pointMesh = pointsGroup.children[i];
            const pos = pointMesh.geometry.attributes.position.array;
            
            const outerMax = gridRadius * 0.95;
            const innerMin = gridRadius * 0.25;
            
            // Current radius - travels inward
            const r = outerMax - (outerMax - innerMin) * point.progress;
            
            // Base position
            let x = r * Math.cos(point.angle);
            let z = r * Math.sin(point.angle);
            
            // Calculate distance from mouse in world space
            const dx = x - mouseWorldX;
            const dz = z - mouseWorldZ;
            const distFromMouse = Math.sqrt(dx * dx + dz * dz);
            
            // Influence radius - points within this distance are affected
            const influenceRadius = gridRadius * 0.4;
            
            // Apply mouse repulsion to nearby points
            if (mouseInfluence > 0.01 && distFromMouse < influenceRadius) {
              const proximityFactor = 1 - (distFromMouse / influenceRadius);
              const repelStrength = proximityFactor * proximityFactor * 0.15 * mouseInfluence * point.orbitMod;
              
              // Push point away from mouse
              const angle = Math.atan2(dz, dx);
              x += Math.cos(angle) * repelStrength * gridRadius;
              z += Math.sin(angle) * repelStrength * gridRadius;
            }
            
            pos[0] = x;
            pos[1] = calculateWellZ(r);
            pos[2] = z;
            
            // Opacity: fade in near edge, full in middle, fade out near center
            let opacity;
            if (point.progress < 0.15) {
              opacity = 0.5 * (point.progress / 0.15);
            } else if (point.progress < 0.7) {
              opacity = 0.5;
            } else {
              opacity = 0.5 * (1 - (point.progress - 0.7) / 0.3);
            }
            
            // Boost opacity for points near mouse
            if (mouseInfluence > 0.01 && distFromMouse < influenceRadius) {
              const proximityFactor = 1 - (distFromMouse / influenceRadius);
              opacity = Math.min(0.8, opacity + proximityFactor * 0.3 * mouseInfluence);
            }
            
            pointMesh.geometry.attributes.position.needsUpdate = true;
            pointMesh.material.opacity = opacity;
            pointMesh.material.color.setRGB(0.32, 0.32, 0.32);
          });
        }
        
        // Mouse interaction (only on splash)
        let mouseX = 0.5;
        let mouseY = 0.5;
        let targetMouseX = 0.5;
        let targetMouseY = 0.5;
        let mouseInfluence = 0;
        let targetMouseInfluence = 0;
        
        document.addEventListener('mousemove', (e) => {
          targetMouseX = e.clientX / window.innerWidth;
          targetMouseY = e.clientY / window.innerHeight;
        });
        
        // Expose controls
        window.setMouseInfluence = (val) => { targetMouseInfluence = val; };
        
        function animate() {
          requestAnimationFrame(animate);
          // Slower speed easing
          window.threeSpeedMultiplier += (window.threeTargetSpeed - window.threeSpeedMultiplier) * 0.008;
          
          // Smooth mouse tracking (slower reactions)
          mouseX += (targetMouseX - mouseX) * 0.02;
          mouseY += (targetMouseY - mouseY) * 0.02;
          mouseInfluence += (targetMouseInfluence - mouseInfluence) * 0.008;
          
          // When mouse influence is dropping, smoothly return mouse position to center
          if (targetMouseInfluence < 0.5) {
            targetMouseX += (0.5 - targetMouseX) * 0.02;
            targetMouseY += (0.5 - targetMouseY) * 0.02;
          }
          
          // Apply mouse influence to camera tilt (always update for smooth return)
          // Removed rotation - just keep camera static
          camera.position.x = 0;
          camera.position.z = 0.01;
          camera.lookAt(0, 0, 0);
          
          // Mouse Y affects speed (top = faster, bottom = slower) - only on splash
          if (mouseInfluence > 0.1) {
            const speedMod = 0.7 + (1 - mouseY) * 0.6;
            window.threeTargetSpeed = speedMod;
          } else {
            window.threeTargetSpeed = 1;
          }
          
          updateRings(0.016);
          updatePoints(0.016, mouseX, mouseY, mouseInfluence);
          renderer.render(scene, camera);
        }
        
        animate();
        
        window.addEventListener('resize', () => {
          camera.aspect = window.innerWidth / window.innerHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(window.innerWidth, window.innerHeight);
        });
      } catch(e) { console.warn('3D disabled:', e); }
    })();
    
    // ============ NAVIGATION ============
    const logoText = document.getElementById('logo-text');
    const logoRing = document.getElementById('logo-ring');
    const logoRingMid = document.getElementById('logo-ring-mid');
    const logoRingOuter = document.getElementById('logo-ring-outer');
    const nav = document.getElementById('nav');
    const pages = document.querySelectorAll('.page');
    const navLinks = document.querySelectorAll('[data-page]');
    const transitionOverlay = document.getElementById('transition-overlay');
    
    var currentPage = 'splash';
    let isTransitioning = false;
    let autoReturnTimer = null;
    const AUTO_RETURN_MS = 5 * 60 * 1000;
    
    // Enable mouse influence on splash (initial state)
    setTimeout(() => {
      if (window.setMouseInfluence) window.setMouseInfluence(1);
    }, 100);
    
    // Hide banner initially (splash page)
    setTimeout(() => {
      const banner = document.getElementById('site-banner');
      if (banner) banner.classList.add('hidden');
    }, 50);
    
    function resetAutoReturn() {
      if (autoReturnTimer) clearTimeout(autoReturnTimer);
      if (currentPage !== 'splash') {
        autoReturnTimer = setTimeout(() => navigateTo('splash'), AUTO_RETURN_MS);
      }
    }
    
    document.addEventListener('mousemove', resetAutoReturn);
    document.addEventListener('touchstart', resetAutoReturn);
    document.addEventListener('scroll', resetAutoReturn);
    
    function revealNav() {
      const vertices = document.querySelectorAll('.nav-vertex');
      
      vertices.forEach((v, i) => {
        setTimeout(() => {
          v.classList.add('revealed');
        }, i * 50);
      });
    }
    
    function hideNav() {
      const vertices = document.querySelectorAll('.nav-vertex');
      vertices.forEach(v => v.classList.remove('revealed'));
      if (nav) nav.classList.remove('expanded');
    }
    
    function toggleNav() {
      if (!nav) return;
      if (nav.classList.contains('expanded')) {
        collapseNav();
      } else {
        expandNav();
      }
    }
    
    function expandNav() {
      if (nav) nav.classList.add('expanded');
      setTimeout(revealNav, 50);
    }
    
    function collapseNav() {
      hideNav();
    }
    
    // Corner logo visibility
    const cornerLogo = document.getElementById('corner-logo');
    const cornerLogoTeal = document.getElementById('corner-logo-teal');
    
    function updateCornerLogos(page) {
      // Hide both on splash and lab pages
      if (page === 'splash' || page === 'lab') {
        if (cornerLogo) cornerLogo.classList.remove('visible');
        if (cornerLogoTeal) cornerLogoTeal.classList.remove('visible');
      }
      // Show teal on applications pages (hardware, software, applications)
      else if (page === 'hardware' || page === 'software' || page === 'applications') {
        if (cornerLogo) cornerLogo.classList.remove('visible');
        if (cornerLogoTeal) cornerLogoTeal.classList.add('visible');
      }
      // Show orange on all other pages
      else {
        if (cornerLogo) cornerLogo.classList.add('visible');
        if (cornerLogoTeal) cornerLogoTeal.classList.remove('visible');
      }
    }
    
    // Corner logo click handlers
    if (cornerLogo) {
      cornerLogo.addEventListener('click', (e) => {
        e.preventDefault();
        navigateTo('splash');
      });
    }
    if (cornerLogoTeal) {
      cornerLogoTeal.addEventListener('click', (e) => {
        e.preventDefault();
        navigateTo('splash');
      });
    }
    
    // Nav toggle click handler
    const navToggle = document.getElementById('nav-toggle');
    if (navToggle) {
      navToggle.addEventListener('click', (e) => {
        e.stopPropagation();
        toggleNav();
      });
    }
    
    // Close nav when clicking outside
    document.addEventListener('click', (e) => {
      if (nav && nav.classList.contains('expanded') && !nav.contains(e.target)) {
        collapseNav();
      }
    });
    
    function navigateTo(page) {
      if (page === currentPage || isTransitioning) return;
      
      // If leaving lab page, stop sim and mark exit
      if (currentPage === 'lab' && alignmentState && alignmentState.running) {
        if (alignmentState.distanceHistory.length > 0) {
          alignmentState.exitMarkers.push(alignmentState.distanceHistory.length - 1);
        }
        alignmentState.running = false;
        const runBtn = document.getElementById('alignment-btn-run');
        if (runBtn) {
          runBtn.textContent = '▶ Run';
          runBtn.classList.remove('active');
        }
      }
      
      // Hide nav on lab page
      if (page === 'lab') {
        if (nav) nav.classList.remove('visible');
        if (window.setMouseInfluence) window.setMouseInfluence(0);
      }
      
      // Check if we're leaving teal theme
      const wasInTealTheme = document.body.classList.contains('theme-teal');
      
      // Hide applications splash and doors if visible
      const appSplash = document.getElementById('applications-splash');
      const doorsOverlay = document.getElementById('doors');
      if (appSplash) appSplash.classList.remove('visible');
      if (doorsOverlay) doorsOverlay.classList.remove('visible');
      document.querySelectorAll('.app-splash-ring').forEach(r => r.style.display = 'none');
      
      // Fade out teal corner logo and nav together if leaving teal theme (0.4s)
      if (wasInTealTheme) {
        if (cornerLogoTeal) cornerLogoTeal.classList.remove('visible');
        if (nav) nav.classList.remove('visible');
      }
      
      // Delay theme removal until after fade completes
      setTimeout(() => {
        document.body.classList.remove('theme-teal');
      }, wasInTealTheme ? 450 : 0);
      
      const fromSplash = currentPage === 'splash';
      const toSplash = page === 'splash';
      
      isTransitioning = true;
      updateBannerVisibility(page, true);
      
      // If navigating between non-splash pages, keep nav visible
      if (!fromSplash && !toSplash) {
        // Direct transition - just swap content
        pages.forEach(p => p.classList.remove('active'));
        
        // If coming from teal theme, wait for fade then show nav
        const navDelay = wasInTealTheme ? 400 : 0;
        
        setTimeout(() => {
          const targetPageEl = document.getElementById(page + '-page');
          if (targetPageEl) targetPageEl.classList.add('active');
          
          // Show nav after theme switch
          if (wasInTealTheme && nav) {
            nav.classList.add('visible');
          }
          
          navLinks.forEach(link => {
            link.classList.toggle('active', link.dataset.page === page);
          });
          
          currentPage = page;
          updateBannerVisibility(page, false);
          updateCornerLogos(page);
          resetAutoReturn();
          
          const activePage = document.querySelector('.page.active');
          if (activePage) activePage.scrollTop = 0;
          
          isTransitioning = false;
        }, 400 + navDelay);
        
        return;
      }
      
      // Full transition (to/from splash)
      pages.forEach(p => p.classList.remove('active'));
      nav.classList.remove('visible');
      hideNav();
      
      if (toSplash) {
        // Going TO splash - restore logo elements
        logoText.classList.remove('dimmed');
        logoText.classList.remove('hidden');
        logoRing.classList.remove('hidden');
        logoRing.classList.remove('dimmed');
        logoRingMid.classList.remove('hidden');
        logoRingMid.classList.remove('dimmed');
        logoRingOuter.classList.remove('hidden');
        logoRingOuter.classList.remove('dimmed');
        const logoRingStatic = document.getElementById('logo-ring-static');
        if (logoRingStatic) {
          logoRingStatic.classList.remove('hidden');
          logoRingStatic.classList.remove('dimmed');
        }
        const logoBelow = document.getElementById('logo-below');
        if (logoBelow) logoBelow.classList.remove('hidden');
        if (window.setMouseInfluence) window.setMouseInfluence(1);
        
        setTimeout(() => {
          if (autoReturnTimer) clearTimeout(autoReturnTimer);
          navLinks.forEach(link => {
            link.classList.toggle('active', link.dataset.page === page);
          });
          currentPage = page;
          updateBannerVisibility(page, false);
          updateCornerLogos(page);
          isTransitioning = false;
        }, 1200);
      } else {
        // Going FROM splash to a page - dim logo and rings, show content simultaneously
        logoText.classList.add('dimmed');
        logoRing.classList.add('dimmed');
        logoRingMid.classList.add('dimmed');
        logoRingOuter.classList.add('dimmed');
        const logoRingStatic = document.getElementById('logo-ring-static');
        if (logoRingStatic) logoRingStatic.classList.add('dimmed');
        const logoBelow = document.getElementById('logo-below');
        if (logoBelow) logoBelow.classList.add('hidden');
        if (window.setMouseInfluence) window.setMouseInfluence(0);
        
        // Show page content almost immediately (heavy overlap with logo fade)
        setTimeout(() => {
          const targetPageEl = document.getElementById(page + '-page');
          if (targetPageEl) targetPageEl.classList.add('active');
        }, 60);
        
        // Show nav and corner logo together
        setTimeout(() => {
          if (nav) nav.classList.add('visible');
          updateCornerLogos(page);
        }, 240);
        
        // Mark transition complete after logo fade finishes
        setTimeout(() => {
          resetAutoReturn();
          
          navLinks.forEach(link => {
            link.classList.toggle('active', link.dataset.page === page);
          });
          
          currentPage = page;
          updateBannerVisibility(page, false);
          
          const activePage = document.querySelector('.page.active');
          if (activePage) activePage.scrollTop = 0;
          
          isTransitioning = false;
        }, 1200);
      }
    }
    
    // Banner visibility - hidden on about, rcott, contact, patent, and during transitions
    function updateBannerVisibility(page, transitioning) {
      const banner = document.getElementById('site-banner');
      if (!banner) return;
      const hiddenPages = ['about', 'rcott', 'contact', 'patent', 'splash', 'lab'];
      if (transitioning || hiddenPages.includes(page)) {
        banner.classList.add('hidden');
      } else {
        banner.classList.remove('hidden');
      }
    }
    
    // Logo click now handled in doors overlay section below
    // logoText.addEventListener('click', () => navigateTo('about'));
    
    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const page = link.dataset.page;
        // Skip applications - handled by doors overlay section
        if (page === 'applications') {
          collapseNav();
          return;
        }
        collapseNav();
        navigateTo(page);
      });
    });
    
    // ============ INVARIANT TOGGLE ============
    const invariantItems = document.querySelectorAll('.invariant-item');
    const gateResult = document.getElementById('gate-result');
    
    function updateGate() {
      const values = Array.from(invariantItems).map(item => item.classList.contains('checked') ? 1 : 0);
      const product = values.reduce((a, b) => a * b, 1);
      gateResult.innerHTML = `G = ${values.join(' × ')} = <strong>${product}</strong> (${product === 1 ? 'PASS' : 'FAIL'})`;
      gateResult.className = 'gate-result ' + (product === 1 ? 'pass' : 'fail');
    }
    
    invariantItems.forEach(item => {
      item.addEventListener('click', () => {
        item.classList.toggle('checked');
        updateGate();
      });
    });
    
    // ============ LAB ACCESS CONTROL ============
    const labGate = document.getElementById('lab-gate');
    const labContent = document.getElementById('lab-content');
    const labLogout = document.getElementById('lab-logout');
    
    // Disclaimer elements
    const disclaimerPrompt = document.getElementById('disclaimer-prompt');
    const disclaimerScroll = document.getElementById('disclaimer-scroll');
    const acceptCheckbox = document.getElementById('accept-checkbox');
    const acceptBtn = document.getElementById('accept-btn');
    const acceptBtnText = document.getElementById('accept-btn-text');
    
    let disclaimerTimer = null;
    let countdownRemaining = 10;
    let hasScrolledToBottom = false;
    let checkboxChecked = false;
    let disclaimerStarted = false;
    
    // Check for existing session
    function checkSession() {
      const session = sessionStorage.getItem('lab_session');
      if (session) {
        labGate.classList.add('hidden');
        labContent.classList.add('visible');
        showDemo();
      }
    }
    
    // Start disclaimer countdown when lab page becomes visible
    function startDisclaimerCountdown() {
      if (disclaimerStarted) return;
      disclaimerStarted = true;
      
      countdownRemaining = 10;
      hasScrolledToBottom = false;
      checkboxChecked = false;
      if (acceptCheckbox) acceptCheckbox.classList.remove('checked');
      updateAcceptButton();
      
      disclaimerTimer = setInterval(() => {
        countdownRemaining--;
        updateAcceptButton();
        
        if (countdownRemaining <= 0) {
          clearInterval(disclaimerTimer);
        }
      }, 1000);
    }
    
    // Track scrolling to bottom
    if (disclaimerScroll) {
      disclaimerScroll.addEventListener('scroll', () => {
        const scrollTop = disclaimerScroll.scrollTop;
        const scrollHeight = disclaimerScroll.scrollHeight;
        const clientHeight = disclaimerScroll.clientHeight;
        
        // Check if scrolled to bottom (within 20px)
        if (scrollTop + clientHeight >= scrollHeight - 20) {
          hasScrolledToBottom = true;
          updateAcceptButton();
        }
      });
    }
    
    // Checkbox toggle
    if (acceptCheckbox) {
      acceptCheckbox.addEventListener('click', () => {
        checkboxChecked = !checkboxChecked;
        acceptCheckbox.classList.toggle('checked', checkboxChecked);
        updateAcceptButton();
      });
    }
    
    function updateAcceptButton() {
      const canAccept = countdownRemaining <= 0 && hasScrolledToBottom && checkboxChecked;
      
      if (acceptBtn) acceptBtn.disabled = !canAccept;
      
      if (acceptBtnText) {
        if (countdownRemaining > 0) {
          acceptBtnText.textContent = `Please scroll to read (${countdownRemaining}s)`;
        } else if (!hasScrolledToBottom) {
          acceptBtnText.textContent = 'Please scroll to the bottom';
        } else if (!checkboxChecked) {
          acceptBtnText.textContent = 'Please check the box above';
        } else {
          acceptBtnText.textContent = 'Accept & Continue';
        }
      }
    }
    
    // Accept button - complete access
    if (acceptBtn) {
      acceptBtn.addEventListener('click', () => {
        if (acceptBtn.disabled) return;
        
        sessionStorage.setItem('lab_session', JSON.stringify({
          timestamp: Date.now()
        }));
        
        labGate.classList.add('hidden');
        setTimeout(() => {
          labContent.classList.add('visible');
          showDemo();
        }, 100);
        
        if (disclaimerTimer) clearInterval(disclaimerTimer);
      });
    }
    
    // ============ DEV CONFIG ============
    // Toggle which demo shows by default: 'alignment' | '404'
    const DEFAULT_DEMO = 'alignment';
    
    // Show the demo
    function showDemo() {
      document.querySelectorAll('.demo-view').forEach(el => {
        el.style.display = 'none';
      });
      
      const demoId = 'demo-' + DEFAULT_DEMO;
      const targetDemo = document.getElementById(demoId);
      if (targetDemo) {
        targetDemo.style.display = 'block';
      }
      
      // Initialize demos as needed
      if (DEFAULT_DEMO === 'alignment' && typeof initAlignmentDemo === 'function') {
        initAlignmentDemo();
      }
    }
    
    // Logout function
    function handleLogout() {
      sessionStorage.removeItem('lab_session');
      labContent.classList.remove('visible');
      labGate.classList.remove('hidden');
      
      // Reset disclaimer state
      disclaimerStarted = false;
      countdownRemaining = 10;
      hasScrolledToBottom = false;
      checkboxChecked = false;
      if (acceptCheckbox) acceptCheckbox.classList.remove('checked');
      if (disclaimerScroll) disclaimerScroll.scrollTop = 0;
      updateAcceptButton();
      
      if (disclaimerTimer) clearInterval(disclaimerTimer);
    }
    
    // Logout button
    if (labLogout) {
      labLogout.addEventListener('click', handleLogout);
    }
    
    // Check session on page load
    checkSession();
    
    // Handle hash-based navigation (e.g., co3.one/#lab)
    function handleHashNavigation() {
      const hash = window.location.hash.slice(1).toLowerCase();
      if (hash && ['about', 'framework', 'contact', 'lab'].includes(hash)) {
        navigateTo(hash);
      }
    }
    
    // Check hash on load and on hash change
    handleHashNavigation();
    window.addEventListener('hashchange', handleHashNavigation);
    
    // Show correct demo view when lab content becomes visible
    const labContentObserver = new MutationObserver((mutations) => {
      mutations.forEach((mutation) => {
        if (mutation.target.classList.contains('visible')) {
          showDemo();
        }
      });
    });
    labContentObserver.observe(labContent, { attributes: true, attributeFilter: ['class'] });
    
    // ============ ALIGNMENT DEMO SIMULATION ============
    let alignmentState = null;
    let alignmentAnimFrame = null;
    let alignmentInitialized = false;

    function initAlignmentDemo() {
      // Cancel any existing animation frame
      if (alignmentAnimFrame !== null) {
        cancelAnimationFrame(alignmentAnimFrame);
        alignmentAnimFrame = null;
      }
      
      alignmentState = {
        x: 0.5, y: 0.5, vx: 0, vy: 0,
        history: [],
        distanceHistory: [],
        manualSteps: [],
        pauseMarkers: [],
        exitMarkers: [],
        epsilon: 0.15, capability: 9, beta: 0.2,
        distance: 0.847, coherence: 0.923, coherenceTrend: 0.003, ttbc: Infinity,
        running: false, step: 0, failed: false
      };
      
      const stateCanvas = document.getElementById('alignment-state-canvas');
      const phaseCanvas = document.getElementById('alignment-phase-canvas');
      const sparkCanvas = document.getElementById('alignment-sparkline-canvas');
      if (!stateCanvas || !phaseCanvas || !sparkCanvas) return;
      
      const stateCtx = stateCanvas.getContext('2d');
      const phaseCtx = phaseCanvas.getContext('2d');
      const sparkCtx = sparkCanvas.getContext('2d');
      
      function resizeCanvases() {
        const dpr = window.devicePixelRatio || 1;
        [stateCanvas, phaseCanvas].forEach(canvas => {
          const rect = canvas.getBoundingClientRect();
          canvas.width = rect.width * dpr;
          canvas.height = rect.height * dpr;
          canvas.getContext('2d').scale(dpr, dpr);
        });
        const sparkRect = sparkCanvas.getBoundingClientRect();
        sparkCanvas.width = sparkRect.width * dpr;
        sparkCanvas.height = sparkRect.height * dpr;
        sparkCtx.scale(dpr, dpr);
      }
      
      function computeBoundaryDistance(x, y) {
        const baseRadius = 0.45;
        const epsilonEffect = alignmentState.epsilon * 0.8;
        const capabilityEffect = Math.log10(Math.pow(10, alignmentState.capability)) / 15 * 0.2;
        const effectiveRadius = Math.max(0.05, baseRadius - epsilonEffect + capabilityEffect * 0.3);
        const distToCenter = Math.sqrt((x - 0.5) ** 2 + (y - 0.5) ** 2);
        return Math.max(0, Math.min(1, (effectiveRadius - distToCenter) / effectiveRadius));
      }
      
      function computeCoherence() {
        const epsilonPenalty = alignmentState.epsilon * 0.5;
        const distanceBonus = alignmentState.distance * 0.3;
        const capabilityPressure = (alignmentState.capability - 6) / 9 * alignmentState.epsilon * 0.3;
        const noise = (Math.random() - 0.5) * 0.02;
        return Math.max(0, Math.min(1, 0.95 - epsilonPenalty + distanceBonus - capabilityPressure + noise));
      }
      
      function computeBoundaryAvoidance() {
        const dx = alignmentState.x - 0.5, dy = alignmentState.y - 0.5;
        const distToCenter = Math.sqrt(dx * dx + dy * dy);
        if (distToCenter < 0.01) return { x: 0, y: 0 };
        const strength = (1 - alignmentState.distance) * 0.5;
        return { x: -dx / distToCenter * strength, y: -dy / distToCenter * strength };
      }
      
      function simulateStep() {
        if (alignmentState.failed) return;
        alignmentState.step++;
        alignmentState.history.push({ x: alignmentState.x, y: alignmentState.y });
        
        const rewardDir = { x: 0.5 + alignmentState.epsilon * 0.4 - alignmentState.x, y: 0.5 + alignmentState.epsilon * 0.3 - alignmentState.y };
        const klDrift = { x: (Math.random() - 0.5) * alignmentState.beta, y: (Math.random() - 0.5) * alignmentState.beta };
        const boundaryForce = computeBoundaryAvoidance();
        const speed = 0.01 * (1 + (alignmentState.capability - 6) / 9 * 0.5);
        const rewardWeight = 0.5 + alignmentState.epsilon * 1.5;
        const boundaryWeight = 1.0 - alignmentState.epsilon * 0.8;
        
        alignmentState.vx = (rewardDir.x * rewardWeight * 0.1 + klDrift.x + boundaryForce.x * boundaryWeight) * speed;
        alignmentState.vy = (rewardDir.y * rewardWeight * 0.1 + klDrift.y + boundaryForce.y * boundaryWeight) * speed;
        alignmentState.x = Math.max(0.05, Math.min(0.95, alignmentState.x + alignmentState.vx));
        alignmentState.y = Math.max(0.05, Math.min(0.95, alignmentState.y + alignmentState.vy));
        
        const prevDistance = alignmentState.distance;
        alignmentState.distance = computeBoundaryDistance(alignmentState.x, alignmentState.y);
        const prevCoherence = alignmentState.coherence;
        alignmentState.coherence = computeCoherence();
        alignmentState.coherenceTrend = alignmentState.coherence - prevCoherence;
        
        const distanceTrend = alignmentState.distance - prevDistance;
        alignmentState.ttbc = distanceTrend < -0.001 ? Math.max(1, Math.floor(alignmentState.distance / Math.abs(distanceTrend))) : Infinity;
        
        alignmentState.distanceHistory.push(alignmentState.distance);
        
        if (alignmentState.distance < 0.02) { alignmentState.failed = true; alignmentState.running = false; }
      }
      
      function simulateFutureStep(x, y, vx, vy) {
        // One step of simulation with current parameters
        const rewardDir = { x: 0.5 + alignmentState.epsilon * 0.4 - x, y: 0.5 + alignmentState.epsilon * 0.3 - y };
        const klDrift = { x: (Math.random() - 0.5) * alignmentState.beta, y: (Math.random() - 0.5) * alignmentState.beta };
        const dx = x - 0.5, dy = y - 0.5;
        const distToCenter = Math.sqrt(dx * dx + dy * dy);
        const dist = computeBoundaryDistance(x, y);
        const strength = (1 - dist) * 0.5;
        const boundaryForce = distToCenter < 0.01 ? { x: 0, y: 0 } : { x: -dx / distToCenter * strength, y: -dy / distToCenter * strength };
        
        const speed = 0.01 * (1 + (alignmentState.capability - 6) / 9 * 0.5);
        const rewardWeight = 0.5 + alignmentState.epsilon * 1.5;
        const boundaryWeight = 1.0 - alignmentState.epsilon * 0.8;
        
        const newVx = (rewardDir.x * rewardWeight * 0.1 + klDrift.x + boundaryForce.x * boundaryWeight) * speed;
        const newVy = (rewardDir.y * rewardWeight * 0.1 + klDrift.y + boundaryForce.y * boundaryWeight) * speed;
        
        return {
          x: Math.max(0.05, Math.min(0.95, x + newVx)),
          y: Math.max(0.05, Math.min(0.95, y + newVy)),
          vx: newVx,
          vy: newVy
        };
      }
      
      function getPredictionCloud(steps, samples) {
        const predictions = [];
        for (let s = 0; s < samples; s++) {
          let x = alignmentState.x, y = alignmentState.y;
          let vx = alignmentState.vx, vy = alignmentState.vy;
          for (let i = 0; i < steps; i++) {
            const next = simulateFutureStep(x, y, vx, vy);
            x = next.x; y = next.y; vx = next.vx; vy = next.vy;
          }
          predictions.push({ x, y });
        }
        return predictions;
      }
      
      function renderStateSpace() {
        const w = stateCanvas.getBoundingClientRect().width, h = stateCanvas.getBoundingClientRect().height;
        stateCtx.fillStyle = '#000'; stateCtx.fillRect(0, 0, w, h);
        stateCtx.strokeStyle = '#1a1a1a'; stateCtx.lineWidth = 1;
        for (let i = 0; i <= 10; i++) { stateCtx.beginPath(); stateCtx.moveTo(i * w / 10, 0); stateCtx.lineTo(i * w / 10, h); stateCtx.stroke(); stateCtx.beginPath(); stateCtx.moveTo(0, i * h / 10); stateCtx.lineTo(w, i * h / 10); stateCtx.stroke(); }
        
        const centerX = w / 2, centerY = h / 2;
        const effectiveRadius = Math.min(w, h) * 0.45 * (1 - alignmentState.epsilon * 0.8);
        const gradient = stateCtx.createRadialGradient(centerX, centerY, 0, centerX, centerY, effectiveRadius);
        gradient.addColorStop(0, 'rgba(59, 255, 111, 0.1)'); gradient.addColorStop(0.7, 'rgba(59, 255, 111, 0.05)'); gradient.addColorStop(1, 'rgba(255, 59, 59, 0.1)');
        stateCtx.fillStyle = gradient; stateCtx.beginPath(); stateCtx.arc(centerX, centerY, effectiveRadius, 0, Math.PI * 2); stateCtx.fill();
        stateCtx.strokeStyle = '#ff3b3b'; stateCtx.lineWidth = 2; stateCtx.setLineDash([5, 5]); stateCtx.beginPath(); stateCtx.arc(centerX, centerY, effectiveRadius, 0, Math.PI * 2); stateCtx.stroke(); stateCtx.setLineDash([]);
        
        if (alignmentState.history.length > 1) { stateCtx.strokeStyle = '#555'; stateCtx.lineWidth = 1; stateCtx.beginPath(); stateCtx.moveTo(alignmentState.history[0].x * w, alignmentState.history[0].y * h); for (let i = 1; i < alignmentState.history.length; i++) stateCtx.lineTo(alignmentState.history[i].x * w, alignmentState.history[i].y * h); stateCtx.stroke(); }
        
        // Prediction cloud - 10 steps ahead, 20 samples
        if (!alignmentState.failed) {
          const cloud = getPredictionCloud(10, 20);
          stateCtx.fillStyle = 'rgba(255, 103, 0, 0.15)';
          cloud.forEach(p => {
            stateCtx.beginPath();
            stateCtx.arc(p.x * w, p.y * h, 4, 0, Math.PI * 2);
            stateCtx.fill();
          });
        }
        
        const px = alignmentState.x * w, py = alignmentState.y * h;
        stateCtx.shadowColor = '#ff6700'; stateCtx.shadowBlur = 15; stateCtx.fillStyle = '#ff6700'; stateCtx.beginPath(); stateCtx.arc(px, py, 6, 0, Math.PI * 2); stateCtx.fill(); stateCtx.shadowBlur = 0;
        stateCtx.fillStyle = '#fff'; stateCtx.beginPath(); stateCtx.arc(px, py, 3, 0, Math.PI * 2); stateCtx.fill();
        stateCtx.fillStyle = '#444'; stateCtx.font = '10px JetBrains Mono, monospace'; stateCtx.fillText('Helpfulness', 10, h - 10);
        
        if (alignmentState.failed) { stateCtx.fillStyle = 'rgba(255, 59, 59, 0.3)'; stateCtx.fillRect(0, 0, w, h); stateCtx.fillStyle = '#ff3b3b'; stateCtx.font = 'bold 24px JetBrains Mono, monospace'; stateCtx.textAlign = 'center'; stateCtx.fillText('BOUNDARY CROSSED', w/2, h/2); stateCtx.font = '12px JetBrains Mono, monospace'; stateCtx.fillText('Alignment Failure', w/2, h/2 + 25); stateCtx.textAlign = 'left'; }
      }
      
      function renderAlignmentPhaseDiagram() {
        const w = phaseCanvas.getBoundingClientRect().width, h = phaseCanvas.getBoundingClientRect().height;
        phaseCtx.fillStyle = '#000'; phaseCtx.fillRect(0, 0, w, h);
        const resolution = 40, cellW = w / resolution, cellH = h / resolution;
        for (let i = 0; i < resolution; i++) { for (let j = 0; j < resolution; j++) { const eps = i / resolution, cap = 6 + (resolution - 1 - j) / resolution * 9, criticalEps = 0.6 - (cap - 6) / 9 * 0.4; let color; if (eps < criticalEps * 0.6) color = `rgba(59, 255, 111, ${0.3 - eps / criticalEps * 0.2})`; else if (eps < criticalEps) { const t = (eps - criticalEps * 0.6) / (criticalEps * 0.4); color = `rgba(255, 170, 0, ${0.2 + t * 0.2})`; } else color = `rgba(255, 59, 59, ${Math.min(0.5, 0.2 + (eps - criticalEps) * 0.5)})`; phaseCtx.fillStyle = color; phaseCtx.fillRect(i * cellW, j * cellH, cellW + 1, cellH + 1); }}
        phaseCtx.strokeStyle = '#222'; phaseCtx.lineWidth = 1; for (let i = 0; i <= 10; i++) { phaseCtx.beginPath(); phaseCtx.moveTo(i * w / 10, 0); phaseCtx.lineTo(i * w / 10, h); phaseCtx.stroke(); phaseCtx.beginPath(); phaseCtx.moveTo(0, i * h / 10); phaseCtx.lineTo(w, i * h / 10); phaseCtx.stroke(); }
        
        // Prediction cloud on phase diagram - shows where predicted positions land in phase space
        if (!alignmentState.failed) {
          const cloud = getPredictionCloud(10, 20);
          phaseCtx.fillStyle = 'rgba(255, 103, 0, 0.2)';
          cloud.forEach(p => {
            // Map state space position to effective epsilon (distance from ideal impacts alignment)
            const distFromCenter = Math.sqrt((p.x - 0.5) ** 2 + (p.y - 0.5) ** 2);
            const effectiveEps = alignmentState.epsilon + distFromCenter * 0.3;
            const px = Math.min(1, effectiveEps) * w;
            const py = h - (alignmentState.capability - 6) / 9 * h;
            phaseCtx.beginPath();
            phaseCtx.arc(px, py, 4, 0, Math.PI * 2);
            phaseCtx.fill();
          });
        }
        
        const px = alignmentState.epsilon * w, py = h - (alignmentState.capability - 6) / 9 * h;
        phaseCtx.strokeStyle = '#fff'; phaseCtx.lineWidth = 1; phaseCtx.setLineDash([3, 3]); phaseCtx.beginPath(); phaseCtx.moveTo(px, 0); phaseCtx.lineTo(px, h); phaseCtx.moveTo(0, py); phaseCtx.lineTo(w, py); phaseCtx.stroke(); phaseCtx.setLineDash([]);
        phaseCtx.shadowColor = '#ff6700'; phaseCtx.shadowBlur = 10; phaseCtx.fillStyle = '#ff6700'; phaseCtx.beginPath(); phaseCtx.arc(px, py, 6, 0, Math.PI * 2); phaseCtx.fill(); phaseCtx.shadowBlur = 0;
        phaseCtx.fillStyle = '#fff'; phaseCtx.beginPath(); phaseCtx.arc(px, py, 3, 0, Math.PI * 2); phaseCtx.fill();
        phaseCtx.fillStyle = '#444'; phaseCtx.font = '10px JetBrains Mono, monospace'; phaseCtx.fillText('ε →', w - 30, h - 10); phaseCtx.fillText('log C ↑', 5, 15);
      }
      
      function renderSparkline() {
        const w = sparkCanvas.getBoundingClientRect().width, h = sparkCanvas.getBoundingClientRect().height;
        sparkCtx.fillStyle = '#000'; 
        sparkCtx.fillRect(0, 0, w, h);
        
        // Draw danger zone (bottom 30%)
        sparkCtx.fillStyle = 'rgba(255, 59, 59, 0.1)'; 
        sparkCtx.fillRect(0, h * 0.7, w, h * 0.3);
        
        // Draw warning zone (30-50%)
        sparkCtx.fillStyle = 'rgba(255, 170, 0, 0.05)'; 
        sparkCtx.fillRect(0, h * 0.5, w, h * 0.2);
        
        // Labels on left side
        sparkCtx.font = '8px JetBrains Mono, monospace';
        sparkCtx.fillStyle = '#444';
        sparkCtx.textAlign = 'left';
        sparkCtx.fillText('d(y,∂𝔽)', 4, 10);
        sparkCtx.fillStyle = 'rgba(255, 59, 59, 0.5)';
        sparkCtx.fillText('FAIL', 4, h - 4);
        sparkCtx.fillStyle = 'rgba(255, 170, 0, 0.5)';
        sparkCtx.fillText('WARN', 4, h * 0.6);
        sparkCtx.fillStyle = 'rgba(59, 255, 111, 0.4)';
        sparkCtx.fillText('SAFE', 4, h * 0.3);
        
        // Draw starting point marker
        const startY = h - alignmentState.distance * h;
        sparkCtx.beginPath();
        sparkCtx.arc(20, h - 0.847 * h, 4, 0, Math.PI * 2);
        sparkCtx.fillStyle = 'rgba(255, 103, 0, 0.5)';
        sparkCtx.fill();
        sparkCtx.strokeStyle = '#ff6700';
        sparkCtx.lineWidth = 1;
        sparkCtx.stroke();
        
        if (alignmentState.distanceHistory.length < 1) {
          // Show "START" label at initial position
          sparkCtx.fillStyle = '#ff6700';
          sparkCtx.textAlign = 'left';
          sparkCtx.fillText('START →', 28, h - 0.847 * h + 3);
          return;
        }
        
        const step = alignmentState.distanceHistory.length > 1 ? (w - 40) / (alignmentState.distanceHistory.length - 1) : 1;
        const offsetX = 20;
        
        // Draw pause markers (dashed orange vertical lines)
        sparkCtx.strokeStyle = 'rgba(255, 103, 0, 0.4)';
        sparkCtx.lineWidth = 1;
        sparkCtx.setLineDash([3, 3]);
        for (const pauseIdx of alignmentState.pauseMarkers) {
          const x = offsetX + pauseIdx * step;
          sparkCtx.beginPath();
          sparkCtx.moveTo(x, 0);
          sparkCtx.lineTo(x, h);
          sparkCtx.stroke();
        }
        sparkCtx.setLineDash([]);
        
        // Draw manual step markers (solid orange vertical lines)
        sparkCtx.strokeStyle = 'rgba(255, 103, 0, 0.6)';
        sparkCtx.lineWidth = 1;
        for (const manualIdx of alignmentState.manualSteps) {
          const x = offsetX + manualIdx * step;
          sparkCtx.beginPath();
          sparkCtx.moveTo(x, 0);
          sparkCtx.lineTo(x, h);
          sparkCtx.stroke();
        }
        
        // Draw exit markers (white vertical lines)
        sparkCtx.strokeStyle = 'rgba(255, 255, 255, 0.5)';
        sparkCtx.lineWidth = 1;
        sparkCtx.setLineDash([2, 2]);
        for (const exitIdx of alignmentState.exitMarkers) {
          const x = offsetX + exitIdx * step;
          sparkCtx.beginPath();
          sparkCtx.moveTo(x, 0);
          sparkCtx.lineTo(x, h);
          sparkCtx.stroke();
        }
        sparkCtx.setLineDash([]);
        
        // Draw the distance history line
        sparkCtx.strokeStyle = alignmentState.distance < 0.3 ? '#ff3b3b' : alignmentState.distance < 0.5 ? '#ffaa00' : '#ff6700';
        sparkCtx.lineWidth = 1.5; 
        sparkCtx.beginPath();
        for (let i = 0; i < alignmentState.distanceHistory.length; i++) { 
          const x = offsetX + i * step;
          const y = h - alignmentState.distanceHistory[i] * h; 
          if (i === 0) sparkCtx.moveTo(x, y); 
          else sparkCtx.lineTo(x, y); 
        }
        sparkCtx.stroke();
        
        // Draw current point
        if (alignmentState.distanceHistory.length > 0) {
          const lastX = offsetX + (alignmentState.distanceHistory.length - 1) * step;
          const lastY = h - alignmentState.distanceHistory[alignmentState.distanceHistory.length - 1] * h;
          sparkCtx.beginPath();
          sparkCtx.arc(lastX, lastY, 3, 0, Math.PI * 2);
          sparkCtx.fillStyle = alignmentState.distance < 0.3 ? '#ff3b3b' : alignmentState.distance < 0.5 ? '#ffaa00' : '#ff6700';
          sparkCtx.fill();
        }
      }
      
      function updateMetrics() {
        const distEl = document.getElementById('alignment-metric-distance'); distEl.textContent = alignmentState.distance.toFixed(3); distEl.className = 'alignment-metric-value ' + (alignmentState.distance < 0.2 ? 'danger' : alignmentState.distance < 0.4 ? 'warning' : 'stable');
        const cohEl = document.getElementById('alignment-metric-coherence'); cohEl.textContent = alignmentState.coherence.toFixed(3); cohEl.className = 'alignment-metric-value ' + (alignmentState.coherence < 0.5 ? 'danger' : alignmentState.coherence < 0.7 ? 'warning' : 'stable');
        const trendEl = document.getElementById('alignment-metric-trend'); trendEl.textContent = (alignmentState.coherenceTrend >= 0 ? '+' : '') + alignmentState.coherenceTrend.toFixed(4); trendEl.className = 'alignment-metric-value ' + (alignmentState.coherenceTrend < -0.01 ? 'danger' : alignmentState.coherenceTrend < 0 ? 'warning' : 'stable');
        const ttbcEl = document.getElementById('alignment-metric-ttbc'); if (alignmentState.ttbc === Infinity) { ttbcEl.textContent = '∞'; ttbcEl.className = 'alignment-metric-value stable'; } else { ttbcEl.textContent = alignmentState.ttbc.toString(); ttbcEl.className = 'alignment-metric-value ' + (alignmentState.ttbc < 50 ? 'danger' : alignmentState.ttbc < 200 ? 'warning' : 'stable'); }
        const statusEl = document.getElementById('alignment-status-value'); if (alignmentState.failed) { statusEl.textContent = 'FAILED'; statusEl.className = 'alignment-status-value critical'; } else if (alignmentState.distance < 0.2 || alignmentState.ttbc < 50) { statusEl.textContent = 'CRITICAL'; statusEl.className = 'alignment-status-value critical'; } else if (alignmentState.distance < 0.4 || alignmentState.ttbc < 200 || alignmentState.coherence < 0.6) { statusEl.textContent = 'WARNING'; statusEl.className = 'alignment-status-value warning'; } else { statusEl.textContent = 'STABLE'; statusEl.className = 'alignment-status-value stable'; }
        document.getElementById('alignment-step-count').textContent = alignmentState.step;
      }
      
      function render() { renderStateSpace(); renderAlignmentPhaseDiagram(); renderSparkline(); updateMetrics(); }
      
      // Helper to pause simulation
      function pauseSimulation() {
        if (alignmentState.running && alignmentState.distanceHistory.length > 0) {
          alignmentState.pauseMarkers.push(alignmentState.distanceHistory.length - 1);
        }
        alignmentState.running = false;
        document.getElementById('alignment-btn-run').textContent = '▶ Run';
        document.getElementById('alignment-btn-run').classList.remove('active');
      }
      
      // Only add event listeners once
      if (!alignmentInitialized) {
        document.getElementById('alignment-epsilon-slider').addEventListener('input', (e) => { pauseSimulation(); alignmentState.epsilon = e.target.value / 100; document.getElementById('alignment-epsilon-value').textContent = alignmentState.epsilon.toFixed(2); render(); });
        document.getElementById('alignment-capability-slider').addEventListener('input', (e) => { pauseSimulation(); alignmentState.capability = parseFloat(e.target.value); document.getElementById('alignment-capability-value').innerHTML = `10<sup>${Math.round(alignmentState.capability)}</sup>`; render(); });
        document.getElementById('alignment-beta-slider').addEventListener('input', (e) => { pauseSimulation(); alignmentState.beta = e.target.value / 100; document.getElementById('alignment-beta-value').textContent = alignmentState.beta.toFixed(2); });
        document.getElementById('alignment-btn-run').addEventListener('click', () => { alignmentState.running = !alignmentState.running; document.getElementById('alignment-btn-run').textContent = alignmentState.running ? '‖ Pause' : '▶ Run'; document.getElementById('alignment-btn-run').classList.toggle('active', alignmentState.running); });
        document.getElementById('alignment-btn-step').addEventListener('click', () => { alignmentState.manualSteps.push(alignmentState.distanceHistory.length); simulateStep(); render(); });
        document.getElementById('alignment-btn-reset').addEventListener('click', () => { alignmentState.x = 0.5; alignmentState.y = 0.5; alignmentState.vx = 0; alignmentState.vy = 0; alignmentState.history = []; alignmentState.distanceHistory = []; alignmentState.manualSteps = []; alignmentState.pauseMarkers = []; alignmentState.exitMarkers = []; alignmentState.distance = computeBoundaryDistance(0.5, 0.5); alignmentState.coherence = 0.95; alignmentState.coherenceTrend = 0; alignmentState.ttbc = Infinity; alignmentState.step = 0; alignmentState.failed = false; alignmentState.running = false; document.getElementById('alignment-btn-run').textContent = '▶ Run'; document.getElementById('alignment-btn-run').classList.remove('active'); render(); });
        document.getElementById('lab-logout-alignment').addEventListener('click', handleLogout);
        window.addEventListener('resize', () => { resizeCanvases(); render(); });
        alignmentInitialized = true;
      }
      
      // Reset UI state
      document.getElementById('alignment-btn-run').textContent = '▶ Run';
      document.getElementById('alignment-btn-run').classList.remove('active');
      document.getElementById('alignment-epsilon-slider').value = 15;
      document.getElementById('alignment-epsilon-value').textContent = '0.15';
      document.getElementById('alignment-capability-slider').value = 9;
      document.getElementById('alignment-capability-value').innerHTML = '10<sup>9</sup>';
      document.getElementById('alignment-beta-slider').value = 20;
      document.getElementById('alignment-beta-value').textContent = '0.20';
      
      let lastTime = 0; const frameInterval = 1000 / 30;
      function gameLoop(timestamp) { if (timestamp - lastTime >= frameInterval) { if (alignmentState && alignmentState.running && !alignmentState.failed) simulateStep(); render(); lastTime = timestamp; } alignmentAnimFrame = requestAnimationFrame(gameLoop); }
      
      resizeCanvases(); alignmentState.distance = computeBoundaryDistance(0.5, 0.5); render(); alignmentAnimFrame = requestAnimationFrame(gameLoop);
    }
    
    // ============ DVD BOUNCING LOGO ============
    (function() {
      const container = document.getElementById('dvd-container');
      const logo = document.getElementById('dvd-logo');
      const noiseCanvas = document.getElementById('noise-canvas');
      
      if (!container || !logo || !noiseCanvas) return;
      
      const ctx = noiseCanvas.getContext('2d');
      
      // DVD colors that cycle on bounce
      const dvdColors = [
        '#ff6700', // orange
        '#ff3366', // pink
        '#33ff99', // green
        '#3399ff', // blue
        '#ff33ff', // magenta
        '#ffff33', // yellow
        '#33ffff', // cyan
      ];
      let colorIndex = 0;
      
      // Position and velocity
      let x = Math.random() * 200 + 50;
      let y = Math.random() * 200 + 50;
      let vx = (Math.random() > 0.5 ? 1 : -1) * (1.5 + Math.random());
      let vy = (Math.random() > 0.5 ? 1 : -1) * (1.5 + Math.random());
      
      // Set initial color
      logo.style.color = dvdColors[colorIndex];
      
      // Resize noise canvas
      function resizeNoise() {
        noiseCanvas.width = window.innerWidth / 4;
        noiseCanvas.height = window.innerHeight / 4;
      }
      resizeNoise();
      window.addEventListener('resize', resizeNoise);
      
      // Draw white noise
      function drawNoise() {
        const imageData = ctx.createImageData(noiseCanvas.width, noiseCanvas.height);
        const data = imageData.data;
        
        for (let i = 0; i < data.length; i += 4) {
          const val = Math.random() * 255;
          data[i] = val;     // R
          data[i + 1] = val; // G
          data[i + 2] = val; // B
          data[i + 3] = 255; // A
        }
        
        ctx.putImageData(imageData, 0, 0);
      }
      
      // Animate
      function animate() {
        // Update position
        x += vx;
        y += vy;
        
        // Get bounds
        const logoRect = logo.getBoundingClientRect();
        const containerRect = container.getBoundingClientRect();
        
        const logoWidth = logoRect.width;
        const logoHeight = logoRect.height;
        const maxX = containerRect.width - logoWidth;
        const maxY = containerRect.height - logoHeight;
        
        // Bounce off walls and change color
        let bounced = false;
        
        if (x <= 0) {
          x = 0;
          vx = Math.abs(vx);
          bounced = true;
        } else if (x >= maxX) {
          x = maxX;
          vx = -Math.abs(vx);
          bounced = true;
        }
        
        if (y <= 0) {
          y = 0;
          vy = Math.abs(vy);
          bounced = true;
        } else if (y >= maxY) {
          y = maxY;
          vy = -Math.abs(vy);
          bounced = true;
        }
        
        if (bounced) {
          colorIndex = (colorIndex + 1) % dvdColors.length;
          logo.style.color = dvdColors[colorIndex];
        }
        
        // Apply position
        logo.style.left = x + 'px';
        logo.style.top = y + 'px';
        
        // Update noise every few frames
        if (Math.random() < 0.3) {
          drawNoise();
        }
        
        requestAnimationFrame(animate);
      }
      
      // Start animation when lab content becomes visible
      const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          if (mutation.target.classList.contains('visible')) {
            animate();
            observer.disconnect();
          }
        });
      });
      
      const labContent = document.getElementById('lab-content');
      if (labContent) {
        if (labContent.classList.contains('visible')) {
          animate();
        } else {
          observer.observe(labContent, { attributes: true, attributeFilter: ['class'] });
        }
      }
    })();
    
    // ============ INTERACTIVE FORMULA EXPLORER ============
    (function() {
      const formulaVars = document.querySelectorAll('.formula-var');
      const panel = document.getElementById('formula-panel');
      const panelContent = document.getElementById('panel-content');
      const panelNav = document.getElementById('panel-nav');
      
      if (!panel || !panelContent) return;
      
      let currentVar = null;
      let currentDomain = 'physics';
      
      const domains = ['physics', 'medicine', 'math', 'computing', 'biology'];
      
      const varData = {
        F: {
          symbol: '𝔽',
          name: 'Feasible Set',
          physics: {
            icon: 'Φ',
            interpretation: 'States not violating conservation laws, causality, or quantum unitarity. The set of all physically realizable configurations.',
            question: 'Why does superposition collapse to ONE outcome from the full feasible set?'
          },
          medicine: {
            icon: 'Ψ',
            interpretation: 'Physiologically viable configurations. All metabolic, hormonal, and cellular states compatible with life.',
            question: 'Why does this patient respond to treatment while a genetically similar patient does not?'
          },
          math: {
            icon: '∑',
            interpretation: 'Non-contradictory propositions under chosen axioms. The space of statements that can be consistently maintained.',
            question: 'What determines which axiom systems are "natural" vs arbitrary?'
          },
          computing: {
            icon: 'λ',
            interpretation: 'Halting programs, decidable problems, reachable states. Configurations that terminate without resource exhaustion.',
            question: 'Why do some NP problems admit efficient heuristics while others remain intractable?'
          },
          biology: {
            icon: 'Ω',
            interpretation: 'Viable phenotypes given genome and environment. Organisms that can survive, reproduce, and maintain homeostasis.',
            question: 'How does one cell become a coherent organism with 37 trillion coordinated cells?'
          }
        },
        dF: {
          symbol: '∂𝔽',
          name: 'Failure Boundary',
          physics: {
            icon: 'Φ',
            interpretation: 'Event horizons, phase transitions, the speed of light, decoherence thresholds. Where physical laws force discontinuity.',
            question: 'What happens to information when it crosses the event horizon boundary?'
          },
          medicine: {
            icon: 'Ψ',
            interpretation: 'LD50, organ failure thresholds, therapeutic windows, point of no return for cellular damage.',
            question: 'Why do genetically similar patients cross failure boundaries at different times?'
          },
          math: {
            icon: '∑',
            interpretation: 'Contradiction, incompleteness limits, Gödel boundaries. Where proof systems necessarily break down.',
            question: 'What is the topology of unprovability within consistent systems?'
          },
          computing: {
            icon: 'λ',
            interpretation: 'Halting boundary, stack overflow, resource exhaustion, timeout limits, deadlock conditions.',
            question: 'Can we predict when a system approaches boundary without crossing it?'
          },
          biology: {
            icon: 'Ω',
            interpretation: 'Extinction threshold, carrying capacity limits, lethal mutation load, minimum viable population.',
            question: 'Why do some species persist at the edge of viability while others collapse suddenly?'
          }
        },
        margin: {
          symbol: 'd(y, ∂𝔽)',
          name: 'Margin to Failure',
          physics: {
            icon: 'Φ',
            interpretation: 'Stability of orbit, distance from criticality, how far a quantum state is from decoherence.',
            question: 'Does the universe optimize for maximum margin, or minimum necessary margin?'
          },
          medicine: {
            icon: 'Ψ',
            interpretation: 'Physiological reserve, stress tolerance. How much perturbation can the system absorb before failure.',
            question: 'Can we measure "health" as aggregate margin across all physiological boundaries?'
          },
          math: {
            icon: '∑',
            interpretation: 'How "far" a proof is from relying on contested axioms or undecidable propositions.',
            question: 'Do more robust theorems (higher margin) tend to have more applications?'
          },
          computing: {
            icon: 'λ',
            interpretation: 'Memory headroom, queue depth before timeout, CPU cycles remaining, error budget.',
            question: 'What is the optimal margin allocation across competing system resources?'
          },
          biology: {
            icon: 'Ω',
            interpretation: 'Population buffer, genetic diversity, metabolic reserve, immune system capacity.',
            question: 'How do organisms trade off margin in one domain for capability in another?'
          }
        },
        C: {
          symbol: 'C_Δ',
          name: 'Coherence',
          physics: {
            icon: 'Φ',
            interpretation: 'Entanglement preservation, unitarity, phase coherence. Whether quantum correlations remain intact.',
            question: 'Why does coherence appear to decrease universally (thermodynamic arrow)?'
          },
          medicine: {
            icon: 'Ψ',
            interpretation: 'Homeostasis, integrated organ function, circadian alignment. How well subsystems coordinate.',
            question: 'What is the minimal coherence threshold for consciousness?'
          },
          math: {
            icon: '∑',
            interpretation: 'Consistency across proof branches, how well different parts of a theory integrate.',
            question: 'Why do "beautiful" proofs tend to reveal deeper coherence?'
          },
          computing: {
            icon: 'λ',
            interpretation: 'State consistency, ACID properties, cache coherence, distributed consensus.',
            question: 'What is the fundamental cost of maintaining coherence at scale?'
          },
          biology: {
            icon: 'Ω',
            interpretation: 'Developmental coordination, immune self/non-self discrimination, neural synchronization.',
            question: 'How does a developing embryo maintain coherence through massive state changes?'
          }
        },
        Cdot: {
          symbol: 'Ċ_Δ',
          name: 'Coherence Trend',
          physics: {
            icon: 'Φ',
            interpretation: 'Rate of decoherence, entropy production rate. Is coherence increasing or decreasing?',
            question: 'Can coherence trend ever reverse spontaneously in closed systems?'
          },
          medicine: {
            icon: 'Ψ',
            interpretation: 'Trajectory of health—improving, stable, or declining. The derivative of wellbeing.',
            question: 'Is aging fundamentally a negative coherence trend problem?'
          },
          math: {
            icon: '∑',
            interpretation: 'Whether a proof is converging or diverging, becoming more or less unified.',
            question: 'Can we detect when a proof strategy is trending toward contradiction?'
          },
          computing: {
            icon: 'λ',
            interpretation: 'Technical debt accumulation rate, system stability trend, drift toward failure.',
            question: 'Why do systems that "work fine" suddenly cascade into failure?'
          },
          biology: {
            icon: 'Ω',
            interpretation: 'Evolutionary trajectory, population fitness trend, ecosystem stability direction.',
            question: 'What determines whether an ecosystem trends toward stability or collapse?'
          }
        },
        Pi: {
          symbol: 'Π',
          name: 'Projection Map',
          physics: {
            icon: 'Φ',
            interpretation: 'Measurement apparatus, reference frame, coarse-graining that produces classical observables from quantum states.',
            question: 'Is measurement a projection, or does it create new ontology?'
          },
          medicine: {
            icon: 'Ψ',
            interpretation: 'Diagnostic tests, symptom reports, biomarker panels. How internal states become observable data.',
            question: 'How much information is lost in clinical projection from full physiological state?'
          },
          math: {
            icon: '∑',
            interpretation: 'Formal system, axiom choice, representation. How abstract structures become computable proofs.',
            question: 'Do different projections of the same mathematical object reveal different truths?'
          },
          computing: {
            icon: 'λ',
            interpretation: 'API, logging, monitoring, UI. What the user/operator actually sees of system state.',
            question: 'What determines which projections are useful vs misleading?'
          },
          biology: {
            icon: 'Ω',
            interpretation: 'Phenotype expression, ecological niche perception, behavioral output from neural state.',
            question: 'How does consciousness arise as a projection of neural dynamics?'
          }
        },
        fail: {
          symbol: '△!',
          name: 'Failure Modes',
          physics: {
            icon: 'Φ',
            early: 'Quantum systems near decoherence threshold — locally valid superpositions that environmental coupling will collapse.',
            hindsight: 'Phase transitions: water at 99°C looks like water at 50°C, then suddenly it\'s steam. The argmin flipped.',
            insight: 'Criticality was encoded in the constraint geometry all along — the "surprise" was observational.'
          },
          medicine: {
            icon: 'Ψ',
            early: 'Patient with stable vitals but shrinking physiological reserve — labs look fine, but margin to ∂𝔽 is dangerously thin.',
            hindsight: 'Sudden cardiac events, sepsis cascades, stroke. "They seemed fine yesterday" — coherence trend was negative.',
            insight: 'The body was optimizing locally while drifting globally toward boundary.'
          },
          math: {
            icon: '∑',
            early: 'Proofs relying on axioms near known independence results — locally valid but structurally fragile.',
            hindsight: 'Russell\'s paradox, Gödel\'s incompleteness. The system "worked" until it suddenly didn\'t.',
            insight: 'Contradiction was always in the feasible set\'s topology — discovery just revealed the boundary.'
          },
          computing: {
            icon: 'λ',
            early: 'System at 85% memory with growing allocation rate — currently functional but TTBC is short.',
            hindsight: 'Cascading failures, thundering herds, OOM kills. "It was fine in staging" — load revealed the boundary.',
            insight: 'The failure was deterministic given the trajectory; only the timing felt sudden.'
          },
          biology: {
            icon: 'Ω',
            early: 'Population with low genetic diversity — currently viable but one disease away from collapse.',
            hindsight: 'Mass extinctions, ecosystem collapses. Stable for millennia, then gone in decades.',
            insight: 'Resilience isn\'t binary — it\'s margin. Low margin systems look fine until they\'re not.'
          }
        }
      };
      
      function renderPanel(varKey, domain) {
        const data = varData[varKey];
        if (!data) return;
        
        const domainData = data[domain];
        if (!domainData) return;
        
        const varClass = 'var-' + (varKey === 'margin' ? 'margin' : varKey === 'dF' ? 'dF' : varKey === 'fail' ? 'fail' : varKey === 'Cdot' ? 'C' : varKey);
        
        let contentHTML;
        
        if (varKey === 'fail') {
          // Special layout for failure modes
          contentHTML = `
            <div class="panel-domain active" data-domain="${domain}">
              <div class="panel-domain-header">
                <span class="panel-domain-icon">${domainData.icon}</span>
                <span class="panel-domain-title">${domain.charAt(0).toUpperCase() + domain.slice(1)}</span>
              </div>
              <div class="panel-var-name var-fail">${data.symbol} — ${data.name}</div>
              <div class="panel-failure-item">
                <div class="panel-failure-label">Early Failure</div>
                <div class="panel-failure-text">${domainData.early}</div>
              </div>
              <div class="panel-failure-item">
                <div class="panel-failure-label">Hindsight Suddenness</div>
                <div class="panel-failure-text">${domainData.hindsight}</div>
              </div>
              <div class="panel-question">
                <div class="panel-question-label">The Insight</div>
                <div class="panel-question-text">${domainData.insight}</div>
              </div>
              <div class="panel-ai-mapped">AI-MAPPED</div>
            </div>
          `;
        } else {
          contentHTML = `
            <div class="panel-domain active" data-domain="${domain}">
              <div class="panel-domain-header">
                <span class="panel-domain-icon">${domainData.icon}</span>
                <span class="panel-domain-title">${domain.charAt(0).toUpperCase() + domain.slice(1)}</span>
              </div>
              <div class="panel-var-name ${varClass}">${data.symbol} — ${data.name}</div>
              <div class="panel-interpretation">${domainData.interpretation}</div>
              <div class="panel-question">
                <div class="panel-question-label">Open Question</div>
                <div class="panel-question-text">${domainData.question}</div>
              </div>
              <div class="panel-ai-mapped">AI-MAPPED</div>
            </div>
          `;
        }
        
        panelContent.innerHTML = contentHTML;
        
        // Update nav
        panelNav.querySelectorAll('.panel-nav-item').forEach(btn => {
          btn.classList.toggle('active', btn.dataset.domain === domain);
        });
      }
      
      // Variable click handlers
      formulaVars.forEach(v => {
        v.addEventListener('click', () => {
          const varKey = v.dataset.var;
          
          // Toggle panel
          if (currentVar === varKey && panel.classList.contains('open')) {
            panel.classList.remove('open');
            v.classList.remove('active');
            currentVar = null;
            return;
          }
          
          // Update active states
          formulaVars.forEach(fv => fv.classList.remove('active'));
          v.classList.add('active');
          
          currentVar = varKey;
          currentDomain = 'physics';
          
          renderPanel(varKey, currentDomain);
          panel.classList.add('open');
        });
      });
      
      // Nav click handlers
      panelNav.querySelectorAll('.panel-nav-item').forEach(btn => {
        btn.addEventListener('click', () => {
          currentDomain = btn.dataset.domain;
          renderPanel(currentVar, currentDomain);
        });
      });
      
      // Click outside to close
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.formula-explorer') && panel.classList.contains('open')) {
          panel.classList.remove('open');
          formulaVars.forEach(v => v.classList.remove('active'));
          currentVar = null;
        }
      });
    })();
    
    // ============ COLLAPSIBLE TECHNICAL DETAILS ============
    (function() {
      const toggle = document.getElementById('tech-details-toggle');
      const content = document.getElementById('tech-details-content');
      
      if (!toggle || !content) return;
      
      toggle.addEventListener('click', () => {
        toggle.classList.toggle('open');
        content.classList.toggle('open');
      });
    })();
    
    // ============ DOORS OVERLAY & HARDWARE/SOFTWARE NAVIGATION ============
    (function() {
      const doors = document.getElementById('doors');
      const applicationsSplash = document.getElementById('applications-splash');
      const logoText = document.getElementById('logo-text');
      const visualTooltip = document.getElementById('visual-tooltip');
      const researchDisclaimer = document.getElementById('research-disclaimer');
      const nav = document.getElementById('nav');
      
      // Theme switching
      function setTheme(page) {
        const navToggleSpans = document.querySelectorAll('#nav-toggle .nav-toggle-icon span');
        const navToggle = document.getElementById('nav-toggle');
        
        if (page === 'hardware' || page === 'software' || page === 'applications') {
          document.body.classList.add('theme-teal');
          // Force teal color on nav toggle icon
          navToggleSpans.forEach(span => {
            span.style.background = '#00d4aa';
          });
          if (navToggle) {
            navToggle.style.borderColor = 'rgba(0, 212, 170, 0.4)';
          }
        } else {
          document.body.classList.remove('theme-teal');
          // Reset to orange
          navToggleSpans.forEach(span => {
            span.style.background = '';
          });
          if (navToggle) {
            navToggle.style.borderColor = '';
          }
        }
      }
      
      // Show/hide research disclaimer
      function updateDisclaimer(page) {
        if (researchDisclaimer) {
          if (page === 'hardware') {
            researchDisclaimer.classList.add('visible');
          } else {
            researchDisclaimer.classList.remove('visible');
          }
        }
      }
      
      // Show applications splash (teal)
      function showApplicationsSplash() {
        // Hide all pages
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        
        // Hide doors if visible
        if (doors) doors.classList.remove('visible');
        
        // Show applications splash and rings
        if (applicationsSplash) applicationsSplash.classList.add('visible');
        document.querySelectorAll('.app-splash-ring').forEach(r => r.style.display = 'block');
        
        // Dim the main logo
        if (logoText) {
          logoText.classList.add('dimmed');
        }
        
        // Fade out nav and orange corner logo together (0.4s)
        if (nav) nav.classList.remove('visible');
        if (cornerLogo) cornerLogo.classList.remove('visible');
        
        // After fade out completes, set teal theme and show nav/teal logo
        setTimeout(() => {
          // Set teal theme
          document.body.classList.add('theme-teal');
          
          // Show nav (now in teal position/style)
          if (nav) nav.classList.add('visible');
          
          // Show teal corner logo
          if (cornerLogoTeal) cornerLogoTeal.classList.add('visible');
        }, 450);
        
        // Hide disclaimer
        if (researchDisclaimer) researchDisclaimer.classList.remove('visible');
        
        // Show banner on applications splash
        updateBannerVisibility('applications', false);
        
        // Enable mouse influence for particle hover effects
        if (window.setMouseInfluence) window.setMouseInfluence(1);
      }
      
      // Hide applications splash
      function hideApplicationsSplash() {
        if (applicationsSplash) applicationsSplash.classList.remove('visible');
        document.querySelectorAll('.app-splash-ring').forEach(r => r.style.display = 'none');
        
        // Hide teal corner logo
        if (cornerLogoTeal) cornerLogoTeal.classList.remove('visible');
      }
      
      // Show doors overlay
      function showDoors() {
        // Hide applications splash
        hideApplicationsSplash();
        
        // Hide all pages
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        
        // Show doors
        if (doors) doors.classList.add('visible');
        
        // Keep logo dimmed
        if (logoText) {
          logoText.classList.add('dimmed');
        }
        
        // Keep nav and teal logo visible
        if (nav) nav.classList.add('visible');
        if (cornerLogoTeal) cornerLogoTeal.classList.add('visible');
        
        // Keep teal theme for doors
        document.body.classList.add('theme-teal');
        
        // Disable particle hover
        if (window.setMouseInfluence) window.setMouseInfluence(0);
        
        // Hide disclaimer
        if (researchDisclaimer) researchDisclaimer.classList.remove('visible');
        
        // Show banner on doors
        updateBannerVisibility('doors', false);
      }
      
      // Hide doors overlay
      function hideDoors() {
        if (doors) doors.classList.remove('visible');
      }
      
      // Logo click - go to About (theory/orange)
      if (logoText) {
        logoText.addEventListener('click', (e) => {
          e.stopPropagation();
          
          // Start the combined fill-then-unfill animation
          const logoRingStatic = document.getElementById('logo-ring-static');
          if (logoRingStatic) {
            logoRingStatic.classList.add('transitioning');
          }
          
          // Navigate at peak brightness (25% of 8s = 2s)
          setTimeout(() => {
            // Hide any applications/doors overlays
            hideApplicationsSplash();
            hideDoors();
            document.body.classList.remove('theme-teal');
            
            // Navigate to about
            if (typeof navigateTo === 'function') {
              navigateTo('about');
            }
          }, 1200);
          
          // Clean up after full animation completes
          setTimeout(() => {
            if (logoRingStatic) {
              logoRingStatic.classList.remove('transitioning');
            }
          }, 8000);
        });
      }
      
      // Applications splash logo click - show doors
      const appSplashLogo = document.querySelector('.app-splash-logo');
      if (appSplashLogo) {
        appSplashLogo.addEventListener('click', () => {
          // Start the combined fill-then-unfill animation
          const appRingStatic = document.querySelector('.app-splash-ring-static');
          if (appRingStatic) {
            appRingStatic.classList.add('transitioning');
          }
          
          // Show doors at peak brightness
          setTimeout(() => {
            showDoors();
          }, 1200);
          
          // Clean up after full animation completes
          setTimeout(() => {
            if (appRingStatic) {
              appRingStatic.classList.remove('transitioning');
            }
          }, 8000);
        });
      }
      
      // Handle Applications nav link
      document.querySelectorAll('[data-page="applications"]').forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          showApplicationsSplash();
          
          // Update nav active state
          document.querySelectorAll('[data-page]').forEach(l => {
            l.classList.toggle('active', l.dataset.page === 'applications');
          });
        });
      });
      
      // Door click handlers
      document.querySelectorAll('.door').forEach(door => {
        door.addEventListener('click', () => {
          const page = door.dataset.page;
          if (page) {
            hideDoors();
            hideApplicationsSplash();
            setTheme(page);
            updateDisclaimer(page);
            
            // Disable particle hover on hardware/software pages
            if (window.setMouseInfluence) window.setMouseInfluence(0);
            
            // Show the page
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            const targetPage = document.getElementById(page + '-page');
            if (targetPage) {
              targetPage.classList.add('active');
              targetPage.scrollTop = 0;
            }
            
            // Update nav active state - show Applications as active for hw/sw pages
            document.querySelectorAll('[data-page]').forEach(link => {
              link.classList.toggle('active', link.dataset.page === 'applications');
            });
            
            // Update currentPage for main navigation tracking
            currentPage = page;
            updateCornerLogos(page);
            
            // Show nav and teal logo on hardware/software
            if (nav) nav.classList.add('visible');
            if (cornerLogoTeal) cornerLogoTeal.classList.add('visible');
          }
        });
      });
      
      // Try Demo link in doors overlay
      const demoLink = document.querySelector('.doors-demo-link');
      if (demoLink) {
        demoLink.addEventListener('click', (e) => {
          e.preventDefault();
          hideDoors();
          hideApplicationsSplash();
          
          // Navigate to lab page
          document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
          const labPage = document.getElementById('lab-page');
          if (labPage) {
            labPage.classList.add('active');
            labPage.scrollTop = 0;
          }
          
          // Hide nav on lab page
          if (nav) nav.classList.remove('visible');
          
          // Update nav active state - show Applications as active for lab
          document.querySelectorAll('[data-page]').forEach(link => {
            link.classList.toggle('active', link.dataset.page === 'applications');
          });
          
          currentPage = 'lab';
          updateBannerVisibility('lab', false);
          updateCornerLogos('lab');
          
          // Disable particle hover on lab
          if (window.setMouseInfluence) window.setMouseInfluence(0);
          
          // Check for existing session - skip terms if already accepted this session
          const existingSession = sessionStorage.getItem('lab_session');
          if (existingSession) {
            const labGate = document.getElementById('lab-gate');
            const labContent = document.getElementById('lab-content');
            if (labGate) labGate.classList.add('hidden');
            if (labContent) {
              labContent.classList.add('visible');
              if (typeof showDemo === 'function') showDemo();
            }
          } else {
            // Start disclaimer countdown if not already accepted
            if (typeof startDisclaimerCountdown === 'function') {
              startDisclaimerCountdown();
            }
          }
        });
      }
      
      // Back button handlers for hardware/software pages - go back to doors
      document.querySelectorAll('.hw-sw-page .back-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          showDoors();
        });
      });
      
      // Lab back button - go back to doors
      const labBackBtn = document.querySelector('.lab-back-btn');
      if (labBackBtn) {
        labBackBtn.addEventListener('click', (e) => {
          e.preventDefault();
          document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
          showDoors();
        });
      }
      
      // Footer nav and other links in hw-sw pages
      document.querySelectorAll('.hw-sw-page [data-page]').forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          const page = link.dataset.page;
          
          if (page === 'doors') {
            showDoors();
            return;
          }
          
          // For hardware/software, stay in teal world
          if (page === 'hardware' || page === 'software') {
            hideDoors();
            hideApplicationsSplash();
            setTheme(page);
            updateDisclaimer(page);
            
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            const targetPage = document.getElementById(page + '-page');
            if (targetPage) {
              targetPage.classList.add('active');
              targetPage.scrollTop = 0;
            }
            
            document.querySelectorAll('[data-page]').forEach(l => {
              l.classList.toggle('active', l.dataset.page === 'applications');
            });
            
            // Update currentPage
            currentPage = page;
            updateCornerLogos(page);
            
            // Keep nav and teal logo visible
            if (nav) nav.classList.add('visible');
            if (cornerLogoTeal) cornerLogoTeal.classList.add('visible');
            return;
          }
          
          // For other pages (contact, rcott, patent, about), use main navigation
          hideDoors();
          hideApplicationsSplash();
          document.body.classList.remove('theme-teal');
          if (researchDisclaimer) researchDisclaimer.classList.remove('visible');
          
          // Use navigateTo for proper transition
          if (typeof navigateTo === 'function') {
            navigateTo(page);
          }
        });
      });
      
      // Visual container click handlers
      document.querySelectorAll('.visual-container').forEach(container => {
        container.addEventListener('click', (e) => {
          if (!e.target.classList.contains('hotspot')) {
            container.classList.toggle('revealed');
          }
        });
      });
      
      // Visual tooltip handlers
      if (visualTooltip) {
        document.querySelectorAll('.hotspot').forEach(el => {
          el.addEventListener('mouseenter', (e) => {
            const tip = e.target.getAttribute('data-tip');
            if (tip) {
              visualTooltip.textContent = tip;
              visualTooltip.classList.add('visible');
            }
          });
          
          el.addEventListener('mousemove', (e) => {
            visualTooltip.style.left = (e.clientX + 10) + 'px';
            visualTooltip.style.top = (e.clientY - 25) + 'px';
          });
          
          el.addEventListener('mouseleave', () => {
            visualTooltip.classList.remove('visible');
          });
        });
      }
      
      // Claims toggle functionality (Patent page) - accordion style, only one open at a time
      const amendedToggle = document.getElementById('amended-claims-toggle');
      const originalToggle = document.getElementById('original-claims-toggle');
      const amendedContent = document.getElementById('amended-claims-content');
      const originalContent = document.getElementById('original-claims-content');
      
      if (amendedToggle && originalToggle) {
        amendedToggle.addEventListener('click', () => {
          const isOpen = amendedToggle.classList.contains('active');
          
          if (isOpen) {
            // Close amended
            amendedToggle.classList.remove('active');
            amendedToggle.querySelector('.toggle-indicator').textContent = '○';
            amendedContent.classList.add('collapsed');
          } else {
            // Open amended, close original
            amendedToggle.classList.add('active');
            amendedToggle.querySelector('.toggle-indicator').textContent = '●';
            amendedContent.classList.remove('collapsed');
            
            originalToggle.classList.remove('active');
            originalToggle.querySelector('.toggle-indicator').textContent = '○';
            originalContent.classList.add('collapsed', 'blurred');
          }
        });
        
        originalToggle.addEventListener('click', () => {
          const isOpen = originalToggle.classList.contains('active');
          
          if (isOpen) {
            // Close original
            originalToggle.classList.remove('active');
            originalToggle.querySelector('.toggle-indicator').textContent = '○';
            originalContent.classList.add('collapsed', 'blurred');
          } else {
            // Open original, close amended
            originalToggle.classList.add('active');
            originalToggle.querySelector('.toggle-indicator').textContent = '●';
            originalContent.classList.remove('collapsed', 'blurred');
            
            amendedToggle.classList.remove('active');
            amendedToggle.querySelector('.toggle-indicator').textContent = '○';
            amendedContent.classList.add('collapsed');
          }
        });
      }
    })();
    
  </script>
  
  <!-- Persistent bottom banner -->
  <div id="site-banner" class="site-banner">AI-MAPPED CROSS-DOMAIN CONSTRAINT GEOMETRY</div>
</body>
</html>
